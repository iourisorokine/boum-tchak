(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{130:function(e,t,n){e.exports=n(323)},136:function(e,t,n){},322:function(e,t,n){},323:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),c=n(8),l=n(0),o=n.n(l),u=n(123),i=n.n(u),s=(n(136),n(51)),m=n(52),f=n(55),d=n(54),p=n(13),g=n(1),b=n(2),h=n(3);function E(){var e=Object(b.a)(["\n  padding: 3px;\n  margin: 0px;\n  cursor: pointer;\n  color: ",";\n  background-color: ",";\n  &:hover {\n    background-color: black;\n    color: white;\n  }\n"]);return E=function(){return e},e}function x(){var e=Object(b.a)(["\n  height: 24px;\n  width: 24px;\n  margin: 4px;\n  border: solid black 1px;\n  background-color: ",";\n"]);return x=function(){return e},e}function v(){var e=Object(b.a)(["\n  src: ","\n  height: 260px;\n  width: 260px;\n  object-fit: cover;\n  padding: 10px;\n"]);return v=function(){return e},e}function j(){var e=Object(b.a)(["\n  font-size: 12px;\n"]);return j=function(){return e},e}function O(){var e=Object(b.a)(["\n  margin: 8px;\n  height: 26px;\n  width: ",";\n"]);return O=function(){return e},e}function y(){var e=Object(b.a)(["\n  margin: 0px 5px;\n"]);return y=function(){return e},e}function k(){var e=Object(b.a)(["\n  border: solid black 1px;\n  width: ",";\n"]);return k=function(){return e},e}function w(){var e=Object(b.a)(["\n  height: 20px;\n  width: ",";\n  margin: 10px;\n"]);return w=function(){return e},e}function S(){var e=Object(b.a)(["\n  position: relative;\n  margin: 30px 10px;\n  border: solid 1px black;\n  border-radius: 10px;\n  padding-top: 10px;\n  width: 80%;\n  &:hover "," {\n    visibility: visible;\n  }\n"]);return S=function(){return e},e}function C(){var e=Object(b.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  margin-top: -8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  visibility: hidden;\n"]);return C=function(){return e},e}function P(){var e=Object(b.a)(["\n  margin: auto;\n  min-width: 400px;\n  max-width: 700px;\n  position: absolute;\n  z-index: 10;\n  top: 150px;\n  box-shadow: 3px 3px 5px #bbb;\n  background-color: white;\n  border: solid 1px black;\n  border-radius: 3px;\n  padding: 10px;\n"]);return P=function(){return e},e}function I(){var e=Object(b.a)(["\n  font-size: 16px;\n"]);return I=function(){return e},e}function T(){var e=Object(b.a)(["\n  padding: 10px;\n"]);return T=function(){return e},e}var D=h.a.div(T()),N=h.a.span(I()),A=h.a.div(P()),L=h.a.div(C()),B=h.a.div(S(),L),V=h.a.input(w(),(function(e){return e.width||"100px"})),F=(h.a.form(k(),(function(e){return e.width?"".concat(e.width,"px"):"100%"})),h.a.label(y())),z=h.a.select(O(),(function(e){return e.width||"110px"})),M=h.a.option(j()),U=h.a.img(v(),(function(e){return e.src})),H=h.a.div(x(),(function(e){return e.backgroundColor||"white"})),W=h.a.p(E(),(function(e){return e.selected?"white":"black"}),(function(e){return e.selected?"black":"white"}));function _(){var e=Object(b.a)(["\n  color: black;\n  backgroundcolor: white;\n  padding: 6px;\n  bordercolor: black;\n  border: 1px solid black;\n  border-radius: 50%;\n  cursor: pointer;\n"]);return _=function(){return e},e}function R(){var e=Object(b.a)(["\n  line-height: 10px;\n  padding: 3px;\n  margin: 5px;\n  font-size: 25px;\n  color: red;\n  font-weight: bold;\n  cursor: pointer;\n  &:hover {\n    background-color: red;\n    color: white;\n  }\n"]);return R=function(){return e},e}function q(){var e=Object(b.a)(["\n  height: 30px;\n  min-width: 40px;\n  margin: 8px;\n  padding: 0px 10px;\n  border-radius: 15px;\n  border: solid 1px black;\n  color: ",";\n  background-color: ",";\n  font-size: 12px;\n  &:hover {\n    background-color: black;\n    color: white;\n    opacity: ",";\n  }\n"]);return q=function(){return e},e}function G(){var e=Object(b.a)(["\n  margin: 8px;\n  border: solid 2px black;\n  border-radius: 5px;\n  padding: 6px 12px;\n  color: #000;\n  text-decoration: none;\n  cursor: pointer;\n  &:hover {\n    background-color: black;\n    color: white;\n  }\n"]);return G=function(){return e},e}function J(){var e=Object(b.a)(["\n  width: 60px;\n  background-color: #f00;\n  color: #fff;\n  font-size: 20px;\n  font-weight: bold;\n"]);return J=function(){return e},e}function Y(){var e=Object(b.a)(["\n  width: 60px;\n  background-color: #0f0;\n  color: #fff;\n  font-size: 20px;\n  font-weight: bold;\n"]);return Y=function(){return e},e}function K(){var e=Object(b.a)(["\n  height: 36px;\n  min-width: 36px;\n  margin: 8px;\n  padding: 0px 10px;\n  border-radius: 18px;\n  border: solid 1px black;\n  background-color: ",";\n  font-size: 16px;\n  box-shadow: 3px 3px 5px #bbb;\n  cursor: pointer;\n  &:hover {\n    background-color: ",";\n    color: white;\n  }\n"]);return K=function(){return e},e}var Q=h.a.button(K(),(function(e){return e.backgroundColor||"white"}),(function(e){return e.hoverColor||"black"})),$=Object(h.a)(Q)(Y()),X=Object(h.a)(Q)(J()),Z=h.a.div(G()),ee=h.a.button(q(),(function(e){return e.selected?"white":"black"}),(function(e){return e.selected?"black":"white"}),(function(e){return e.selected?.5:1})),te=h.a.p(R());h.a.button(_());function ne(){var e=Object(b.a)(["\n  height: ",";\n"]);return ne=function(){return e},e}function ae(){var e=Object(b.a)(["\n  width: 90%;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flexStart;\n"]);return ae=function(){return e},e}function re(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n  width: 100vw;\n  max-width: ",";\n"]);return re=function(){return e},e}function ce(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return ce=function(){return e},e}function le(){var e=Object(b.a)(["\n  height: 110px;\n"]);return le=function(){return e},e}function oe(){var e=Object(b.a)(["\n  height: 90px;\n  width: 100vw;\n  z-index: 10;\n  background-color: white;\n  display: flex;\n  position: fixed;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 4px 4px 5px #eee;\n"]);return oe=function(){return e},e}function ue(){var e=Object(b.a)(["\n  display: flex;\n  flex-direction: ",";\n  justify-content: center;\n  min-height: 20px;\n  padding: ",";\n  align-items: ",";\n  justify-content: ",";\n  flex: ",";\n"]);return ue=function(){return e},e}function ie(){var e=Object(b.a)(["\n  min-height: 60vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return ie=function(){return e},e}function se(){var e=Object(b.a)(["\n  padding: ",";\n  cursor: pointer;\n  &:hover {\n    background-color: black;\n    color: white;\n    opacity: ",";\n  }\n"]);return se=function(){return e},e}function me(){var e=Object(b.a)(["\n  padding: ",";\n  display: flex;\n  width: 100%;\n"]);return me=function(){return e},e}var fe=h.a.div(me(),(function(e){return e.padding||0})),de=Object(h.a)(fe)(se(),(function(e){return e.padding||0}),(function(e){return e.selected?.5:1})),pe=h.a.div(ie()),ge=h.a.div(ue(),(function(e){return e.flexDirection||"column"}),(function(e){return e.padding||0}),(function(e){return e.alignItems||"flex-start"}),(function(e){return e.justifyContent||"center"}),(function(e){return e.flex||1})),be=h.a.div(oe()),he=h.a.div(le()),Ee=h.a.div(ce()),xe=h.a.div(re(),(function(e){return e.flexDirection||"column"}),(function(e){return e.alignItems||"center"}),(function(e){return e.justifyContent||"flex-start"}),(function(e){return e.maxWidth||"900px"})),ve=h.a.div(ae()),je=h.a.div(ne(),(function(e){return e.height||"20px"}));function Oe(){var e=Object(b.a)(["\n  color: red;\n"]);return Oe=function(){return e},e}function ye(){var e=Object(b.a)(["\n  padding: 0px 50px;\n  font-size: 56px;\n  text-shadow: 4px 4px #7799dd;\n"]);return ye=function(){return e},e}function ke(){var e=Object(b.a)(["\n  font-size: 12px;\n  line-height: 12px;\n  padding: ",";\n  margin: 0;\n"]);return ke=function(){return e},e}function we(){var e=Object(b.a)(["\n  font-size: 10px;\n  line-height: 10px;\n  width: 70px;\n"]);return we=function(){return e},e}function Se(){var e=Object(b.a)(["\n  padding: 0px 10px;\n  background-color: white;\n  font-weight: ",";\n  font-size: 12px;\n"]);return Se=function(){return e},e}function Ce(){var e=Object(b.a)(["\n  margin-top: -32px;\n  padding: 0px 12px;\n  display: flex;\n  justify-content: space-between;\n"]);return Ce=function(){return e},e}function Pe(){var e=Object(b.a)(["\n  padding: 10px 0;\n  margin: 0 0 4px 0;\n"]);return Pe=function(){return e},e}function Ie(){var e=Object(b.a)(["\n  padding: 10px 0;\n  margin: 0 0 10px 0;\n"]);return Ie=function(){return e},e}var Te=h.a.h2(Ie()),De=h.a.h3(Pe()),Ne=h.a.div(Ce()),Ae=h.a.p(Se(),(function(e){return e.b?"bold":"regular"})),Le=h.a.p(we()),Be=h.a.p(ke(),(function(e){return e.padding||2})),Ve=h.a.h1(ye()),Fe=h.a.p(Oe());function ze(){var e=Object(b.a)(["\n  height: 8px;\n  width: 8px;\n  margin: 4px;\n  border-width: 2px;\n  border-style: solid;\n  border-color: ",";\n  background-color: ",";\n  cursor: pointer;\n"]);return ze=function(){return e},e}function Me(){var e=Object(b.a)(["\n  height: 30px;\n  width: 30px;\n  margin: 3px;\n  box-shadow: 3px 3px 5px ",";\n  background-color: ",";\n  opacity: ",";\n  cursor: pointer;\n  &:hover {\n    height: ",";\n    width: ",";\n    margin: ",";\n  }\n  animation-name: ",";\n  animation-duration: 0.8s;\n  animation-iteration-count: 1;\n"]);return Me=function(){return e},e}function Ue(){var e=Object(b.a)(["\n 0% { \n   height: 30px; \n   width: 30px;\n   margin: 3px; \n  }\n  20% { \n   height: 24px; \n   width: 24px;\n   margin: 6px; \n    }\n 30% { \n   height: 32px; \n    width: 32px;  \n    margin: 2px;\n}\n 100% { \n   height: 30px; \n   width: 30px;\n   margin: 3px; \n }\n"]);return Ue=function(){return e},e}function He(){var e=Object(b.a)(["\n  margin: 0;\n  display: flex;\n"]);return He=function(){return e},e}function We(){var e=Object(b.a)(["\n  margin: 10px 20px;\n  padding-bottom: 10px;\n"]);return We=function(){return e},e}var _e=h.a.div(We()),Re=h.a.div(He()),qe=Object(h.b)(Ue()),Ge=h.a.div(Me(),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.highlighted?.7:1}),(function(e){return e.clickable?"24px":"30px"}),(function(e){return e.clickable?"24px":"30px"}),(function(e){return e.clickable?"6px":"3px"}),(function(e){return e.animated&&qe})),Je=h.a.div(ze(),(function(e){return e.color||"black"}),(function(e){return e.selected?e.color||"black":"white"})),Ye=function(e){var t=e.notePosition,n=e.status,a=e.colors,r=e.toggleActiveNote,c=e.linePosition,l=e.sounds,u=e.highlighted,i=e.animated,s=a[n];return o.a.createElement(Ge,{color:s,highlighted:u,onClick:function(){r(t,c,l)},clickable:!0,animated:i})},Ke=function(e){var t=e.linePosition,n=e.notes,a=e.noteColors,r=e.toggleActiveNote,c=e.sounds,l=e.highlightedNote,u=e.label,i=e.isDeleteLineVisible,s=e.animatedNotes,m=e.deleteLine,f=e.currentPage,d=e.lenghtOfPage,p=(f-1)*d,g=f*d,b=(null===n||void 0===n?void 0:n.length)?n.map((function(e,n){return n>=p&&n<g?o.a.createElement(Ye,{key:n,status:e,notePosition:n,colors:a,toggleActiveNote:r,linePosition:t,sounds:c,highlighted:l===n,animated:s.includes(n)}):null})):[];return o.a.createElement(Re,null,o.a.createElement(Le,null,u&&u),i&&o.a.createElement(te,{onClick:function(){return m(t)}},"x"),b)},Qe=function(e){var t=e.currentPage,n=e.selectPage,a=e.pages,r=e.clickable,c=void 0===r||r,l=e.createMode;return a.length<2&&!l?null:o.a.createElement(fe,null,o.a.createElement(ge,{flex:2}),o.a.createElement(ge,null,o.a.createElement(fe,null,a.map((function(e,a){return o.a.createElement(Je,{key:a,selected:t===a+1,onClick:c?function(){return n(a+1)}:null})})))))},$e=function(e){var t=e.onPlayBtnPress,n=e.onStopBtnPress,a=e.isPlaying,r=e.addOneBar,c=e.removeOneBar,l=e.isNotePlayedOnClick,u=e.setIsNotePlayedOnClick,i=e.tempo,s=e.setTempo,m=e.setTimeoutTempo,f=e.numberOfBars;return o.a.createElement(D,null,a?o.a.createElement(X,{onClick:n},"[]"):o.a.createElement($,{onClick:t},">"),o.a.createElement(Q,{onClick:function(){u(!l)}},"Play on click: ",l?"yes":"no"),o.a.createElement(Q,{onClick:c},"-"),o.a.createElement(N,null,"Bars: ",f),o.a.createElement(Q,{onClick:r},"+"),o.a.createElement(Q,{onClick:function(){s(i-5),m(6e4/i/4)}},"-"),o.a.createElement(N,null,"Tempo: ",i),o.a.createElement(Q,{onClick:function(){s(i+5),m(6e4/i/4)}},"+"))},Xe=n(7),Ze=function(e){var t=e.toggleIsAddInstrumentVisible,n=e.toggleIsSaveSongVisible,a=e.toggleIsDeleteLineVisible,r=e.user;return o.a.createElement(D,null,o.a.createElement(Q,{onClick:n},"Save Song"),r&&o.a.createElement(Xe.b,{to:"/load-song"},o.a.createElement(Q,null,"Load Song")),o.a.createElement(Q,{onClick:t},"Add Instrument"),o.a.createElement(Q,{onClick:a},"Remove Instrument"))},et=n(27),tt=n(10),nt=n.n(tt),at=function(e){var t=e.addInstrument,n=e.toggleIsAddInstrumentVisible,a=Object(l.useState)([]),u=Object(g.a)(a,2),i=u[0],s=u[1],m=Object(l.useState)(null),f=Object(g.a)(m,2),d=f[0],b=f[1],h=Object(l.useState)(!1),E=Object(g.a)(h,2),x=E[0],v=E[1],j=Object(l.useState)([]),O=Object(g.a)(j,2),y=O[0],k=O[1],w=function(){var e=Object(c.a)(r.a.mark((function e(t,n){var a,c,l,o,u;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t&&{params:{category:t}},e.next=3,nt.a.get("/api/instrument",a);case 3:c=e.sent,(l=c.data)&&(s(l),n&&(o=l.map((function(e){return e.category})),u=Object(p.a)(new Set(o)),k(u))),v(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){v(!0),w(null,!0)}),[]);return o.a.createElement(A,null,o.a.createElement(fe,{padding:"10px 12px 4px 12px"},o.a.createElement(ge,{flexDirection:"row"},y.map((function(e){if("default"!==e)return o.a.createElement(ee,{key:e,selected:d===e,onClick:function(){return function(e){w(e),b(e)}(e)}},e)})))),x&&o.a.createElement(ge,{justifyContent:"center",alignItems:"center"},o.a.createElement(et.Bars,{width:100,height:50,fill:"#000",stroke:"#000"})),o.a.createElement(fe,{padding:"4px 12px 0 12px"},o.a.createElement(ge,null,i.map((function(e){return o.a.createElement(de,{key:e.name,padding:"4px 0 4px 0",onClick:function(){return t(e),void n()}},o.a.createElement(ge,{flex:2},o.a.createElement(Be,null,e.name)),o.a.createElement(ge,null,o.a.createElement(Be,null,e.category)),o.a.createElement(ge,null,o.a.createElement(Be,null,e.subCategory)))})))),o.a.createElement(fe,{padding:"20px 0 10px 0"},o.a.createElement(ge,{alignItems:"center"},o.a.createElement(Q,{hoverColor:"red",onClick:n},"Cancel"))))},rt=function(e){var t=e.saveTheSong,n=e.user,a=e.toggleIsSaveSongVisible,r=Object(l.useState)(""),c=Object(g.a)(r,2),u=c[0],i=c[1];return o.a.createElement(A,null,n?o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{style:{margin:10}},"Name your song (if you modified an existing song, ",o.a.createElement("br",null),"it will still be saved under as new one):"),o.a.createElement(V,{type:"text",placeholder:"Padapoum",value:u,onChange:function(e){i(e.target.value)}}),o.a.createElement("div",null,o.a.createElement(Q,{onClick:function(){return t(u)}},"Save"),o.a.createElement(Q,{onClick:function(){return a()}},"Cancel"))):o.a.createElement(o.a.Fragment,null,o.a.createElement("p",{style:{margin:10}},"To save a song, you need to have a profile, but let's do it! ",o.a.createElement("br",null),"Please login or signup:"),o.a.createElement("div",null,o.a.createElement(Xe.b,{to:"/signup"},o.a.createElement(Q,null,"Signup")),o.a.createElement(Xe.b,{to:"/login"},o.a.createElement(Q,null,"Login")))))},ct=function(e){var t=e.notes,n=[];if((null===t||void 0===t?void 0:t.length)&&(null===t||void 0===t?void 0:t.length)>=4)for(var a=4;a<=t.length;a+=4)n.push(o.a.createElement("div",{key:a,style:{borderBottom:"1px solid #888",width:138,marginRight:3,marginLeft:3,marginBottom:12,fontSize:10,color:"#888"}},"1 bar"));return o.a.createElement(Re,null,o.a.createElement(Le,null),n)},lt=function(e,t){if(!e)return[];var n=[];return e.forEach((function(e){for(var a=[],r=1;r<=t;r++)a.push(0);n.push(a)})),n},ot=function(e){return e.map((function(e){var t=[],n=[];return e.sounds.forEach((function(e){e.url?t.push(new Audio(e.url)):t.push(null),n.push(e.color)})),{id:e._id,label:e.name,colors:n,sounds:t}}))},ut=function(e,t,n){t.forEach((function(t,a){if(t[n]){var r=t[n];e[a].sounds.forEach((function(e){e&&(e.pause(),e.currentTime=0)})),e[a].sounds[r].play()}}))},it=["default","Drums","Bass","Synth","Guitar","Piano","Brass","Strings","Flute","Effects","Voice","Other"],st={"":[""],default:[""],Drums:["","Kick","Snare","Tom","Hi-hat","Cymbal","Vinnyl","Percussion","Clang","Other"],Bass:["","Acoustic","Fretless","Electric","Picked","Synth","Slap"],Synth:["","Piano","Ambiant","Lead","Pad","Effect","Electronic"],Guitar:["","Acoustic","Clean","Overdrive","Distorsion","Muted","Jazz","Fuzz","Wah","Funk"],Piano:["","Grand","Acoustic","Clavesin"],Brass:["","Horn","Trumpet","Tuba","Trombone"],Strings:["","Violin","Cello","Double Bass","Harp","Mixed-strings"],Flute:["","Flute","Clarinet","Pipeau","Peruvian","Bass","Recorder"],Effects:["","Scratch","Noise","Clang","Electronic","Mystic"],Voice:["","Hi-sing","Mid-sing","Low-sing","Talk","Noize"],Other:[""]},mt=function(e){return st[e]},ft=function(){return it},dt=function(e){var t=Object(l.useState)([]),n=Object(g.a)(t,2),a=n[0],u=n[1],i=Object(l.useState)(!1),s=Object(g.a)(i,2),m=s[0],f=s[1],d=Object(l.useState)([-1]),b=Object(g.a)(d,2),h=b[0],E=b[1],x=Object(l.useState)([]),v=Object(g.a)(x,2),j=v[0],O=v[1],y=Object(l.useState)([]),k=Object(g.a)(y,2),w=k[0],S=k[1],C=Object(l.useState)(120),P=Object(g.a)(C,2),I=P[0],T=P[1],D=Object(l.useState)(125),N=Object(g.a)(D,2),L=N[0],B=N[1],V=Object(l.useState)(!0),F=Object(g.a)(V,2),z=F[0],M=F[1],U=Object(l.useState)(!1),H=Object(g.a)(U,2),W=H[0],_=H[1],R=Object(l.useState)(!1),q=Object(g.a)(R,2),G=q[0],J=q[1],Y=Object(l.useState)(""),K=Object(g.a)(Y,2),Q=K[0],$=K[1],X=Object(l.useState)(!1),Z=Object(g.a)(X,2),ee=Z[0],te=Z[1],ne=Object(l.useState)(1),ae=Object(g.a)(ne,2),re=ae[0],ce=ae[1],le=Object(l.useState)([1]),oe=Object(g.a)(le,2),ue=oe[0],ie=oe[1],se=o.a.useRef(null),me=window.innerWidth>=800?16:12;Object(l.useEffect)((function(){var t,n,a=null===e||void 0===e||null===(t=e.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id;return a?de(a):fe(),function(){return he()}}),[]);var fe=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n,a,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.get("/api/instrument/starter");case 2:t=e.sent,n=t.data,a=ot(n),c=lt(a,8),S(a),u(c);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.get("/api/song/".concat(t));case 2:n=e.sent,a=n.data,console.log(a),c=Object(p.a)(a.instruments),l=ot(c),S(l),u(a.partition),T(a.tempo),B(6e4/a.tempo/4);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(e){var t=Object(p.a)(a),n=Object(p.a)(w);t.splice(e,1),n.splice(e,1),u(t),S(n),ge()},ge=function(){a.length&&te(!ee)},be=function(){_(!W)},he=function(){f(!1),clearInterval(se.current)},Ee=function(e,t,n){var r=Object(p.a)(a),c=n.length,l=(r[t][e]+1)%c;r[t][e]=l,n[l]&&z&&n[l].play(),u(r)},xe=function(){var t=Object(c.a)(r.a.mark((function t(n){var c,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=w.map((function(e){return e.id})),l={title:n,partition:a,tempo:I,instruments:c,creator:e.user._id||"anonymous",creatorName:e.user.username||"anonymous",posted:!0},t.next=4,nt.a.post("api/song/",l);case 4:J(!1),$('New song "'.concat(n,'" successfully saved!')),setTimeout((function(){$("")}),1500);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return o.a.createElement(o.a.Fragment,null,W&&o.a.createElement(at,{addInstrument:function(e){for(var t=a[0]?a[0].length:8,n=[],r=1;r<=t;r++)n.push(0);var c=Object(p.a)(a),l=Object(p.a)(w),o=function(e){var t=[],n=[];return e.sounds.forEach((function(e){e.url?t.push(new Audio(e.url)):t.push(null),n.push(e.color)})),{id:e._id,label:e.name,colors:n,sounds:t}}(e);l.push(o),c.push(n),S(l),u(c)},toggleIsAddInstrumentVisible:be}),G&&o.a.createElement(rt,{saveTheSong:xe,toggleIsSaveSongVisible:function(){return J(!G)},user:e.user}),Q&&o.a.createElement(A,null,o.a.createElement("p",null,Q)),o.a.createElement(Qe,{pages:ue,selectPage:ce,currentPage:re,createMode:!0}),o.a.createElement("div",{style:{minHeight:300,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},o.a.createElement(_e,null,o.a.createElement(ct,{notes:a[0]}),w.length?w.map((function(e,t){return o.a.createElement(Ke,{key:t,linePosition:t,label:e.label,notes:a[t],noteColors:e.colors,toggleActiveNote:Ee,sounds:e.sounds,highlightedNote:h,animatedNotes:j,isDeleteLineVisible:ee,deleteLine:pe,currentPage:re,lenghtOfPage:me})})):o.a.createElement("p",null,'No partition to display yet... Click on "Add Instruments" to start composing.'))),o.a.createElement($e,{onPlayBtnPress:function(){!function(e,t,n){if(t&&t.length){f(!0),ce(1);var a=0;se.current=setInterval((function(){if(E(a),O([a-1,a,a+1]),ut(e,t,a),++a>=t[0].length&&(a=0),a%me===1){var n=Math.ceil(a/me);ce(n)}}),n)}}(w,a,L)},onStopBtnPress:he,addOneBar:function(){if(a.length&&a[0].length<64){var e=Object(p.a)(a);e.forEach((function(e){e.push(0)}));var t=Math.ceil(e[0].length/me),n=ue.length<t?ue.concat([1]):ue;u(e),ie(n)}},removeOneBar:function(){var e=Object(p.a)(a),t=e[0].length-1;e.forEach((function(e){e.splice(t,1)}));var n=Math.ceil(e[0].length/me),r=ue.length>n?ue.slice(0,ue.length-1):ue;u(e),ie(r)},isPlaying:m,tempo:I,setTempo:T,setTimeoutTempo:B,numberOfBars:a[0]?a[0].length:0,isNotePlayedOnClick:z,setIsNotePlayedOnClick:M}),o.a.createElement(Ze,{toggleIsAddInstrumentVisible:be,toggleIsSaveSongVisible:function(){return J(!G)},toggleIsDeleteLineVisible:ge,user:e.user}))},pt=function(e){var t=e.status,n=e.colors,a=e.highlighted,r=e.isAnimated,c=n[t];return o.a.createElement(Ge,{color:c,highlighted:a,animated:r})},gt=function(e){var t=e.notes,n=e.noteColors,a=e.highlightedNote,r=e.animatedNotes,c=e.lengthOfPage,l=e.currentPage,u=(l-1)*c,i=l*c,s=t.map((function(e,t){if(t>=u&&t<i)return o.a.createElement(pt,{key:t,status:e,colors:n,highlighted:a===t,isAnimated:r.includes(t)})}));return o.a.createElement(Re,null,s)},bt=n(25),ht=n(24),Et={width:40,height:40,padding:"10px 30px",border:"solid 1px rgba(0, 0, 0, 0.6)",color:"rgba(0, 0, 0, 0.7)",backgroundColor:"rgba(250, 250, 250, 0.5)",borderRadius:5,zIndex:5},xt=function(e){var t=Object(l.useState)(!1),n=Object(g.a)(t,2),a=n[0],r=n[1],c=Object(l.useState)(-1),u=Object(g.a)(c,2),i=u[0],s=u[1],m=Object(l.useState)([-1,-1,-1]),f=Object(g.a)(m,2),d=f[0],p=f[1],b=Object(l.useState)(1),h=Object(g.a)(b,2),E=h[0],x=h[1],v=Object(l.useState)([1]),j=Object(g.a)(v,2),O=j[0],y=j[1],k=6e4/e.tempo/4,w=Object(l.useRef)(null),S=window.innerWidth>=800?16:12;Object(l.useEffect)((function(){for(var t=[],n=Math.ceil(e.partition[0].length/S),a=1;a<=n;a++)t.push(1);y(t)}),[]),Object(l.useEffect)((function(){return function(){return C()}}),[]);var C=function(){r(!1),clearInterval(w.current)};return o.a.createElement(B,null,o.a.createElement(L,{onClick:function(){a?C():function(e,t,n){r(!0),x(1);var a=0;w.current=setInterval((function(){if(s(a),p([a-1,a,a+1]),ut(e,t,a),++a>=t[0].length&&(a=0),a%S===1){var n=Math.ceil(a/S);x(n)}}),n)}(e.musicLines,e.partition,k)}},a?o.a.createElement(bt.a,{icon:ht.c,color:"black",style:Et}):o.a.createElement(bt.a,{icon:ht.b,color:"black",style:Et})),o.a.createElement(Ne,null,o.a.createElement(Ae,{b:!0},e.title),o.a.createElement(Ae,null,"by ",e.creatorName)),o.a.createElement(fe,null,o.a.createElement(Qe,{pages:O,selectPage:e.selectPage,currentPage:E,clickable:!1})),o.a.createElement(_e,null,e.musicLines.map((function(t,n){return o.a.createElement(gt,{key:n,linePosition:n,notes:e.partition[n],noteColors:t.colors,sounds:t.sounds,lengthOfPage:S,currentPage:E,highlightedNote:i,animatedNotes:d})}))))},vt=function(){var e={padding:4,paddingTop:32,width:40,height:40};return o.a.createElement(pe,null,o.a.createElement(fe,null,o.a.createElement(ge,{justifyContent:"center",alignItems:"center"},o.a.createElement(Te,null,"Welcome to Boom-Tchak!"))),o.a.createElement(fe,null,o.a.createElement(ge,{justifyContent:"center",alignItems:"center"},o.a.createElement("p",{style:{margin:0,padding:8}},"The app to discover and create nice music loops."),o.a.createElement("p",{style:{margin:0,padding:0}},"Want to start creating music? It's here >>"," ",o.a.createElement(Xe.b,{to:"/create"},o.a.createElement(Q,null,"Create"))),o.a.createElement("p",{style:{margin:0,padding:0}},"Need help? This way >>"," ",o.a.createElement(Xe.b,{to:"/help"},o.a.createElement(Q,null,"Help"))),o.a.createElement("p",{style:{margin:0,padding:8}},"To check out some nice music loops, scroll down and click on the songs"))),o.a.createElement(fe,null,o.a.createElement(ge,{flexDirection:"row",justifyContent:"center",alignItems:"center"},o.a.createElement(bt.a,{icon:ht.a,style:e,color:"black"}),o.a.createElement(bt.a,{icon:ht.a,style:e,color:"black"}),o.a.createElement(bt.a,{icon:ht.a,style:e,color:"black"}))))},jt=function(e){var t=e.isAppIntroDisplayed,n=void 0!==t&&t,a=Object(l.useState)([]),u=Object(g.a)(a,2),i=u[0],s=u[1],m=Object(l.useState)(!1),f=Object(g.a)(m,2),d=f[0],b=f[1],h=Object(l.useState)(1),E=Object(g.a)(h,2),x=E[0],v=E[1],j=Object(l.useState)(""),O=Object(g.a)(j,2),y=O[0],k=O[1],w=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b(!0),e.next=3,nt.a.get("/api/song/posted/".concat(x),{page:1});case 3:if(t=e.sent,(n=t.data).length){e.next=10;break}return k("no more songs to load..."),b(!1),setTimeout((function(){k("")}),2e3),e.abrupt("return");case 10:n.forEach((function(e){var t=ot(e.instruments);e.instruments=t})),s([].concat(Object(p.a)(i),Object(p.a)(n))),b(!1),v(x+1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(l.useEffect)((function(){w()}),[]);return o.a.createElement(o.a.Fragment,null,n&&o.a.createElement(vt,null),i.map((function(e){return o.a.createElement(xt,{key:e._id,title:e.title,partition:e.partition,musicLines:e.instruments,tempo:e.tempo,creatorName:e.creatorName})})),d?o.a.createElement(et.Bars,{width:100,height:50,fill:"#000",stroke:"#000"}):y?o.a.createElement("p",null,y):o.a.createElement("p",{onClick:function(){w()}},"loadMore"),o.a.createElement(je,{height:"100px"}))},Ot=function(e){var t=Object(l.useState)([]),n=Object(g.a)(t,2),a=n[0],u=n[1],i=Object(l.useState)(!1),s=Object(g.a)(i,2),m=s[0],f=s[1],d=Object(l.useState)(null),p=Object(g.a)(d,2),b=p[0],h=p[1],E=Object(l.useState)(""),x=Object(g.a)(E,2),v=x[0],j=x[1],O=function(){var t=Object(c.a)(r.a.mark((function t(){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return f(!0),t.next=3,nt.a.get("/api/song/creator/".concat(e.user._id));case 3:n=t.sent,(a=n.data)&&(u(a),f(!1));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(l.useEffect)((function(){O()}),[]);var y=function(){var e=Object(c.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.delete("/api/song/".concat(t));case 2:n=e.sent,j(n.message),O(),setTimeout((function(){j("")}),1500);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(ve,null,o.a.createElement(Te,null,"Load Song"),m&&o.a.createElement(ge,{alignItems:"center"},o.a.createElement(et.Bars,{width:100,height:50,fill:"#000",stroke:"#000"})),a.map((function(e){return o.a.createElement(W,{key:e._id,selected:b===e._id,onClick:function(){h(e._id)}},e.title)})),o.a.createElement("div",null,v&&o.a.createElement("p",null,v)),b&&o.a.createElement("div",{style:{paddingTop:20}},o.a.createElement(Xe.b,{to:"song/".concat(b)},o.a.createElement(Q,null,"Load")),o.a.createElement(Q,{onClick:function(){return y(b)}},"Delete"),o.a.createElement(Xe.b,{to:"/"},o.a.createElement(Q,null,"Cancel"))))},yt=function(e,t){return nt.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},kt=function(e,t){return nt.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},wt=function(e){var t=Object(l.useState)(""),n=Object(g.a)(t,2),a=n[0],u=n[1],i=Object(l.useState)(""),s=Object(g.a)(i,2),m=s[0],f=s[1],d=Object(l.useState)(""),p=Object(g.a)(d,2),b=p[0],h=p[1],E=function(){var t=Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,kt(a,m);case 2:(n=t.sent).message?h(n.message):(e.setUser(n),e.history.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),x=function(e){"username"===e.target.name&&u(e.target.value),"password"===e.target.name&&f(e.target.value)};return o.a.createElement(ve,null,o.a.createElement(fe,null,o.a.createElement(ge,null),o.a.createElement(ge,{flex:1},o.a.createElement(Te,null,"Login"),o.a.createElement(fe,null,o.a.createElement(ge,null,o.a.createElement(F,{htmlFor:"username"},"Username:")),o.a.createElement(ge,{flex:2},o.a.createElement(V,{type:"text",name:"username",width:"100%",id:"username",value:a,onChange:x}))),o.a.createElement(fe,null,o.a.createElement(ge,{flex:1},o.a.createElement(F,{htmlFor:"password"},"Password:")),o.a.createElement(ge,{flex:2},o.a.createElement(V,{type:"password",name:"password",width:"100%",id:"password",value:m,onChange:x}))),o.a.createElement(je,null),o.a.createElement(fe,null,o.a.createElement(ge,{alignItems:"center"},b&&o.a.createElement(Fe,null,b),o.a.createElement(Q,{onClick:E},"Login"),o.a.createElement("p",null,"No profile yet?"),o.a.createElement(Xe.b,{to:"/signup",style:{textDecoration:"none",color:"black"}},"signup")))),o.a.createElement(ge,null)))},St=function(e){var t=Object(l.useState)(""),n=Object(g.a)(t,2),a=n[0],u=n[1],i=Object(l.useState)(""),s=Object(g.a)(i,2),m=s[0],f=s[1],d=Object(l.useState)(""),p=Object(g.a)(d,2),b=p[0],h=p[1],E=function(){var t=Object(c.a)(r.a.mark((function t(n){var c;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yt(a,m);case 2:(c=t.sent).message?h(c.message):(e.setUser(c),e.history.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),x=function(e){"username"===e.target.name&&u(e.target.value),"password"===e.target.name&&f(e.target.value)};return o.a.createElement(ve,null,o.a.createElement(fe,null,o.a.createElement(ge,null),o.a.createElement(ge,{flex:1},o.a.createElement(Te,null,"Signup"),o.a.createElement(fe,null,o.a.createElement(ge,null,o.a.createElement(F,{htmlFor:"username"},"Username:")),o.a.createElement(ge,{flex:2},o.a.createElement(V,{type:"text",name:"username",width:"100%",id:"username",value:a,onChange:x}))),o.a.createElement(fe,null,o.a.createElement(ge,{flex:1},o.a.createElement(F,{htmlFor:"password"},"Password:")),o.a.createElement(ge,{flex:2},o.a.createElement(V,{type:"password",name:"password",width:"100%",id:"password",value:m,onChange:x}))),o.a.createElement(je,null),o.a.createElement(fe,null,o.a.createElement(ge,{alignItems:"center"},b&&o.a.createElement(Fe,null,b),o.a.createElement(Q,{onClick:E},"Submit"),o.a.createElement("p",null,"Already have a profile?"),o.a.createElement(Xe.b,{to:"/login",style:{textDecoration:"none",color:"black"}},"login")))),o.a.createElement(ge,null)))},Ct=function(e){var t=Object(l.useState)(""),n=Object(g.a)(t,2),a=n[0],u=n[1],i=function(){var t=Object(c.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nt.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data}));case 2:e.setUser(null),e.history.push("/");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return e.user?o.a.createElement(ve,null,o.a.createElement(fe,null,o.a.createElement(ge,null,o.a.createElement(Te,null,"Profile"))),o.a.createElement(fe,null,o.a.createElement(ge,{flex:2},o.a.createElement(U,{src:"https://images.unsplash.com/photo-1502377429547-835a416e4a90?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=667&q=80"})),o.a.createElement(ge,{justifyContent:"flex-start",flex:3},o.a.createElement("h3",null,"Hello, ",e.user.username),o.a.createElement("p",null,"Are you ready to create some funky beats today?"),o.a.createElement(fe,null,o.a.createElement(Xe.b,{to:"/load-song"},o.a.createElement(Q,null,"Load Song")),o.a.createElement(Q,{onClick:function(){e.user&&!0===e.user.admin?e.history.push("/create-instrument"):(u("Coming soon, stay tuned..."),setInterval((function(){u("")}),2e3))}},"Create Instrument"),o.a.createElement(Q,{onClick:i},"Logout")),o.a.createElement(fe,null,o.a.createElement(ge,null,a&&o.a.createElement("p",null,a)))))):o.a.createElement(ve,null,o.a.createElement(Te,null,"No Profile..."),o.a.createElement(fe,null,o.a.createElement(ge,null,"Please login or signup to access the profile page")))},Pt=n(129),It=n(11),Tt=function(e){var t=e.component,n=e.user,a=Object(Pt.a)(e,["component","user"]);return o.a.createElement(It.b,Object.assign({user:n},a,{render:function(e){return n?o.a.createElement(t,Object.assign({user:n},a,e)):o.a.createElement(It.a,{to:"/"})}}))},Dt=function(e){var t=e.name,n=e.setName,a=e.category,r=e.setCategory,c=e.subCategory,l=e.setSubCategory,u=ft();return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe,null,o.a.createElement(ge,{flex:1},"Name:"),o.a.createElement(ge,{justifyContent:"flex-start",flex:2},o.a.createElement(V,{type:"text",value:t,onChange:function(e){return n(e.target.value)}}))),o.a.createElement(fe,null,o.a.createElement(ge,{flex:1},"Category:"),o.a.createElement(ge,{justifyContent:"flex-start",flex:2},o.a.createElement(z,{name:"category",value:a,onChange:function(e){return r(e.target.value)}},u.map((function(e,t){return o.a.createElement(M,{key:t,value:e},"default"!==e&&e)}))))),o.a.createElement(fe,null,o.a.createElement(ge,{flex:1},"Sub-category:"),o.a.createElement(ge,{justifyContent:"flex-start",flex:2},o.a.createElement(z,{name:"sub-category",value:c,onChange:function(e){return l(e.target.value)}},mt(a).map((function(e,t){return o.a.createElement(M,{key:t,value:e},e)}))))))},Nt=function(e){var t=e.sounds,n=e.addSound;return o.a.createElement(o.a.Fragment,null,t&&t.map((function(e,t){return o.a.createElement(fe,{key:t},o.a.createElement(ge,null,o.a.createElement("p",{style:{margin:0,padding:"5px 0"}},0===t?"Default":"".concat(t))),o.a.createElement(ge,null,o.a.createElement(H,{backgroundColor:e.color})),o.a.createElement(ge,{flex:5},e.url?o.a.createElement(Q,{onClick:function(){return t=e.url,void new Audio(t).play();var t}},e.name):o.a.createElement("p",{style:{margin:0,padding:"5px 18px"}},"No sound")))})),o.a.createElement(fe,null,o.a.createElement(ge,{flex:2}),o.a.createElement(ge,{justifyContent:"flex-start",flex:5},o.a.createElement(Q,{backgroundColor:"#0f0",onClick:n},"Add Sound"))))},At=function(e){var t=e.loading,n=e.availableSounds,a=e.selectedSound,r=e.selectSound,c=Object(l.useState)(""),u=Object(g.a)(c,2),i=u[0],s=u[1],m=Object(l.useState)("default"),f=Object(g.a)(m,2),d=f[0],p=f[1],b=Object(l.useState)(""),h=Object(g.a)(b,2),E=h[0],x=h[1],v=n.filter((function(e){return(!i||e.name.toLocaleLowerCase().includes(i.toLocaleLowerCase()))&&("default"===d||d===e.category)&&(!E||E===e.subCategory)})),j={margin:2,color:"black",backgroundColor:"white",padding:6,borderColor:"black",borderWidth:1,borderStyle:"solid",borderRadius:"50%",cursor:"pointer"},O=ft();return t?o.a.createElement(ge,{alignItems:"center"},o.a.createElement(et.Bars,{width:100,height:50,fill:"#000",stroke:"#000"})):o.a.createElement(o.a.Fragment,null,o.a.createElement(fe,null,o.a.createElement(ge,null),o.a.createElement(ge,{flex:3},o.a.createElement(De,null,"Name")),o.a.createElement(ge,{flex:2},o.a.createElement(De,null,"Category")),o.a.createElement(ge,{flex:2},o.a.createElement(De,null,"Sub-cat."))),o.a.createElement(fe,null,o.a.createElement(ge,null),o.a.createElement(ge,{flex:3},o.a.createElement(V,{type:"text",value:i,placeholder:"Search...",onChange:function(e){return s(e.target.value)}})),o.a.createElement(ge,{flex:2},o.a.createElement(z,{name:"category",value:d,onChange:function(e){return p(e.target.value)}},O.map((function(e,t){return o.a.createElement(M,{key:t,value:e},"default"===e?"all":e)})))),o.a.createElement(ge,{flex:2},o.a.createElement(z,{name:"sub-category",value:E,onChange:function(e){return x(e.target.value)}},mt(d).map((function(e,t){return o.a.createElement(M,{key:t,value:e},e||"all")}))))),v.map((function(e){return o.a.createElement(fe,{key:e._id},o.a.createElement(ge,null,o.a.createElement(bt.a,{icon:ht.d,style:j,onClick:function(){return new Audio(e.url).play()}})),o.a.createElement(ge,{flex:3},o.a.createElement(W,{selected:a&&a.url===e.url,onClick:function(){return r(e)}},e.name)),o.a.createElement(ge,{flex:2},o.a.createElement(W,{selected:a&&a.url===e.url,onClick:function(){return r(e)}},e.category)),o.a.createElement(ge,{flex:2},o.a.createElement(W,{selected:a&&a.url===e.url,onClick:function(){return r(e)}},e.subCategory)))})))},Lt=n(127),Bt=function(e){var t=e.setView,n=e.fetchData,a=Object(l.useState)(""),u=Object(g.a)(a,2),i=u[0],s=u[1],m=Object(l.useState)(""),f=Object(g.a)(m,2),d=f[0],p=f[1],b=Object(l.useState)(""),h=Object(g.a)(b,2),E=h[0],x=h[1],v=Object(l.useState)(""),j=Object(g.a)(v,2),O=j[0],y=j[1],k=Object(l.useState)(null),w=Object(g.a)(k,2),S=w[0],C=w[1],P=Object(l.useState)(""),I=Object(g.a)(P,2),T=I[0],D=I[1],N=function(){var e=Object(c.a)(r.a.mark((function e(){var a,c,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i&&d&&E){e.next=5;break}return L("Please chose a name and select categories"),e.abrupt("return");case 5:if(!(i.length<5)){e.next=9;break}L("The sound name must be at least 5 char."),e.next=12;break;case 9:if(S){e.next=12;break}return L("please select a file to upload"),e.abrupt("return");case 12:return(a=new FormData).append("sounds",S),e.next=16,nt.a.post("/api/sound/upload",a);case 16:return c=e.sent,e.next=19,nt.a.post("/api/sound",{name:i,category:d,subCategory:E,pitch:O,url:c.data.secure_url});case 19:if(!(l=e.sent).message){e.next=23;break}return L(l.message),e.abrupt("return");case 23:t("ADD"),n();case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=ft(),L=function(e){D(e),setInterval((function(){D("")}),3e3)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe,null,o.a.createElement(ge,null,"Select file:"),o.a.createElement(ge,{flex:2},o.a.createElement(V,{id:"file",name:"file",type:"file",multiple:"false",onChange:function(e){var t=e.target.files[0];C(t)}}))),o.a.createElement(fe,null,o.a.createElement(ge,null,"Name:"),o.a.createElement(ge,{flex:2},o.a.createElement(V,{type:"text",value:i,onChange:function(e){return s(e.target.value)}}))),o.a.createElement(fe,null,o.a.createElement(ge,null,"Category:"),o.a.createElement(ge,{flex:2},o.a.createElement(z,{name:"category",onChange:function(e){return p(e.target.value)}},A.map((function(e,t){return o.a.createElement(M,{key:t,value:e},"default"!==e&&e)}))))),o.a.createElement(fe,null,o.a.createElement(ge,null,"Sub-Category:"),o.a.createElement(ge,{flex:2},o.a.createElement(z,{name:"sub-category",onChange:function(e){return x(e.target.value)}},mt(d).map((function(e,t){return o.a.createElement(M,{key:t,value:e},e)}))))),o.a.createElement(fe,null,o.a.createElement(ge,null,"Pitch (optional):"),o.a.createElement(ge,{flex:2},o.a.createElement(V,{type:"text",value:O,onChange:function(e){return y(e.target.value)}}))),o.a.createElement(fe,null,o.a.createElement(ge,null),o.a.createElement(ge,{flex:2},S&&S.name)),o.a.createElement(fe,null,o.a.createElement(ge,null,T&&T)),o.a.createElement(fe,null,o.a.createElement(ge,{flex:1},o.a.createElement(Q,{onClick:N},"Create Sound"))))},Vt="ADD",Ft="UPLOAD",zt=function(e){var t=e.switchToOverview,n=e.availableSounds,a=e.selectedSound,r=e.selectSound,c=e.addSound,u=e.loading,i=e.fetchData,s=e.displayMessage,m=Object(l.useState)("#aaa"),f=Object(g.a)(m,2),d=f[0],p=f[1],b=Object(l.useState)(Vt),h=Object(g.a)(b,2),E=h[0],x=h[1];Object(l.useEffect)((function(){r(null)}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe,null,o.a.createElement(ge,null,o.a.createElement(Te,null,"Add Sound:")),o.a.createElement(ge,{flexDirection:"row",justifyContent:"flex-end"},E===Vt&&o.a.createElement(Q,{onClick:function(){x(Ft)}},"Upload own sound"),E===Ft&&o.a.createElement(Q,{onClick:function(){x(Vt)}},"Search sound"),o.a.createElement(Q,{backgroundColor:"#0f0",onClick:function(){a&&a.name&&a.url?c({name:a.name,color:d,url:a.url}):s("Please select a sound first")}},"Add"),o.a.createElement(Q,{backgroundColor:"#f00",onClick:t},"Cancel"))),o.a.createElement(fe,null,o.a.createElement(ge,{flex:2,justifyContent:"flex-start"},E===Vt&&o.a.createElement(o.a.Fragment,null,o.a.createElement(fe,null,o.a.createElement(ge,{flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},o.a.createElement("p",null,"Color:"),o.a.createElement(H,{backgroundColor:d}))),o.a.createElement(Lt.SketchPicker,{color:d,onChangeComplete:function(e){p(e.hex)}}))),o.a.createElement(ge,{flex:3},E===Ft&&o.a.createElement(Bt,{setView:x,fetchData:i}),E===Vt&&o.a.createElement(At,{loading:u,availableSounds:n,selectedSound:a,selectSound:r}))))},Mt="OVERVIEW",Ut="ADD_SOUND",Ht=function(e){var t=Object(l.useState)(""),n=Object(g.a)(t,2),a=n[0],u=n[1],i=Object(l.useState)(""),s=Object(g.a)(i,2),m=s[0],f=s[1],d=Object(l.useState)(""),b=Object(g.a)(d,2),h=b[0],E=b[1],x=Object(l.useState)(""),v=Object(g.a)(x,2),j=v[0],O=v[1],y=Object(l.useState)([{name:"default",color:"#ddd",url:""}]),k=Object(g.a)(y,2),w=k[0],S=k[1],C=Object(l.useState)(Mt),P=Object(g.a)(C,2),I=P[0],T=P[1],D=Object(l.useState)(!1),N=Object(g.a)(D,2),A=N[0],L=N[1],B=Object(l.useState)([]),V=Object(g.a)(B,2),F=V[0],z=V[1],M=Object(l.useState)(null),U=Object(g.a)(M,2),H=U[0],W=U[1],_=function(){var e=Object(c.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(Ut),e.next=3,R();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,nt.a.get("/api/sound");case 3:t=e.sent,(n=t.data)&&(z(n),L(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e){O(e),setInterval((function(){O("")}),2e3)},G=function(){u(""),f(""),E(""),S([{name:"default",color:"#ddd",url:""}])},J=function(){var t=Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a&&m&&h){t.next=3;break}return q("All fields must be filled"),t.abrupt("return");case 3:if(!(w.length<2)){t.next=6;break}return q("You must select at least 1 sound"),t.abrupt("return");case 6:return t.next=8,nt.a.post("/api/instrument",{name:a,category:m,subCategory:h,sounds:w,creator:e.user._id,private:!1});case 8:(n=t.sent).message?q(n.message):200===n.status&&(q("Success! You just created a new instrument!"),G());case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return o.a.createElement(ve,null,o.a.createElement(fe,null,j&&o.a.createElement(Fe,null,j)),I===Ut&&o.a.createElement(zt,{switchToOverview:function(){T(Mt)},availableSounds:F,selectedSound:H,selectSound:function(e){W(e)},loading:A,addSound:function(e){if(e.url,e.color){var t={name:e.name,color:e.color,url:e.url},n=[].concat(Object(p.a)(w),[t]);S(n),T(Mt)}else q("Please select or upload a sound and pick a color")},fetchData:R,displayMessage:q}),I===Mt&&o.a.createElement(o.a.Fragment,null,o.a.createElement(fe,null,o.a.createElement(ge,{flex:1},o.a.createElement(Te,null,"Create Instrument")),o.a.createElement(ge,{flex:2,flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-end"},o.a.createElement(Q,{onClick:J},"Save Instrument"),o.a.createElement(Q,{onClick:G},"Reset"),o.a.createElement(Q,{onClick:function(){}},"Help"))),o.a.createElement(fe,null,o.a.createElement(ge,{flex:2},o.a.createElement(Dt,{name:a,setName:u,category:m,setCategory:f,subCategory:h,setSubCategory:E})),o.a.createElement(ge,{flex:1})),o.a.createElement(fe,null,o.a.createElement(ge,null,o.a.createElement("h3",null,"Sounds:"))),o.a.createElement(fe,null,o.a.createElement(ge,null,o.a.createElement(Nt,{sounds:w,addSound:_})))))},Wt=function(){return o.a.createElement(ve,null,o.a.createElement(fe,null,o.a.createElement(ge,null,o.a.createElement(Te,null,"Help"))),o.a.createElement(fe,null,o.a.createElement(ge,null,o.a.createElement("p",null,'The 2 main sections of the app are "Listen", where you can browse, check and play the music loops that are created, and "Create" where you can create your own loops.'))),o.a.createElement(fe,null,o.a.createElement(ge,null,o.a.createElement(De,null,"Create song"),o.a.createElement("p",null,"In the song creation space you see the music grid which is composed of notes represented by gray squares, and a control panel at the bottom:"),o.a.createElement(fe,{alignItems:"center",justifyContent:"center"},o.a.createElement(ge,{alignItems:"center",justifyContent:"center"},o.a.createElement("img",{src:"images/music-grid-1.png",alt:"Music grid example"}))),o.a.createElement("p",null,"On the music grid, the horizontal axis is the time, the vertical is the array of instruments that are available to you. Let's first try the default instruments."),o.a.createElement("p",null,"By clicking on a square, it changes color as you activate a sound to be played at a certain time in the loop. For example if you click on the first square of the kick, a kick will be played at the beginning."),o.a.createElement(fe,{alignItems:"center",justifyContent:"center"},o.a.createElement(ge,{alignItems:"center",justifyContent:"center"},o.a.createElement("img",{src:"images/music-grid-2.png",alt:"Music grid example"}))),o.a.createElement("p",null,"Some instruments have only one sound, some have several, clicking several times on the same square switches between different sounds. Let's create a basic loop by switching on the notes (1 click) to form the following pattern:"),o.a.createElement(fe,{alignItems:"center",justifyContent:"center"},o.a.createElement(ge,{alignItems:"center",justifyContent:"center"},o.a.createElement("img",{src:"images/music-grid-3.png",alt:"Music grid example"}))),o.a.createElement("p",null,"Press play and the magic happens! The notes are read as a sequence, at a 120 tempo, 8 squares represent a second, so our loop is 1 second long."),o.a.createElement("p",null,'To make the loop longer, press the "+" button next to "bars" and the grid extends. When the grid is longer than 16 notes, it gets spread on several pages that you can check and select using the page selector:'),o.a.createElement(fe,{alignItems:"center",justifyContent:"center"},o.a.createElement(ge,{alignItems:"center",justifyContent:"center"},o.a.createElement("img",{src:"images/music-pages-selectors.png",alt:"Page selectors example"}))),o.a.createElement("p",null,'You can add and remove instruments (grid lines) using the menu. Once you are happy with your creation, click on "save" to keep it and share it. To save, you will need to create a profile, but this takes a couple of seconds. That\'s about it!'))),o.a.createElement(fe,null,o.a.createElement(ge,null,o.a.createElement(De,null,"Have fun!"))))},_t={textDecoration:"none",color:"black"},Rt={textDecoration:"none",color:"black",padding:"0 8px"},qt=function(e){return o.a.createElement(be,null,o.a.createElement(xe,{flexDirection:"row",justifyContent:"space-between"},o.a.createElement(Xe.b,{style:_t,to:"/"},o.a.createElement(Ve,null,"Boum-Tchak!")),o.a.createElement("div",{style:{display:"flex",paddingRight:20,alignItems:"center"}},o.a.createElement(Xe.b,{style:_t,to:"/listen"},o.a.createElement(Z,null,"Listen")),o.a.createElement(Xe.b,{style:_t,to:"/create"},o.a.createElement(Z,null,"Create")),e.user?o.a.createElement(Xe.b,{style:_t,to:"/profile"},o.a.createElement(Z,null,"Profile")):o.a.createElement(o.a.Fragment,null,o.a.createElement(Xe.b,{style:_t,to:"/signup"},o.a.createElement(Z,null,"Signup")),o.a.createElement(Xe.b,{style:Rt,to:"/login"},"Login")),o.a.createElement(Xe.b,{style:Rt,to:"/help"},"Help"))))},Gt=(n(322),function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:e.props.user},e.setUser=function(t){e.setState({user:t})},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement(Ee,null,o.a.createElement(qt,{user:this.state.user}),o.a.createElement(xe,null,o.a.createElement(he,null),o.a.createElement(It.d,null,o.a.createElement(It.b,{exact:!0,path:"/create",render:function(t){return o.a.createElement(dt,Object.assign({user:e.state.user},t))}}),o.a.createElement(It.b,{exact:!0,path:"/help",render:function(e){return o.a.createElement(Wt,e)}}),o.a.createElement(It.b,{exact:!0,path:"/song/:id",render:function(t){return o.a.createElement(dt,Object.assign({user:e.state.user},t))}}),o.a.createElement(It.b,{exact:!0,path:"/login",render:function(t){return e.state.user?o.a.createElement(It.a,{to:"/"}):o.a.createElement(wt,Object.assign({setUser:e.setUser},t))}}),o.a.createElement(It.b,{exact:!0,path:"/signup",render:function(t){return e.state.user?o.a.createElement(It.a,{to:"/"}):o.a.createElement(St,Object.assign({setUser:e.setUser},t))}}),o.a.createElement(Tt,{exact:!0,path:"/profile",user:this.state.user,setUser:this.setUser,component:Ct}),o.a.createElement(Tt,{exact:!0,path:"/create-instrument",user:this.state.user,setUser:this.setUser,component:Ht}),o.a.createElement(It.b,{exact:!0,path:"/",render:function(e){return o.a.createElement(jt,Object.assign({isAppIntroDisplayed:!0},e))}}),o.a.createElement(It.b,{exact:!0,path:"/listen",render:function(e){return o.a.createElement(jt,Object.assign({isAppIntroDisplayed:!1},e))}}),o.a.createElement(It.b,{exact:!0,path:"/load-song",render:function(t){return e.state.user?o.a.createElement(Ot,Object.assign({user:e.state.user},t)):o.a.createElement(It.a,{to:"/"})}}))))}}]),n}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Jt=n(128),Yt={partition:[],isPlaying:!1,musicPlaying:null,highlightedNote:[-1],animatedNotes:[],musicLines:[],tempo:120,timeoutTempo:125,isNotePlayedOnClick:!0,isAddInstrumentVisible:!1,isSaveSongVisible:!1,bottomMessage:"",isDeleteLineVisible:!1,currentPage:1,pages:[1]},Kt=Object(l.createContext)(),Qt=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Yt,e.setGlobalState=function(t){e.setState((function(e){return Object(Jt.a)({},t)}))},e.setIsSaveSongVisible=function(t){e.setState((function(e){return{isSaveSongVisible:t}}))},e.setTempo=function(t){e.setState((function(e){return{tempo:t}}))},e.setTimeoutTempo=function(t){e.setState((function(e){return{timeoutTempo:t}}))},e.stopPlaying=function(){e.setState({isPlaying:!1}),clearInterval(e.state.musicPlaying)},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props.children,t=this.state,n=this.setGlobalState,a=this.setIsSaveSongVisible,r=this.setTempo,c=this.setTimeoutTempo,l=this.stopPlaying;return o.a.createElement(Kt.Provider,{value:{setGlobalState:n,setIsSaveSongVisible:a,setTempo:r,setTimeoutTempo:c,stopPlaying:l,globalState:t}},e)}}]),n}(l.Component);(function(){var e=Object(c.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.get("/api/auth/loggedin");case 2:t=e.sent,n=t.data,i.a.render(o.a.createElement(Xe.a,null,o.a.createElement(Qt,null,o.a.createElement(Gt,{user:n}))),document.getElementById("root"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[130,1,2]]]);
//# sourceMappingURL=main.ddb7bbcd.chunk.js.map