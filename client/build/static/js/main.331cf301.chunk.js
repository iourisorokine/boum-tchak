(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{129:function(e,t,n){e.exports=n(322)},135:function(e,t,n){},321:function(e,t,n){},322:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),l=n(8),c=n(0),i=n.n(c),o=n(123),u=n.n(o),s=(n(135),n(32)),m=n(33),p=n(35),d=n(34),f=n(13),g=n(2),h=n(3);function b(){var e=Object(g.a)(["\n  padding: 3px;\n  margin: 0;\n  cursor: pointer;\n  color: ",";\n  background-color: ",";\n  &:hover {\n    background-color: black;\n    color: white;\n  }\n"]);return b=function(){return e},e}function E(){var e=Object(g.a)(["\n  height: 24px;\n  width: 24px;\n  margin: 4px;\n  border: solid black 1px;\n  background-color: ",";\n"]);return E=function(){return e},e}function v(){var e=Object(g.a)(["\n  src: ","\n  height: 260px;\n  width: 260px;\n  object-fit: cover;\n  padding: 10px;\n"]);return v=function(){return e},e}function x(){var e=Object(g.a)(["\n  font-size: 12px;\n"]);return x=function(){return e},e}function y(){var e=Object(g.a)(["\n  margin: 8px;\n  height: 26px;\n  width: ",";\n"]);return y=function(){return e},e}function O(){var e=Object(g.a)(["\n  margin: 0px 5px;\n"]);return O=function(){return e},e}function j(){var e=Object(g.a)(["\n  border: solid black 1px;\n  width: ",";\n"]);return j=function(){return e},e}function k(){var e=Object(g.a)(["\n  height: 20px;\n  width: ",";\n  margin: 10px;\n"]);return k=function(){return e},e}function w(){var e=Object(g.a)(["\n  position: relative;\n  margin: 30px 10px;\n  border: solid 1px black;\n  border-radius: 10px;\n  padding-top: 10px;\n  width: 80%;\n  &:hover "," {\n    visibility: visible;\n  }\n"]);return w=function(){return e},e}function S(){var e=Object(g.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  margin-top: -8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  visibility: hidden;\n"]);return S=function(){return e},e}function C(){var e=Object(g.a)(["\n  margin: auto;\n  min-width: 300px;\n  max-width: 700px;\n  position: absolute;\n  z-index: 10;\n  top: 150px;\n  box-shadow: 3px 3px 5px #bbb;\n  background-color: white;\n  border: solid 1px black;\n  border-radius: 3px;\n  padding: 10px;\n"]);return C=function(){return e},e}function P(){var e=Object(g.a)(["\n  font-size: 16px;\n"]);return P=function(){return e},e}function I(){var e=Object(g.a)(["\n  padding: 10px;\n"]);return I=function(){return e},e}var N=h.a.div(I()),L=h.a.span(P()),D=h.a.div(C()),T=h.a.div(S()),A=h.a.div(w(),T),V=h.a.input(k(),(function(e){return e.width||"100px"})),B=(h.a.form(j(),(function(e){return e.width?"".concat(e.width,"px"):"100%"})),h.a.label(O())),M=h.a.select(y(),(function(e){return e.width||"110px"})),F=h.a.option(x()),z=h.a.img(v(),(function(e){return e.src})),U=h.a.div(E(),(function(e){return e.backgroundColor||"white"})),H=h.a.p(b(),(function(e){return e.selected?"white":"black"}),(function(e){return e.selected?"black":"white"}));function W(){var e=Object(g.a)(["\n  color: black;\n  backgroundcolor: white;\n  padding: 6px;\n  bordercolor: black;\n  border: 1px solid black;\n  border-radius: 50%;\n  cursor: pointer;\n"]);return W=function(){return e},e}function _(){var e=Object(g.a)(["\n  line-height: 10px;\n  padding: 3px;\n  margin: 5px;\n  font-size: 25px;\n  color: red;\n  font-weight: bold;\n  cursor: pointer;\n  &:hover {\n    background-color: red;\n    color: white;\n  }\n"]);return _=function(){return e},e}function q(){var e=Object(g.a)(["\n  height: 30px;\n  min-width: 40px;\n  margin: 8px;\n  padding: 0px 10px;\n  border-radius: 15px;\n  border: solid 1px black;\n  color: ",";\n  background-color: ",";\n  font-size: 12px;\n  &:hover {\n    background-color: black;\n    color: white;\n    opacity: ",";\n  }\n"]);return q=function(){return e},e}function R(){var e=Object(g.a)(["\n  margin: 8px;\n  border: solid 2px black;\n  border-radius: 5px;\n  padding: 6px 12px;\n  color: #000;\n  text-decoration: none;\n  cursor: pointer;\n  &:hover {\n    background-color: black;\n    color: white;\n  }\n"]);return R=function(){return e},e}function G(){var e=Object(g.a)(["\n  width: 60px;\n  background-color: #f00;\n  color: #fff;\n  font-size: 20px;\n  font-weight: bold;\n"]);return G=function(){return e},e}function J(){var e=Object(g.a)(["\n  width: 60px;\n  background-color: #0f0;\n  color: #fff;\n  font-size: 20px;\n  font-weight: bold;\n"]);return J=function(){return e},e}function Y(){var e=Object(g.a)(["\n  height: 36px;\n  min-width: 36px;\n  margin: 8px;\n  padding: 0px 10px;\n  border-radius: 18px;\n  border: solid 1px black;\n  background-color: ",";\n  font-size: 16px;\n  box-shadow: 3px 3px 5px #bbb;\n  cursor: pointer;\n  &:hover {\n    background-color: black;\n    color: white;\n  }\n"]);return Y=function(){return e},e}var K=h.a.button(Y(),(function(e){return e.backgroundColor||"white"})),Q=Object(h.a)(K)(J()),$=Object(h.a)(K)(G()),X=h.a.div(R()),Z=h.a.button(q(),(function(e){return e.selected?"white":"black"}),(function(e){return e.selected?"black":"white"}),(function(e){return e.selected?.5:1})),ee=h.a.p(_());h.a.button(W());function te(){var e=Object(g.a)(["\n  height: ",";\n"]);return te=function(){return e},e}function ne(){var e=Object(g.a)(["\n  width: 90%;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flexStart;\n"]);return ne=function(){return e},e}function ae(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n  width: 100vw;\n  max-width: ",";\n"]);return ae=function(){return e},e}function re(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return re=function(){return e},e}function le(){var e=Object(g.a)(["\n  height: 110px;\n"]);return le=function(){return e},e}function ce(){var e=Object(g.a)(["\n  height: 90px;\n  width: 100vw;\n  z-index: 10;\n  background-color: white;\n  display: flex;\n  position: fixed;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 4px 4px 5px #eee;\n"]);return ce=function(){return e},e}function ie(){var e=Object(g.a)(["\n  display: flex;\n  flex-direction: ",";\n  justify-content: center;\n  min-height: 20px;\n  align-items: ",";\n  justify-content: ",";\n  flex: ",";\n"]);return ie=function(){return e},e}function oe(){var e=Object(g.a)(["\n  min-height: 60vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return oe=function(){return e},e}function ue(){var e=Object(g.a)(["\n  padding: ",";\n  cursor: pointer;\n  &:hover {\n    background-color: black;\n    color: white;\n    opacity: ",";\n  }\n"]);return ue=function(){return e},e}function se(){var e=Object(g.a)(["\n  display: flex;\n  width: 100%;\n"]);return se=function(){return e},e}var me=h.a.div(se()),pe=Object(h.a)(me)(ue(),(function(e){return e.padding||0}),(function(e){return e.selected?.5:1})),de=h.a.div(oe()),fe=h.a.div(ie(),(function(e){return e.flexDirection||"column"}),(function(e){return e.alignItems||"flex-start"}),(function(e){return e.justifyContent||"center"}),(function(e){return e.flex||1})),ge=h.a.div(ce()),he=h.a.div(le()),be=h.a.div(re()),Ee=h.a.div(ae(),(function(e){return e.flexDirection||"column"}),(function(e){return e.alignItems||"center"}),(function(e){return e.justifyContent||"flex-start"}),(function(e){return e.maxWidth||"900px"})),ve=h.a.div(ne()),xe=h.a.div(te(),(function(e){return e.height||"20px"}));function ye(){var e=Object(g.a)(["\n  color: red;\n"]);return ye=function(){return e},e}function Oe(){var e=Object(g.a)(["\n  padding: 0px 50px;\n  font-size: 56px;\n  text-shadow: 4px 4px #7799dd;\n"]);return Oe=function(){return e},e}function je(){var e=Object(g.a)(["\n  font-size: 10px;\n  line-height: 10px;\n  width: 60px;\n"]);return je=function(){return e},e}function ke(){var e=Object(g.a)(["\n  padding: 0px 10px;\n  background-color: white;\n  font-weight: ",";\n  font-size: 12px;\n"]);return ke=function(){return e},e}function we(){var e=Object(g.a)(["\n  margin-top: -32px;\n  padding: 0px 12px;\n  display: flex;\n  justify-content: space-between;\n"]);return we=function(){return e},e}function Se(){var e=Object(g.a)(["\n  padding: 10px 0;\n  margin: 0 0 4px 0;\n"]);return Se=function(){return e},e}function Ce(){var e=Object(g.a)(["\n  padding: 10px 0;\n  margin: 0 0 10px 0;\n"]);return Ce=function(){return e},e}var Pe=h.a.h2(Ce()),Ie=h.a.h3(Se()),Ne=h.a.div(we()),Le=h.a.p(ke(),(function(e){return e.b?"bold":"regular"})),De=h.a.p(je()),Te=h.a.h1(Oe()),Ae=h.a.p(ye());function Ve(){var e=Object(g.a)(["\n  height: 8px;\n  width: 8px;\n  margin: 4px;\n  border: 2px solid black;\n  background-color: ",";\n  cursor: pointer;\n"]);return Ve=function(){return e},e}function Be(){var e=Object(g.a)(["\n  height: 30px;\n  width: 30px;\n  margin: 3px;\n  box-shadow: 3px 3px 5px ",";\n  background-color: ",";\n  opacity: ",";\n  cursor: pointer;\n  &:hover {\n    height: ",";\n    width: ",";\n    margin: ",";\n  }\n  animation-name: ",";\n  animation-duration: 0.8s;\n  animation-iteration-count: 1;\n"]);return Be=function(){return e},e}function Me(){var e=Object(g.a)(["\n 0% { \n   height: 30px; \n   width: 30px;\n   margin: 3px; \n  }\n  20% { \n   height: 24px; \n   width: 24px;\n   margin: 6px; \n    }\n 30% { \n   height: 32px; \n    width: 32px;  \n    margin: 2px;\n}\n 100% { \n   height: 30px; \n   width: 30px;\n   margin: 3px; \n }\n"]);return Me=function(){return e},e}function Fe(){var e=Object(g.a)(["\n  margin: 0;\n  display: flex;\n"]);return Fe=function(){return e},e}function ze(){var e=Object(g.a)(["\n  margin: 10px 20px;\n  padding-bottom: 10px;\n"]);return ze=function(){return e},e}var Ue=h.a.div(ze()),He=h.a.div(Fe()),We=Object(h.b)(Me()),_e=h.a.div(Be(),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.highlighted?.7:1}),(function(e){return e.clickable?"24px":"30px"}),(function(e){return e.clickable?"24px":"30px"}),(function(e){return e.clickable?"6px":"3px"}),(function(e){return e.animated&&We})),qe=h.a.div(Ve(),(function(e){return e.selected?"black":"white"})),Re=function(e){var t=e.notePosition,n=e.status,a=e.colors,r=e.toggleActiveNote,l=e.linePosition,c=e.sounds,o=e.highlighted,u=e.animated,s=a[n];return i.a.createElement(_e,{color:s,highlighted:o,onClick:function(){r(t,l,c)},clickable:!0,animated:u})},Ge=function(e){var t=e.linePosition,n=e.notes,a=e.noteColors,r=e.toggleActiveNote,l=e.sounds,c=e.highlightedNote,o=e.label,u=e.isDeleteLineVisible,s=e.animatedNotes,m=e.deleteLine,p=e.currentPage,d=e.lenghtOfPage,f=(p-1)*d,g=p*d,h=n.map((function(e,n){return n>=f&&n<g?i.a.createElement(Re,{key:n,status:e,notePosition:n,colors:a,toggleActiveNote:r,linePosition:t,sounds:l,highlighted:c===n,animated:s.includes(n)}):null}));return i.a.createElement(He,null,i.a.createElement(De,null,o&&o),u&&i.a.createElement(ee,{onClick:function(){return m(t)}},"x"),h)},Je=function(e){var t=e.currentPage,n=e.selectPage,a=e.pages,r=e.clickable,l=void 0===r||r;return a.length<2?null:i.a.createElement(me,null,i.a.createElement(fe,{flex:2}),i.a.createElement(fe,null,i.a.createElement(me,null,a.map((function(e,a){return i.a.createElement(qe,{key:a,selected:t===a+1,onClick:l?function(){return n(a+1)}:null})})))))},Ye=function(e){var t=e.onPlayBtnPress,n=e.onStopBtnPress,a=e.isPlaying,r=e.addOneBar,l=e.removeOneBar,c=e.isNotePlayedOnClick,o=e.setIsNotePlayedOnClick,u=e.tempo,s=e.setTempo,m=e.setTimeoutTempo,p=e.numberOfBars;return i.a.createElement(N,null,a?i.a.createElement($,{onClick:n},"[]"):i.a.createElement(Q,{onClick:t},">"),i.a.createElement(K,{onClick:function(){o(!c)}},"Play on click: ",c?"yes":"no"),i.a.createElement(K,{onClick:l},"-"),i.a.createElement(L,null,"Bars: ",p),i.a.createElement(K,{onClick:r},"+"),i.a.createElement(K,{onClick:function(){s(u-5),m(6e4/u/4)}},"-"),i.a.createElement(L,null,"Tempo: ",u),i.a.createElement(K,{onClick:function(){s(u+5),m(6e4/u/4)}},"+"))},Ke=n(7),Qe=function(e){var t=e.toggleIsAddInstrumentVisible,n=e.toggleIsSaveSongVisible,a=e.toggleIsDeleteLineVisible,r=e.user;return i.a.createElement(N,null,i.a.createElement(K,{onClick:n},"Save Song"),r&&i.a.createElement(Ke.b,{to:"/load-song"},i.a.createElement(K,null,"Load Song")),i.a.createElement(K,{onClick:t},"Add Instrument"),i.a.createElement(K,{onClick:a},"Remove Instrument"))},$e=n(1),Xe=n(27),Ze=n(10),et=n.n(Ze),tt=function(e){var t=e.addInstrument,n=e.toggleIsAddInstrumentVisible,a=Object(c.useState)([]),o=Object($e.a)(a,2),u=o[0],s=o[1],m=Object(c.useState)(null),p=Object($e.a)(m,2),d=p[0],f=p[1],g=Object(c.useState)(!1),h=Object($e.a)(g,2),b=h[0],E=h[1],v=function(){var e=Object(l.a)(r.a.mark((function e(t){var n,a,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t&&{params:{category:t}},e.next=3,et.a.get("/api/instrument",n);case 3:a=e.sent,(l=a.data)&&s(l),E(!1);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){E(!0),v()}),[]);return i.a.createElement(D,null,i.a.createElement(me,null,i.a.createElement(fe,{flexDirection:"row"},["Drums","Bass","Synth","Guitar"].map((function(e){if("default"!==e)return i.a.createElement(Z,{key:e,selected:d===e,onClick:function(){return function(e){v(e),f(e)}(e)}},e)})))),i.a.createElement(me,null,i.a.createElement(fe,null,b&&i.a.createElement(Xe.Bars,{width:100,height:50,fill:"#000",stroke:"#000"}),u.map((function(e){return i.a.createElement(pe,{key:e.name,padding:"4px",onClick:function(){return t(e),void n()}},i.a.createElement(fe,null,e.name),i.a.createElement(fe,null,e.category),i.a.createElement(fe,null,e.subCategory))})))))},nt=function(e){var t=e.saveTheSong,n=e.user,a=e.toggleIsSaveSongVisible,r=Object(c.useState)(""),l=Object($e.a)(r,2),o=l[0],u=l[1];return i.a.createElement(D,null,n?i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{style:{margin:10}},"Name your song (if you modified an existing song, ",i.a.createElement("br",null),"it will still be saved under as new one):"),i.a.createElement(V,{type:"text",placeholder:"Padapoum",value:o,onChange:function(e){u(e.target.value)}}),i.a.createElement("div",null,i.a.createElement(K,{onClick:function(){return t(o)}},"Save"),i.a.createElement(K,{onClick:function(){return a()}},"Cancel"))):i.a.createElement(i.a.Fragment,null,i.a.createElement("p",{style:{margin:10}},"To save a song, you need to have a profile, but let's do it! ",i.a.createElement("br",null),"Please login or signup:"),i.a.createElement("div",null,i.a.createElement(Ke.b,{to:"/signup"},i.a.createElement(K,null,"Signup")),i.a.createElement(Ke.b,{to:"/login"},i.a.createElement(K,null,"Login")))))},at=function(e,t){var n=[];return e.forEach((function(e){for(var a=[],r=1;r<=t;r++)a.push(0);n.push(a)})),n},rt=function(e){return e.map((function(e){var t=[],n=[];return e.sounds.forEach((function(e){e.url?t.push(new Audio(e.url)):t.push(null),n.push(e.color)})),{id:e._id,label:e.name,colors:n,sounds:t}}))},lt=function(e){var t=[],n=[];return e.sounds.forEach((function(e){e.url?t.push(new Audio(e.url)):t.push(null),n.push(e.color)})),{id:e._id,label:e.name,colors:n,sounds:t}},ct=function(e,t,n){t.forEach((function(t,a){if(t[n]){var r=t[n];e[a].sounds.forEach((function(e){e&&(e.pause(),e.currentTime=0)})),e[a].sounds[r].play()}}))},it=["default","Drums","Bass","Synth","Guitar","Piano","Brass","Strings","Flute","Effects","Voice","Other"],ot={"":[""],default:[""],Drums:["","Kick","Snare","Tom","Hi-hat","Cymbal","Vinnyl","Percussion","Clang","Other"],Bass:["","Acoustic","Fretless","Electric","Picked","Synth","Slap"],Synth:["","Piano","Ambiant","Lead","Pad","Effect","Electronic"],Guitar:["","Acoustic","Clean","Overdrive","Distorsion","Muted","Jazz","Fuzz","Wah","Funk"],Piano:["","Grand","Acoustic","Clavesin"],Brass:["","Horn","Trumpet","Tuba","Trombone"],Strings:["","Violin","Cello","Double Bass","Harp","Mixed-strings"],Flute:["","Flute","Clarinet","Pipeau","Peruvian","Bass","Recorder"],Effects:["","Scratch","Noise","Clang","Electronic","Mystic"],Voice:["","Hi-sing","Mid-sing","Low-sing","Talk","Noize"],Other:[""]},ut=function(e){return ot[e]},st=function(){return it},mt=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,c=new Array(a),i=0;i<a;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={partition:[],isPlaying:!1,musicPlaying:null,highlightedNote:[-1],animatedNotes:[],musicLines:[],tempo:120,timeoutTempo:125,isNotePlayedOnClick:!0,isAddInstrumentVisible:!1,isSaveSongVisible:!1,bottomMessage:"",isDeleteLineVisible:!1,currentPage:1,pages:[1]},e.addInstrument=function(t){for(var n=e.state.partition[0]?e.state.partition[0].length:8,a=[],r=1;r<=n;r++)a.push(0);var l=Object(f.a)(e.state.partition),c=Object(f.a)(e.state.musicLines),i=lt(t);c.push(i),l.push(a),e.setState({musicLines:c,partition:l})},e.toggleActiveNote=function(t,n,a){var r=Object(f.a)(e.state.partition),l=a.length,c=(r[n][t]+1)%l;r[n][t]=c,a[c]&&e.state.isNotePlayedOnClick&&a[c].play(),e.setState({partition:r})},e.playMusic=function(t,n,a){e.setState({isPlaying:!0,currentPage:1});var r=0;e.setState({musicPlaying:setInterval((function(){e.setState({highlightedNote:r,animatedNotes:[r-1,r,r+1]}),ct(t,n,r),++r>=n[0].length&&(r=0),(r>16*e.state.currentPage||0===r)&&e.nextPage()}),a)})},e.stopPlaying=function(){e.setState({isPlaying:!1}),clearInterval(e.state.musicPlaying)},e.onStopBtnPress=function(){e.stopPlaying()},e.onPlayBtnPress=function(){e.playMusic(e.state.musicLines,e.state.partition,e.state.timeoutTempo)},e.saveTheSong=function(){var t=Object(l.a)(r.a.mark((function t(n){var a,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.musicLines.map((function(e){return e.id})),l={title:n,partition:e.state.partition,tempo:e.state.tempo,instruments:a,creator:e.props.user._id||"anonymous",creatorName:e.props.user.username||"anonymous",posted:!0},t.next=4,et.a.post("api/song/",l);case 4:e.setState({isSaveSongVisible:!1,bottomMessage:'New song "'.concat(n,'" successfully saved!')}),setTimeout((function(){e.setState({bottomMessage:""})}),1500);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addOneBar=function(){if(e.state.partition.length&&e.state.partition[0].length<64){var t=Object(f.a)(e.state.partition);t.forEach((function(e){e.push(0)}));var n=e.state.pages.length<Math.ceil(t[0].length/16)?e.state.pages.concat([1]):e.state.pages;e.setState({partition:t,pages:n})}},e.removeOneBar=function(){var t=Object(f.a)(e.state.partition),n=t[0].length-1;t.forEach((function(e){e.splice(n,1)}));var a=e.state.pages.length,r=a>Math.ceil(t[0].length/16)?e.state.pages.slice(0,a-1):e.state.pages;e.setState({partition:t,pages:r})},e.deleteLine=function(t){var n=Object(f.a)(e.state.partition),a=Object(f.a)(e.state.musicLines);n.splice(t,1),a.splice(t,1),e.setState({partition:n,musicLines:a}),e.toggleIsDeleteLineVisible()},e.selectPage=function(t){e.setState({currentPage:t})},e.nextPage=function(){var t=e.state.currentPage>=e.state.pages.length?1:e.state.currentPage+1;e.setState({currentPage:t})},e.setIsNotePlayedOnClick=function(t){e.setState({isNotePlayedOnClick:t})},e.setTempo=function(t){e.setState({tempo:t})},e.setTimeoutTempo=function(t){e.setState({timeoutTempo:t})},e.toggleIsAddInstrumentVisible=function(){e.setState({isAddInstrumentVisible:!e.state.isAddInstrumentVisible})},e.toggleIsSaveSongVisible=function(){e.setState({isSaveSongVisible:!e.state.isSaveSongVisible})},e.toggleIsDeleteLineVisible=function(){e.setState({isDeleteLineVisible:!e.state.isDeleteLineVisible})},e}return Object(m.a)(n,[{key:"componentWillUnmount",value:function(){this.stopPlaying()}},{key:"componentDidMount",value:function(){var e,t,n,a=this,c=function(){var e=Object(l.a)(r.a.mark((function e(){var t,n,l,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.a.get("/api/instrument/starter");case 2:t=e.sent,n=t.data,l=rt(n),c=at(l,8),a.setState({musicLines:l,partition:c});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=Object(l.a)(r.a.mark((function e(){var t,n,l,c,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params.id,e.next=3,et.a.get("/api/song/".concat(t));case 3:n=e.sent,l=n.data,c=Object(f.a)(l.instruments),i=rt(c),a.setState({musicLines:i,partition:l.partition,tempo:l.tempo,timeoutTempo:6e4/l.tempo/4});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(null===(e=this.props)||void 0===e||null===(t=e.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id)?i():c()}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,this.state.isAddInstrumentVisible&&i.a.createElement(tt,{addInstrument:this.addInstrument,toggleIsAddInstrumentVisible:this.toggleIsAddInstrumentVisible}),this.state.isSaveSongVisible&&i.a.createElement(nt,{saveTheSong:this.saveTheSong,toggleIsSaveSongVisible:this.toggleIsSaveSongVisible,user:this.props.user}),this.state.bottomMessage&&i.a.createElement(D,null,i.a.createElement("p",null,this.state.bottomMessage)),i.a.createElement(Je,{pages:this.state.pages,selectPage:this.selectPage,currentPage:this.state.currentPage}),i.a.createElement("div",{style:{minHeight:300,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"}},!this.state.musicLines.length&&i.a.createElement("p",null,'No partition to display yet... Click on "Add Lines" to start composing.'),i.a.createElement(Ue,null,this.state.musicLines&&this.state.musicLines.map((function(t,n){return i.a.createElement(Ge,{key:n,linePosition:n,label:t.label,notes:e.state.partition[n],noteColors:t.colors,toggleActiveNote:e.toggleActiveNote,sounds:t.sounds,highlightedNote:e.state.highlightedNote,animatedNotes:e.state.animatedNotes,isDeleteLineVisible:e.state.isDeleteLineVisible,deleteLine:e.deleteLine,currentPage:e.state.currentPage,lenghtOfPage:16})})))),i.a.createElement(Ye,{onPlayBtnPress:this.onPlayBtnPress,onStopBtnPress:this.onStopBtnPress,addOneBar:this.addOneBar,removeOneBar:this.removeOneBar,isPlaying:this.state.isPlaying,tempo:this.state.tempo,setTempo:this.setTempo,setTimeoutTempo:this.setTimeoutTempo,numberOfBars:this.state.partition[0]?this.state.partition[0].length:0,isNotePlayedOnClick:this.state.isNotePlayedOnClick,setIsNotePlayedOnClick:this.setIsNotePlayedOnClick}),i.a.createElement(Qe,{toggleIsAddInstrumentVisible:this.toggleIsAddInstrumentVisible,toggleIsSaveSongVisible:this.toggleIsSaveSongVisible,toggleIsDeleteLineVisible:this.toggleIsDeleteLineVisible,user:this.props.user}))}}]),n}(i.a.Component),pt=function(e){var t=e.status,n=e.colors,a=e.highlighted,r=e.isAnimated,l=n[t];return i.a.createElement(_e,{color:l,highlighted:a,animated:r})},dt=function(e){var t=e.notes,n=e.noteColors,a=e.highlightedNote,r=e.animatedNotes,l=e.lengthOfPage,c=e.currentPage,o=(c-1)*l,u=c*l,s=t.map((function(e,t){if(t>=o&&t<u)return i.a.createElement(pt,{key:t,status:e,colors:n,highlighted:a===t,isAnimated:r.includes(t)})}));return i.a.createElement(He,null,s)},ft=n(25),gt=n(24),ht={width:40,height:40,padding:"10px 30px",border:"solid 1px rgba(0, 0, 0, 0.6)",color:"rgba(0, 0, 0, 0.7)",backgroundColor:"rgba(250, 250, 250, 0.5)",borderRadius:5,zIndex:5},bt=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isPlaying:!1,musicPlaying:null,highlightedNote:-1,animatedNotes:[-1,-1,-1],timeoutTempo:6e4/e.props.tempo/4,currentPage:1,pages:[1]},e.playMusic=function(t,n,a){e.setState({isPlaying:!0,currentPage:1});var r=0;e.setState({musicPlaying:setInterval((function(){e.setState({highlightedNote:r,animatedNotes:[r-1,r,r+1]}),ct(t,n,r),++r>=n[0].length&&(r=0),(r>16*e.state.currentPage||0===r)&&e.nextPage()}),a)})},e.stopPlaying=function(){e.setState({isPlaying:!1}),clearInterval(e.state.musicPlaying)},e.nextPage=function(){var t=e.state.currentPage>=e.state.pages.length?1:e.state.currentPage+1;e.setState({currentPage:t})},e.onSongClick=function(){e.state.isPlaying?e.stopPlaying():e.playMusic(e.props.musicLines,e.props.partition,e.state.timeoutTempo)},e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){for(var e=[],t=Math.ceil(this.props.partition[0].length/16),n=1;n<=t;n++)e.push(1);this.setState({pages:e})}},{key:"componentWillUnmount",value:function(){this.stopPlaying()}},{key:"render",value:function(){var e=this;return i.a.createElement(A,null,i.a.createElement(T,{onClick:this.onSongClick},this.state.isPlaying?i.a.createElement(ft.a,{icon:gt.c,color:"black",style:ht}):i.a.createElement(ft.a,{icon:gt.b,color:"black",style:ht})),i.a.createElement(Ne,null,i.a.createElement(Le,{b:!0},this.props.title),i.a.createElement(Le,null,"by ",this.props.creatorName)),i.a.createElement(me,null,i.a.createElement(Je,{pages:this.state.pages,selectPage:this.selectPage,currentPage:this.state.currentPage,clickable:!1})),i.a.createElement(Ue,null,this.props.musicLines.map((function(t,n){return i.a.createElement(dt,{key:n,linePosition:n,notes:e.props.partition[n],noteColors:t.colors,sounds:t.sounds,lengthOfPage:16,currentPage:e.state.currentPage,highlightedNote:e.state.highlightedNote,animatedNotes:e.state.animatedNotes})}))))}}]),n}(i.a.Component),Et=function(){var e={padding:4,paddingTop:32,width:40,height:40};return i.a.createElement(de,null,i.a.createElement(me,null,i.a.createElement(fe,{justifyContent:"center",alignItems:"center"},i.a.createElement(Pe,null,"Welcome to Boom-Tchak!"))),i.a.createElement(me,null,i.a.createElement(fe,{justifyContent:"center",alignItems:"center"},i.a.createElement("p",{style:{margin:0,padding:8}},"The app to discover and create nice music loops."),i.a.createElement("p",{style:{margin:0,padding:0}},"Want to start creating music? It's here >>"," ",i.a.createElement(Ke.b,{to:"/create"},i.a.createElement(K,null,"Create"))),i.a.createElement("p",{style:{margin:0,padding:0}},"Need help? This way >>"," ",i.a.createElement(Ke.b,{to:"/help"},i.a.createElement(K,null,"Help"))),i.a.createElement("p",{style:{margin:0,padding:8}},"To check out some nice music loops, scroll down and click on the songs"))),i.a.createElement(me,null,i.a.createElement(fe,{flexDirection:"row",justifyContent:"center",alignItems:"center"},i.a.createElement(ft.a,{icon:gt.a,style:e,color:"black"}),i.a.createElement(ft.a,{icon:gt.a,style:e,color:"black"}),i.a.createElement(ft.a,{icon:gt.a,style:e,color:"black"}))))},vt=function(e){var t=e.isAppIntroDisplayed,n=void 0!==t&&t,a=Object(c.useState)([]),o=Object($e.a)(a,2),u=o[0],s=o[1],m=Object(c.useState)(!1),p=Object($e.a)(m,2),d=p[0],g=p[1],h=Object(c.useState)(1),b=Object($e.a)(h,2),E=b[0],v=b[1],x=Object(c.useState)(""),y=Object($e.a)(x,2),O=y[0],j=y[1],k=function(){var e=Object(l.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.next=3,et.a.get("/api/song/posted/".concat(E),{page:1});case 3:if(t=e.sent,(n=t.data).length){e.next=10;break}return j("no more songs to load..."),g(!1),setTimeout((function(){j("")}),2e3),e.abrupt("return");case 10:n.forEach((function(e){var t=rt(e.instruments);e.instruments=t})),s([].concat(Object(f.a)(u),Object(f.a)(n))),g(!1),v(E+1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){k()}),[]);return i.a.createElement(i.a.Fragment,null,n&&i.a.createElement(Et,null),u.map((function(e){return i.a.createElement(bt,{key:e._id,title:e.title,partition:e.partition,musicLines:e.instruments,tempo:e.tempo,creatorName:e.creatorName})})),d?i.a.createElement(Xe.Bars,{width:100,height:50,fill:"#000",stroke:"#000"}):O?i.a.createElement("p",null,O):i.a.createElement("p",{onClick:function(){k()}},"loadMore"),i.a.createElement(xe,{height:"100px"}))},xt=function(e){var t=Object(c.useState)([]),n=Object($e.a)(t,2),a=n[0],o=n[1],u=Object(c.useState)(!1),s=Object($e.a)(u,2),m=s[0],p=s[1],d=Object(c.useState)(null),f=Object($e.a)(d,2),g=f[0],h=f[1],b=Object(c.useState)(""),E=Object($e.a)(b,2),v=E[0],x=E[1],y=function(){var t=Object(l.a)(r.a.mark((function t(){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return p(!0),t.next=3,et.a.get("/api/song/creator/".concat(e.user._id));case 3:n=t.sent,(a=n.data)&&(o(a),p(!1));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(c.useEffect)((function(){y()}),[]);var O=function(){var e=Object(l.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.a.delete("/api/song/".concat(t));case 2:n=e.sent,x(n.message),y(),setTimeout((function(){x("")}),1500);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement(ve,null,i.a.createElement(Pe,null,"Load Song"),m&&i.a.createElement(fe,{alignItems:"center"},i.a.createElement(Xe.Bars,{width:100,height:50,fill:"#000",stroke:"#000"})),a.map((function(e){return i.a.createElement(H,{key:e._id,selected:g===e._id,onClick:function(){h(e._id)}},e.title)})),i.a.createElement("div",null,v&&i.a.createElement("p",null,v)),g&&i.a.createElement("div",{style:{paddingTop:20}},i.a.createElement(Ke.b,{to:"song/".concat(g)},i.a.createElement(K,null,"Load")),i.a.createElement(K,{onClick:function(){return O(g)}},"Delete"),i.a.createElement(Ke.b,{to:"/"},i.a.createElement(K,null,"Cancel"))))},yt=function(e,t){return et.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},Ot=function(e,t){return et.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},jt=function(e){var t=Object(c.useState)(""),n=Object($e.a)(t,2),a=n[0],o=n[1],u=Object(c.useState)(""),s=Object($e.a)(u,2),m=s[0],p=s[1],d=Object(c.useState)(""),f=Object($e.a)(d,2),g=f[0],h=f[1],b=function(){var t=Object(l.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ot(a,m);case 2:(n=t.sent).message?h(n.message):(e.setUser(n),e.history.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),E=function(e){"username"===e.target.name&&o(e.target.value),"password"===e.target.name&&p(e.target.value)};return i.a.createElement(ve,null,i.a.createElement(me,null,i.a.createElement(fe,null),i.a.createElement(fe,{flex:1},i.a.createElement(Pe,null,"Login"),i.a.createElement(me,null,i.a.createElement(fe,null,i.a.createElement(B,{htmlFor:"username"},"Username:")),i.a.createElement(fe,{flex:2},i.a.createElement(V,{type:"text",name:"username",width:"100%",id:"username",value:a,onChange:E}))),i.a.createElement(me,null,i.a.createElement(fe,{flex:1},i.a.createElement(B,{htmlFor:"password"},"Password:")),i.a.createElement(fe,{flex:2},i.a.createElement(V,{type:"password",name:"password",width:"100%",id:"password",value:m,onChange:E}))),i.a.createElement(xe,null),i.a.createElement(me,null,i.a.createElement(fe,{alignItems:"center"},g&&i.a.createElement(Ae,null,g),i.a.createElement(K,{onClick:b},"Login"),i.a.createElement("p",null,"No profile yet?"),i.a.createElement(Ke.b,{to:"/signup",style:{textDecoration:"none",color:"black"}},"signup")))),i.a.createElement(fe,null)))},kt=function(e){var t=Object(c.useState)(""),n=Object($e.a)(t,2),a=n[0],o=n[1],u=Object(c.useState)(""),s=Object($e.a)(u,2),m=s[0],p=s[1],d=Object(c.useState)(""),f=Object($e.a)(d,2),g=f[0],h=f[1],b=function(){var t=Object(l.a)(r.a.mark((function t(n){var l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yt(a,m);case 2:(l=t.sent).message?h(l.message):(e.setUser(l),e.history.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(e){"username"===e.target.name&&o(e.target.value),"password"===e.target.name&&p(e.target.value)};return i.a.createElement(ve,null,i.a.createElement(me,null,i.a.createElement(fe,null),i.a.createElement(fe,{flex:1},i.a.createElement(Pe,null,"Signup"),i.a.createElement(me,null,i.a.createElement(fe,null,i.a.createElement(B,{htmlFor:"username"},"Username:")),i.a.createElement(fe,{flex:2},i.a.createElement(V,{type:"text",name:"username",width:"100%",id:"username",value:a,onChange:E}))),i.a.createElement(me,null,i.a.createElement(fe,{flex:1},i.a.createElement(B,{htmlFor:"password"},"Password:")),i.a.createElement(fe,{flex:2},i.a.createElement(V,{type:"password",name:"password",width:"100%",id:"password",value:m,onChange:E}))),i.a.createElement(xe,null),i.a.createElement(me,null,i.a.createElement(fe,{alignItems:"center"},g&&i.a.createElement(Ae,null,g),i.a.createElement(K,{onClick:b},"Submit"),i.a.createElement("p",null,"Already have a profile?"),i.a.createElement(Ke.b,{to:"/login",style:{textDecoration:"none",color:"black"}},"login")))),i.a.createElement(fe,null)))},wt=function(e){var t=Object(c.useState)(""),n=Object($e.a)(t,2),a=n[0],o=n[1],u=function(){var t=Object(l.a)(r.a.mark((function t(){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,et.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data}));case 2:e.setUser(null),e.history.push("/");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return e.user?i.a.createElement(ve,null,i.a.createElement(me,null,i.a.createElement(fe,null,i.a.createElement(Pe,null,"Profile"))),i.a.createElement(me,null,i.a.createElement(fe,{flex:2},i.a.createElement(z,{src:"https://images.unsplash.com/photo-1502377429547-835a416e4a90?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=667&q=80"})),i.a.createElement(fe,{justifyContent:"flex-start",flex:3},i.a.createElement("h3",null,"Hello, ",e.user.username),i.a.createElement("p",null,"Are you ready to create some funky beats today?"),i.a.createElement(me,null,i.a.createElement(Ke.b,{to:"/load-song"},i.a.createElement(K,null,"Load Song")),i.a.createElement(K,{onClick:function(){e.user&&!0===e.user.admin?e.history.push("/create-instrument"):(o("Coming soon, stay tuned..."),setInterval((function(){o("")}),2e3))}},"Create Instrument"),i.a.createElement(K,{onClick:u},"Logout")),i.a.createElement(me,null,i.a.createElement(fe,null,a&&i.a.createElement("p",null,a)))))):i.a.createElement(ve,null,i.a.createElement(Pe,null,"No Profile..."),i.a.createElement(me,null,i.a.createElement(fe,null,"Please login or signup to access the profile page")))},St=n(128),Ct=n(11),Pt=function(e){var t=e.component,n=e.user,a=Object(St.a)(e,["component","user"]);return i.a.createElement(Ct.b,Object.assign({user:n},a,{render:function(e){return n?i.a.createElement(t,Object.assign({user:n},a,e)):i.a.createElement(Ct.a,{to:"/"})}}))},It=function(e){var t=e.name,n=e.setName,a=e.category,r=e.setCategory,l=e.subCategory,c=e.setSubCategory,o=st();return i.a.createElement(i.a.Fragment,null,i.a.createElement(me,null,i.a.createElement(fe,{flex:1},"Name:"),i.a.createElement(fe,{justifyContent:"flex-start",flex:2},i.a.createElement(V,{type:"text",value:t,onChange:function(e){return n(e.target.value)}}))),i.a.createElement(me,null,i.a.createElement(fe,{flex:1},"Category:"),i.a.createElement(fe,{justifyContent:"flex-start",flex:2},i.a.createElement(M,{name:"category",value:a,onChange:function(e){return r(e.target.value)}},o.map((function(e,t){return i.a.createElement(F,{key:t,value:e},"default"!==e&&e)}))))),i.a.createElement(me,null,i.a.createElement(fe,{flex:1},"Sub-category:"),i.a.createElement(fe,{justifyContent:"flex-start",flex:2},i.a.createElement(M,{name:"sub-category",value:l,onChange:function(e){return c(e.target.value)}},ut(a).map((function(e,t){return i.a.createElement(F,{key:t,value:e},e)}))))))},Nt=function(e){var t=e.sounds,n=e.addSound;return i.a.createElement(i.a.Fragment,null,t&&t.map((function(e,t){return i.a.createElement(me,{key:t},i.a.createElement(fe,null,i.a.createElement("p",{style:{margin:0,padding:"5px 0"}},0===t?"Default":"".concat(t))),i.a.createElement(fe,null,i.a.createElement(U,{backgroundColor:e.color})),i.a.createElement(fe,{flex:5},e.url?i.a.createElement(K,{onClick:function(){return t=e.url,void new Audio(t).play();var t}},e.name):i.a.createElement("p",{style:{margin:0,padding:"5px 18px"}},"No sound")))})),i.a.createElement(me,null,i.a.createElement(fe,{flex:2}),i.a.createElement(fe,{justifyContent:"flex-start",flex:5},i.a.createElement(K,{backgroundColor:"#0f0",onClick:n},"Add Sound"))))},Lt=function(e){var t=e.loading,n=e.availableSounds,a=e.selectedSound,r=e.selectSound,l=Object(c.useState)(""),o=Object($e.a)(l,2),u=o[0],s=o[1],m=Object(c.useState)("default"),p=Object($e.a)(m,2),d=p[0],f=p[1],g=Object(c.useState)(""),h=Object($e.a)(g,2),b=h[0],E=h[1],v=n.filter((function(e){return(!u||e.name.toLocaleLowerCase().includes(u.toLocaleLowerCase()))&&("default"===d||d===e.category)&&(!b||b===e.subCategory)})),x={margin:2,color:"black",backgroundColor:"white",padding:6,borderColor:"black",borderWidth:1,borderStyle:"solid",borderRadius:"50%",cursor:"pointer"},y=st();return t?i.a.createElement(fe,{alignItems:"center"},i.a.createElement(Xe.Bars,{width:100,height:50,fill:"#000",stroke:"#000"})):i.a.createElement(i.a.Fragment,null,i.a.createElement(me,null,i.a.createElement(fe,null),i.a.createElement(fe,{flex:3},i.a.createElement(Ie,null,"Name")),i.a.createElement(fe,{flex:2},i.a.createElement(Ie,null,"Category")),i.a.createElement(fe,{flex:2},i.a.createElement(Ie,null,"Sub-cat."))),i.a.createElement(me,null,i.a.createElement(fe,null),i.a.createElement(fe,{flex:3},i.a.createElement(V,{type:"text",value:u,placeholder:"Search...",onChange:function(e){return s(e.target.value)}})),i.a.createElement(fe,{flex:2},i.a.createElement(M,{name:"category",value:d,onChange:function(e){return f(e.target.value)}},y.map((function(e,t){return i.a.createElement(F,{key:t,value:e},"default"===e?"all":e)})))),i.a.createElement(fe,{flex:2},i.a.createElement(M,{name:"sub-category",value:b,onChange:function(e){return E(e.target.value)}},ut(d).map((function(e,t){return i.a.createElement(F,{key:t,value:e},e||"all")}))))),v.map((function(e){return i.a.createElement(me,{key:e._id},i.a.createElement(fe,null,i.a.createElement(ft.a,{icon:gt.d,style:x,onClick:function(){return new Audio(e.url).play()}})),i.a.createElement(fe,{flex:3},i.a.createElement(H,{selected:a&&a.url===e.url,onClick:function(){return r(e)}},e.name)),i.a.createElement(fe,{flex:2},i.a.createElement(H,{selected:a&&a.url===e.url,onClick:function(){return r(e)}},e.category)),i.a.createElement(fe,{flex:2},i.a.createElement(H,{selected:a&&a.url===e.url,onClick:function(){return r(e)}},e.subCategory)))})))},Dt=n(127),Tt=function(e){var t=e.setView,n=e.fetchData,a=Object(c.useState)(""),o=Object($e.a)(a,2),u=o[0],s=o[1],m=Object(c.useState)(""),p=Object($e.a)(m,2),d=p[0],f=p[1],g=Object(c.useState)(""),h=Object($e.a)(g,2),b=h[0],E=h[1],v=Object(c.useState)(""),x=Object($e.a)(v,2),y=x[0],O=x[1],j=Object(c.useState)(null),k=Object($e.a)(j,2),w=k[0],S=k[1],C=Object(c.useState)(""),P=Object($e.a)(C,2),I=P[0],N=P[1],L=function(){var e=Object(l.a)(r.a.mark((function e(){var a,l,c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u&&d&&b){e.next=5;break}return T("Please chose a name and select categories"),e.abrupt("return");case 5:if(!(u.length<5)){e.next=9;break}T("The sound name must be at least 5 char."),e.next=12;break;case 9:if(w){e.next=12;break}return T("please select a file to upload"),e.abrupt("return");case 12:return(a=new FormData).append("sounds",w),e.next=16,et.a.post("/api/sound/upload",a);case 16:return l=e.sent,e.next=19,et.a.post("/api/sound",{name:u,category:d,subCategory:b,pitch:y,url:l.data.secure_url});case 19:if(!(c=e.sent).message){e.next=23;break}return T(c.message),e.abrupt("return");case 23:t("ADD"),n();case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=st(),T=function(e){N(e),setInterval((function(){N("")}),3e3)};return i.a.createElement(i.a.Fragment,null,i.a.createElement(me,null,i.a.createElement(fe,null,"Select file:"),i.a.createElement(fe,{flex:2},i.a.createElement(V,{id:"file",name:"file",type:"file",multiple:"false",onChange:function(e){var t=e.target.files[0];S(t)}}))),i.a.createElement(me,null,i.a.createElement(fe,null,"Name:"),i.a.createElement(fe,{flex:2},i.a.createElement(V,{type:"text",value:u,onChange:function(e){return s(e.target.value)}}))),i.a.createElement(me,null,i.a.createElement(fe,null,"Category:"),i.a.createElement(fe,{flex:2},i.a.createElement(M,{name:"category",onChange:function(e){return f(e.target.value)}},D.map((function(e,t){return i.a.createElement(F,{key:t,value:e},"default"!==e&&e)}))))),i.a.createElement(me,null,i.a.createElement(fe,null,"Sub-Category:"),i.a.createElement(fe,{flex:2},i.a.createElement(M,{name:"sub-category",onChange:function(e){return E(e.target.value)}},ut(d).map((function(e,t){return i.a.createElement(F,{key:t,value:e},e)}))))),i.a.createElement(me,null,i.a.createElement(fe,null,"Pitch (optional):"),i.a.createElement(fe,{flex:2},i.a.createElement(V,{type:"text",value:y,onChange:function(e){return O(e.target.value)}}))),i.a.createElement(me,null,i.a.createElement(fe,null),i.a.createElement(fe,{flex:2},w&&w.name)),i.a.createElement(me,null,i.a.createElement(fe,null,I&&I)),i.a.createElement(me,null,i.a.createElement(fe,{flex:1},i.a.createElement(K,{onClick:L},"Create Sound"))))},At="ADD",Vt="UPLOAD",Bt=function(e){var t=e.switchToOverview,n=e.availableSounds,a=e.selectedSound,r=e.selectSound,l=e.addSound,o=e.loading,u=e.fetchData,s=e.displayMessage,m=Object(c.useState)("#aaa"),p=Object($e.a)(m,2),d=p[0],f=p[1],g=Object(c.useState)(At),h=Object($e.a)(g,2),b=h[0],E=h[1];Object(c.useEffect)((function(){r(null)}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(me,null,i.a.createElement(fe,null,i.a.createElement(Pe,null,"Add Sound:")),i.a.createElement(fe,{flexDirection:"row",justifyContent:"flex-end"},b===At&&i.a.createElement(K,{onClick:function(){E(Vt)}},"Upload own sound"),b===Vt&&i.a.createElement(K,{onClick:function(){E(At)}},"Search sound"),i.a.createElement(K,{backgroundColor:"#0f0",onClick:function(){a&&a.name&&a.url?l({name:a.name,color:d,url:a.url}):s("Please select a sound first")}},"Add"),i.a.createElement(K,{backgroundColor:"#f00",onClick:t},"Cancel"))),i.a.createElement(me,null,i.a.createElement(fe,{flex:2,justifyContent:"flex-start"},b===At&&i.a.createElement(i.a.Fragment,null,i.a.createElement(me,null,i.a.createElement(fe,{flexDirection:"row",alignItems:"center",justifyContent:"flex-start"},i.a.createElement("p",null,"Color:"),i.a.createElement(U,{backgroundColor:d}))),i.a.createElement(Dt.SketchPicker,{color:d,onChangeComplete:function(e){f(e.hex)}}))),i.a.createElement(fe,{flex:3},b===Vt&&i.a.createElement(Tt,{setView:E,fetchData:u}),b===At&&i.a.createElement(Lt,{loading:o,availableSounds:n,selectedSound:a,selectSound:r}))))},Mt="OVERVIEW",Ft="ADD_SOUND",zt=function(e){var t=Object(c.useState)(""),n=Object($e.a)(t,2),a=n[0],o=n[1],u=Object(c.useState)(""),s=Object($e.a)(u,2),m=s[0],p=s[1],d=Object(c.useState)(""),g=Object($e.a)(d,2),h=g[0],b=g[1],E=Object(c.useState)(""),v=Object($e.a)(E,2),x=v[0],y=v[1],O=Object(c.useState)([{name:"default",color:"#ddd",url:""}]),j=Object($e.a)(O,2),k=j[0],w=j[1],S=Object(c.useState)(Mt),C=Object($e.a)(S,2),P=C[0],I=C[1],N=Object(c.useState)(!1),L=Object($e.a)(N,2),D=L[0],T=L[1],A=Object(c.useState)([]),V=Object($e.a)(A,2),B=V[0],M=V[1],F=Object(c.useState)(null),z=Object($e.a)(F,2),U=z[0],H=z[1],W=function(){var e=Object(l.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return I(Ft),e.next=3,_();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(l.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.next=3,et.a.get("/api/sound");case 3:t=e.sent,(n=t.data)&&(M(n),T(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e){y(e),setInterval((function(){y("")}),2e3)},R=function(){o(""),p(""),b(""),w([{name:"default",color:"#ddd",url:""}])},G=function(){var t=Object(l.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a&&m&&h){t.next=3;break}return q("All fields must be filled"),t.abrupt("return");case 3:if(!(k.length<2)){t.next=6;break}return q("You must select at least 1 sound"),t.abrupt("return");case 6:return t.next=8,et.a.post("/api/instrument",{name:a,category:m,subCategory:h,sounds:k,creator:e.user._id,private:!1});case 8:(n=t.sent).message?q(n.message):200===n.status&&(q("Success! You just created a new instrument!"),R());case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return i.a.createElement(ve,null,i.a.createElement(me,null,x&&i.a.createElement(Ae,null,x)),P===Ft&&i.a.createElement(Bt,{switchToOverview:function(){I(Mt)},availableSounds:B,selectedSound:U,selectSound:function(e){H(e)},loading:D,addSound:function(e){if(e.url,e.color){var t={name:e.name,color:e.color,url:e.url},n=[].concat(Object(f.a)(k),[t]);w(n),I(Mt)}else q("Please select or upload a sound and pick a color")},fetchData:_,displayMessage:q}),P===Mt&&i.a.createElement(i.a.Fragment,null,i.a.createElement(me,null,i.a.createElement(fe,{flex:1},i.a.createElement(Pe,null,"Create Instrument")),i.a.createElement(fe,{flex:2,flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-end"},i.a.createElement(K,{onClick:G},"Save Instrument"),i.a.createElement(K,{onClick:R},"Reset"),i.a.createElement(K,{onClick:function(){}},"Help"))),i.a.createElement(me,null,i.a.createElement(fe,{flex:2},i.a.createElement(It,{name:a,setName:o,category:m,setCategory:p,subCategory:h,setSubCategory:b})),i.a.createElement(fe,{flex:1})),i.a.createElement(me,null,i.a.createElement(fe,null,i.a.createElement("h3",null,"Sounds:"))),i.a.createElement(me,null,i.a.createElement(fe,null,i.a.createElement(Nt,{sounds:k,addSound:W})))))},Ut=function(){return i.a.createElement(ve,null,i.a.createElement(me,null,i.a.createElement(fe,null,i.a.createElement(Pe,null,"Help"))),i.a.createElement(me,null,i.a.createElement(fe,null,i.a.createElement("p",null,'The 2 main sections of the app are "Listen", where you can browse, check and play the music loops that are created, and "Create" where you can create your own loops.'))),i.a.createElement(me,null,i.a.createElement(fe,null,i.a.createElement(Ie,null,"Create song"),i.a.createElement("p",null,"In the song creation space you see the music grid which is composed of notes represented by gray squares, and a control panel at the bottom:"),i.a.createElement(me,{alignItems:"center",justifyContent:"center"},i.a.createElement(fe,{alignItems:"center",justifyContent:"center"},i.a.createElement("img",{src:"images/music-grid-1.png",alt:"Music grid example"}))),i.a.createElement("p",null,"On the music grid, the horizontal axis is the time, the vertical is the array of instruments that are available to you. Let's first try the default instruments."),i.a.createElement("p",null,"By clicking on a square, it changes color as you activate a sound to be played at a certain time in the loop. For example if you click on the first square of the kick, a kick will be played at the beginning."),i.a.createElement(me,{alignItems:"center",justifyContent:"center"},i.a.createElement(fe,{alignItems:"center",justifyContent:"center"},i.a.createElement("img",{src:"images/music-grid-2.png",alt:"Music grid example"}))),i.a.createElement("p",null,"Some instruments have only one sound, some have several, clicking several times on the same square switches between different sounds. Let's create a basic loop by switching on the notes (1 click) to form the following pattern:"),i.a.createElement(me,{alignItems:"center",justifyContent:"center"},i.a.createElement(fe,{alignItems:"center",justifyContent:"center"},i.a.createElement("img",{src:"images/music-grid-3.png",alt:"Music grid example"}))),i.a.createElement("p",null,"Press play and the magic happens! The notes are read as a sequence, at a 120 tempo, 8 squares represent a second, so our loop is 1 second long."),i.a.createElement("p",null,'To make the loop longer, press the "+" button next to "bars" and the grid extends. When the grid is longer than 16 notes, it gets spread on several pages that you can check and select using the page selector:'),i.a.createElement(me,{alignItems:"center",justifyContent:"center"},i.a.createElement(fe,{alignItems:"center",justifyContent:"center"},i.a.createElement("img",{src:"images/music-pages-selectors.png",alt:"Page selectors example"}))),i.a.createElement("p",null,'You can add and remove instruments (grid lines) using the menu. Once you are happy with your creation, click on "save" to keep it and share it. To save, you will need to create a profile, but this takes a couple of seconds. That\'s about it!'))),i.a.createElement(me,null,i.a.createElement(fe,null,i.a.createElement(Ie,null,"Have fun!"))))},Ht={textDecoration:"none",color:"black"},Wt={textDecoration:"none",color:"black",padding:"0 8px"},_t=function(e){return i.a.createElement(ge,null,i.a.createElement(Ee,{flexDirection:"row",justifyContent:"space-between"},i.a.createElement(Ke.b,{style:Ht,to:"/"},i.a.createElement(Te,null,"Boum-Tchak!")),i.a.createElement("div",{style:{display:"flex",paddingRight:20,alignItems:"center"}},i.a.createElement(Ke.b,{style:Ht,to:"/listen"},i.a.createElement(X,null,"Listen")),i.a.createElement(Ke.b,{style:Ht,to:"/create"},i.a.createElement(X,null,"Create")),e.user?i.a.createElement(Ke.b,{style:Ht,to:"/profile"},i.a.createElement(X,null,"Profile")):i.a.createElement(i.a.Fragment,null,i.a.createElement(Ke.b,{style:Ht,to:"/signup"},i.a.createElement(X,null,"Signup")),i.a.createElement(Ke.b,{style:Wt,to:"/login"},"Login")),i.a.createElement(Ke.b,{style:Wt,to:"/help"},"Help"))))},qt=(n(321),function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={user:e.props.user},e.setUser=function(t){e.setState({user:t})},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this;return i.a.createElement(be,null,i.a.createElement(_t,{user:this.state.user}),i.a.createElement(Ee,null,i.a.createElement(he,null),i.a.createElement(Ct.d,null,i.a.createElement(Ct.b,{exact:!0,path:"/create",render:function(t){return i.a.createElement(mt,Object.assign({user:e.state.user},t))}}),i.a.createElement(Ct.b,{exact:!0,path:"/help",render:function(e){return i.a.createElement(Ut,e)}}),i.a.createElement(Ct.b,{exact:!0,path:"/song/:id",render:function(t){return i.a.createElement(mt,Object.assign({user:e.state.user},t))}}),i.a.createElement(Ct.b,{exact:!0,path:"/login",render:function(t){return e.state.user?i.a.createElement(Ct.a,{to:"/"}):i.a.createElement(jt,Object.assign({setUser:e.setUser},t))}}),i.a.createElement(Ct.b,{exact:!0,path:"/signup",render:function(t){return e.state.user?i.a.createElement(Ct.a,{to:"/"}):i.a.createElement(kt,Object.assign({setUser:e.setUser},t))}}),i.a.createElement(Pt,{exact:!0,path:"/profile",user:this.state.user,setUser:this.setUser,component:wt}),i.a.createElement(Pt,{exact:!0,path:"/create-instrument",user:this.state.user,setUser:this.setUser,component:zt}),i.a.createElement(Ct.b,{exact:!0,path:"/",render:function(e){return i.a.createElement(vt,Object.assign({isAppIntroDisplayed:!0},e))}}),i.a.createElement(Ct.b,{exact:!0,path:"/listen",render:function(e){return i.a.createElement(vt,Object.assign({isAppIntroDisplayed:!1},e))}}),i.a.createElement(Ct.b,{exact:!0,path:"/load-song",render:function(t){return e.state.user?i.a.createElement(xt,Object.assign({user:e.state.user},t)):i.a.createElement(Ct.a,{to:"/"})}}))))}}]),n}(i.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));(function(){var e=Object(l.a)(r.a.mark((function e(){var t,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,et.a.get("/api/auth/loggedin");case 2:t=e.sent,n=t.data,u.a.render(i.a.createElement(Ke.a,null,i.a.createElement(qt,{user:n})),document.getElementById("root"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[129,1,2]]]);
//# sourceMappingURL=main.331cf301.chunk.js.map