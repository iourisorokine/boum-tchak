(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{142:function(e,t,n){},279:function(e,t,n){},280:function(e,t,n){"use strict";n.r(t);var r=n(7),c=n.n(r),i=n(14),a=n(1),s=n(0),o=n.n(s),u=n(45),l=n.n(u),j=(n(142),n(8)),d=n(2),b=n(3),h=n(5),x=n(4),f=n(15),p=n(11),O=n(16),g=n(17);function m(){var e=Object(O.a)(["\n  padding: 3px;\n  margin: 0px;\n  cursor: pointer;\n  color: ",";\n  background-color: ",";\n  &:hover {\n    background-color: black;\n    color: white;\n  }\n"]);return m=function(){return e},e}function v(){var e=Object(O.a)(["\n  height: 24px;\n  width: 24px;\n  margin: 4px;\n  border: solid black 1px;\n  background-color: ",";\n"]);return v=function(){return e},e}function y(){var e=Object(O.a)(["\n  src: ","\n  height: 260px;\n  width: 260px;\n  object-fit: cover;\n  padding: 10px;\n"]);return y=function(){return e},e}function w(){var e=Object(O.a)(["\n  font-size: 12px;\n"]);return w=function(){return e},e}function k(){var e=Object(O.a)(["\n  margin: 8px;\n  height: 26px;\n  width: ",";\n"]);return k=function(){return e},e}function S(){var e=Object(O.a)(["\n  margin: 0px 5px;\n"]);return S=function(){return e},e}function C(){var e=Object(O.a)(["\n  border: solid black 1px;\n  width: ",";\n"]);return C=function(){return e},e}function I(){var e=Object(O.a)(["\n  height: 24px;\n  width: ",";\n  margin: 10px;\n  border: 1px solid black;\n  border-radius: 4px;\n"]);return I=function(){return e},e}function T(){var e=Object(O.a)(["\n  position: relative;\n  margin: 30px 10px;\n  border: solid 1px black;\n  border-radius: 10px;\n  padding-top: 10px;\n  width: 80%;\n  &:hover "," {\n    visibility: visible;\n  }\n"]);return T=function(){return e},e}function P(){var e=Object(O.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  margin-top: -8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  visibility: hidden;\n"]);return P=function(){return e},e}function N(){var e=Object(O.a)(["\n  margin: auto;\n  min-width: 400px;\n  max-width: 700px;\n  position: absolute;\n  z-index: 10;\n  top: 150px;\n  box-shadow: 3px 3px 5px #bbb;\n  background-color: white;\n  border: solid 1px black;\n  border-radius: 3px;\n  padding: 10px;\n"]);return N=function(){return e},e}var A=g.a.div(N()),E=g.a.div(P()),_=g.a.div(T(),E),D=g.a.input(I(),(function(e){return e.width||"100px"})),L=(g.a.form(C(),(function(e){return e.width?"".concat(e.width,"px"):"100%"})),g.a.label(S())),M=g.a.select(k(),(function(e){return e.width||"110px"})),B=g.a.option(w()),U=g.a.img(y(),(function(e){return e.src})),V=g.a.div(v(),(function(e){return e.backgroundColor||"white"})),F=g.a.p(m(),(function(e){return e.selected?"white":"black"}),(function(e){return e.selected?"black":"white"}));function R(){var e=Object(O.a)(["\n  color: ",";\n  border: 1px solid #aaa;\n  margin: ",";\n  padding: ",";\n  height: ",";\n  background-color: #fff;\n  border-radius: 4px;\n  font-size: 14px;\n  transition: background-color 0.5s, color 0.5s;\n  &:hover {\n    background-color: #888;\n    color: #fff;\n  }\n"]);return R=function(){return e},e}function z(){var e=Object(O.a)(["\n  color: ",";\n  border: 1px solid #aaa;\n  margin: 4px 4px 4px 8px;\n  background-color: #fff;\n  border-radius: 4px;\n  font-size: 12px;\n  &:hover {\n    background-color: #aaa;\n    color: #fff;\n  }\n"]);return z=function(){return e},e}function H(){var e=Object(O.a)(["\n  color: black;\n  backgroundcolor: white;\n  padding: 6px;\n  bordercolor: black;\n  border: 1px solid black;\n  border-radius: 50%;\n  cursor: pointer;\n"]);return H=function(){return e},e}function G(){var e=Object(O.a)(["\n  color: ",";\n  border: 1px solid #aaa;\n  margin: ",";\n  padding: ",";\n  background-color: #fff;\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: bold;\n  transition: background-color 0.5s, color 0.5s;\n  &:hover {\n    background-color: #f00;\n    color: #fff;\n  }\n"]);return G=function(){return e},e}function W(){var e=Object(O.a)(["\n  height: 30px;\n  min-width: 40px;\n  margin: 8px;\n  padding: 0px 10px;\n  border-radius: 15px;\n  border: solid 1px black;\n  color: ",";\n  background-color: ",";\n  font-size: 12px;\n  &:hover {\n    background-color: black;\n    color: white;\n    opacity: ",";\n  }\n"]);return W=function(){return e},e}function J(){var e=Object(O.a)(["\n  margin: 8px;\n  background-color: ",";\n  border: solid 1px black;\n  border-radius: 5px;\n  padding: 6px 12px;\n  color: #000;\n  text-decoration: none;\n  cursor: pointer;\n  transition: background-color 0.7s, color 0.7s;\n  &:hover {\n    background-color: black;\n    color: white;\n  }\n"]);return J=function(){return e},e}function q(){var e=Object(O.a)(["\n  width: 60px;\n  background-color: #f00;\n  color: #fff;\n  font-size: 20px;\n  font-weight: bold;\n"]);return q=function(){return e},e}function Y(){var e=Object(O.a)(["\n  width: 60px;\n  background-color: #0f0;\n  color: #fff;\n  font-size: 20px;\n  font-weight: bold;\n"]);return Y=function(){return e},e}function X(){var e=Object(O.a)(["\n  height: 36px;\n  min-width: 36px;\n  margin: 8px;\n  padding: 0px 10px;\n  border-radius: 18px;\n  border: solid 1px black;\n  background-color: ",";\n  font-size: 14px;\n  box-shadow: 3px 3px 5px #bbb;\n  cursor: pointer;\n  transition: background-color 0.7s, color 0.7s;\n  &:hover {\n    background-color: ",";\n    color: white;\n  }\n"]);return X=function(){return e},e}var K=g.a.button(X(),(function(e){return e.backgroundColor||"white"}),(function(e){return e.hoverColor||"black"})),Q=(Object(g.a)(K)(Y()),Object(g.a)(K)(q()),g.a.div(J(),(function(e){return e.backgroundColor||"white"}))),$=g.a.button(W(),(function(e){return e.selected?"white":"black"}),(function(e){return e.selected?"black":"white"}),(function(e){return e.selected?.5:1})),Z=g.a.p(G(),(function(e){return e.color||"#888"}),(function(e){return e.margin||"4px 8px 4px 0px"}),(function(e){return e.padding||"2px"})),ee=(g.a.button(H()),g.a.button(z(),(function(e){return e.color||"#aaa"}))),te=g.a.button(R(),(function(e){return e.color||"#888"}),(function(e){return e.margin||"4px 4px 4px 0px"}),(function(e){return e.padding||"default"}),(function(e){return e.height||"default"}));function ne(){var e=Object(O.a)(["\n  height: ",";\n"]);return ne=function(){return e},e}function re(){var e=Object(O.a)(["\n  width: 90%;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flexStart;\n"]);return re=function(){return e},e}function ce(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n  width: 100vw;\n  max-width: ",";\n"]);return ce=function(){return e},e}function ie(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return ie=function(){return e},e}function ae(){var e=Object(O.a)(["\n  height: 110px;\n"]);return ae=function(){return e},e}function se(){var e=Object(O.a)(["\n  height: 70px;\n  width: 100vw;\n  z-index: 10;\n  background-color: white;\n  display: flex;\n  position: fixed;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 4px 4px 5px #eee;\n"]);return se=function(){return e},e}function oe(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: ",";\n  min-height: 20px;\n  padding: ",";\n  align-items: ",";\n  justify-content: ",";\n  flex: ",";\n"]);return oe=function(){return e},e}function ue(){var e=Object(O.a)(["\n  min-height: 60vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return ue=function(){return e},e}function le(){var e=Object(O.a)(["\n  padding: ",";\n  cursor: pointer;\n  color: ",";\n  background-color: ",";\n  &:hover {\n    background-color: ",";\n    color: ",";\n    opacity: ",";\n  }\n"]);return le=function(){return e},e}function je(){var e=Object(O.a)(["\n  padding: ",";\n  display: flex;\n  align-items: ",";\n  justify-content: ",";\n  width: 100%;\n"]);return je=function(){return e},e}var de=g.a.div(je(),(function(e){return e.padding||0}),(function(e){return e.alignItems||"center"}),(function(e){return e.justifyContent||"center"})),be=Object(g.a)(de)(le(),(function(e){return e.padding||0}),(function(e){return e.selected?"white":"black"}),(function(e){return e.selected?"black":e.bgColor||"white"}),(function(e){return e.noHoverHighlight&&!e.selected?"white":"black"}),(function(e){return e.noHoverHighlight&&!e.selected?"black":"white"}),(function(e){return e.selected?.5:1})),he=g.a.div(ue()),xe=g.a.div(oe(),(function(e){return e.flexDirection||"column"}),(function(e){return e.padding||0}),(function(e){return e.alignItems||"flex-start"}),(function(e){return e.justifyContent||"center"}),(function(e){return e.flex||1})),fe=g.a.div(se()),pe=g.a.div(ae()),Oe=g.a.div(ie()),ge=g.a.div(ce(),(function(e){return e.flexDirection||"column"}),(function(e){return e.alignItems||"center"}),(function(e){return e.justifyContent||"flex-start"}),(function(e){return e.maxWidth||"900px"})),me=g.a.div(re()),ve=g.a.div(ne(),(function(e){return e.height||"20px"}));function ye(){var e=Object(O.a)(["\n  color: ",";\n  margin: ",";\n  padding: ",";\n  font-size: 14px;\n"]);return ye=function(){return e},e}function we(){var e=Object(O.a)(["\n  color: red;\n"]);return we=function(){return e},e}function ke(){var e=Object(O.a)(["\n  padding: 0px 50px;\n  font-size: 36px;\n  text-shadow: 4px 4px #7799dd;\n"]);return ke=function(){return e},e}function Se(){var e=Object(O.a)(["\n  font-size: 12px;\n"]);return Se=function(){return e},e}function Ce(){var e=Object(O.a)(["\n  font-size: 12px;\n  line-height: 12px;\n  padding: ",";\n  margin: 0;\n"]);return Ce=function(){return e},e}function Ie(){var e=Object(O.a)(["\n  font-size: 10px;\n  line-height: 10px;\n  width: ",";\n"]);return Ie=function(){return e},e}function Te(){var e=Object(O.a)(["\n  padding: 0px 10px;\n  background-color: white;\n  font-weight: ",";\n  font-size: 12px;\n"]);return Te=function(){return e},e}function Pe(){var e=Object(O.a)(["\n  margin-top: -32px;\n  padding: 0px 12px;\n  display: flex;\n  justify-content: space-between;\n"]);return Pe=function(){return e},e}function Ne(){var e=Object(O.a)(["\n  padding: 10px 0;\n  margin: 0 0 4px 0;\n"]);return Ne=function(){return e},e}function Ae(){var e=Object(O.a)(["\n  padding: 10px 0;\n  margin: 0 0 10px 0;\n"]);return Ae=function(){return e},e}var Ee=g.a.h2(Ae()),_e=g.a.h3(Ne()),De=g.a.div(Pe()),Le=g.a.p(Te(),(function(e){return e.b?"bold":"regular"})),Me=g.a.p(Ie(),(function(e){return e.width||"70px"})),Be=g.a.p(Ce(),(function(e){return e.padding||2})),Ue=(g.a.span(Se()),g.a.h1(ke())),Ve=g.a.p(we()),Fe=g.a.p(ye(),(function(e){return e.color||"#888"}),(function(e){return e.margin||"4px 4px 4px 0px"}),(function(e){return e.padding||"default"}));function Re(){var e=Object(O.a)(["\n  border-bottom: 1px solid #aaa;\n  width: ",";\n  height: ",";\n  margin: 0px 3px 12px 3px;\n  font-size: 10px;\n  color: #aaa;\n"]);return Re=function(){return e},e}function ze(){var e=Object(O.a)(["\n  height: 8px;\n  width: 8px;\n  margin: 4px;\n  border-width: 2px;\n  border-style: solid;\n  border-radius: 50%;\n  border-color: ",";\n  background-color: ",";\n  cursor: pointer;\n"]);return ze=function(){return e},e}function He(){var e=Object(O.a)(["\n  height: 30px;\n  width: 30px;\n  margin: 3px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  box-shadow: 3px 3px 5px ",";\n  background-color: ",";\n  opacity: ",";\n  cursor: pointer;\n  &:hover {\n    height: ",";\n    width: ",";\n    margin: ",";\n  }\n  animation-name: ",";\n  animation-duration: 0.8s;\n  animation-iteration-count: 1;\n"]);return He=function(){return e},e}function Ge(){var e=Object(O.a)(["\n 0% { \n   height: 30px; \n   width: 30px;\n   margin: 3px; \n  }\n  20% { \n   height: 24px; \n   width: 24px;\n   margin: 6px; \n    }\n 30% { \n   height: 32px; \n    width: 32px;  \n    margin: 2px;\n}\n 100% { \n   height: 30px; \n   width: 30px;\n   margin: 3px; \n }\n"]);return Ge=function(){return e},e}function We(){var e=Object(O.a)(["\n  margin: 0;\n  display: flex;\n"]);return We=function(){return e},e}function Je(){var e=Object(O.a)(["\n  margin: 10px 20px;\n  padding-bottom: 10px;\n"]);return Je=function(){return e},e}var qe=g.a.div(Je()),Ye=g.a.div(We()),Xe=Object(g.b)(Ge()),Ke=g.a.div(He(),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.highlighted?.7:1}),(function(e){return e.clickable?"24px":"30px"}),(function(e){return e.clickable?"24px":"30px"}),(function(e){return e.clickable?"6px":"3px"}),(function(e){return e.animated&&Xe})),Qe=g.a.div(ze(),(function(e){return e.color||"black"}),(function(e){return e.selected?e.color||"black":"white"})),$e=g.a.div(Re(),(function(e){return e.width||"138px"}),(function(e){return e.height||"default"})),Ze=n(296),et=Object(s.createContext)(),tt=et,nt=function(e){var t=e.clickable,n=void 0===t||t,r=Object(s.useContext)(et),c=r.currentPage,i=r.setCurrentPage,o=r.pages,u=r.isNotePlayedOnClick,l=r.setIsNotePlayedOnClick,j=r.tempo,d=r.setTempo,b=r.setTimeoutTempo;return Object(a.jsxs)(de,{padding:"0 0 24px 0",children:[Object(a.jsxs)(xe,{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",children:[Object(a.jsx)(Fe,{children:"Play on click"}),Object(a.jsx)(Ze.a,{onChange:function(){l(!u)},checked:u})]}),Object(a.jsxs)(xe,{flexDirection:"row",alignItems:"center",justifyContent:"center",children:[Object(a.jsx)(te,{onClick:function(){d(j-5),b(6e4/j/4)},children:"-"}),Object(a.jsxs)(Fe,{children:["tempo: ",j]}),Object(a.jsx)(te,{onClick:function(){d(j+5),b(6e4/j/4)},children:"+"})]}),Object(a.jsxs)(xe,{flexDirection:"row",alignItems:"center",justifyContent:"left",children:[Object(a.jsx)(Fe,{children:"Pages:"}),o.map((function(e,t){return Object(a.jsx)(Qe,{selected:c===t+1,onClick:n?function(){return i(t+1)}:null},t)}))]})]})},rt=n(18),ct=n(24),it=n(25),at={width:16,height:16},st=function(e){var t=e.onStopBtnPress,n=e.onPlayBtnPress,r=e.user,c=Object(s.useContext)(et),i=c.isPlaying,o=c.isSaveSongVisible,u=c.setIsSaveSongVisible;return Object(a.jsxs)(de,{justifyContent:"center",children:[i?Object(a.jsx)(Q,{onClick:t,backgroundColor:"#f00",children:Object(a.jsx)(ct.a,{icon:it.e,color:"white",style:at})}):Object(a.jsx)(Q,{onClick:n,backgroundColor:"#0f0",children:Object(a.jsx)(ct.a,{icon:it.d,color:"white",style:at})}),Object(a.jsx)(Q,{onClick:function(){return u(!o)},children:"Save"}),r&&Object(a.jsx)(rt.b,{to:"/load-song",children:Object(a.jsx)(Q,{children:"Load"})})]})},ot=n(38),ut=n(134),lt=n(19),jt=n.n(lt),dt=function(e){var t=e.addInstrument,n=Object(s.useState)([]),r=Object(p.a)(n,2),o=r[0],u=r[1],l=Object(s.useState)(null),j=Object(p.a)(l,2),d=j[0],b=j[1],h=Object(s.useState)(!1),x=Object(p.a)(h,2),O=x[0],g=x[1],m=Object(s.useState)([]),v=Object(p.a)(m,2),y=v[0],w=v[1],k=Object(s.useContext)(et).toggleIsAddInstrumentVisible,S=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,i,a,s,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t&&{params:{category:t}},e.next=3,jt.a.get("/api/instrument",r);case 3:i=e.sent,(a=i.data)&&(u(a),n&&(s=a.map((function(e){return e.category})),o=Object(f.a)(new Set(s)),w(o))),g(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){g(!0),S(null,!0)}),[]);return Object(a.jsxs)(A,{children:[Object(a.jsx)(de,{padding:"10px 12px 4px 12px",children:Object(a.jsx)(_e,{children:"Add Instrument"})}),Object(a.jsx)(de,{padding:"10px 12px 4px 12px",children:Object(a.jsx)(xe,{flexDirection:"row",children:y.map((function(e){if("default"!==e)return Object(a.jsx)($,{selected:d===e,onClick:function(){return function(e){S(e),b(e)}(e)},children:e},e)}))})}),O&&Object(a.jsx)(xe,{justifyContent:"center",alignItems:"center",children:Object(a.jsx)(ot.Bars,{width:100,height:50,fill:"#000",stroke:"#000"})}),Object(a.jsx)(de,{padding:"4px 12px 0 12px",children:Object(a.jsx)(xe,{children:Object(a.jsx)(ut.a,{height:260,width:380,itemCount:o.length,itemSize:30,children:function(e){var n=e.index,r=e.style,c=o[n];return Object(a.jsxs)(be,{style:r,bgColor:n%2===0?"#eee":"#fff",padding:"4px 0 4px 0",onClick:function(){return t(c),void k()},children:[Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(Be,{children:c.name})}),Object(a.jsx)(xe,{children:Object(a.jsx)(Be,{children:c.category})}),Object(a.jsx)(xe,{children:Object(a.jsx)(Be,{children:c.subCategory})})]})}})})}),Object(a.jsx)(de,{padding:"20px 0 10px 0",children:Object(a.jsx)(xe,{alignItems:"center",children:Object(a.jsx)(K,{hoverColor:"red",onClick:k,children:"Cancel"})})})]})},bt=function(e){var t=e.saveTheSong,n=e.user,r=e.toggleIsSaveSongVisible,c=Object(s.useState)(""),i=Object(p.a)(c,2),u=i[0],l=i[1];return Object(a.jsx)(A,{children:Object(a.jsxs)(o.a.Fragment,{children:[n?Object(a.jsxs)("p",{style:{margin:10},children:["Name your song (if you modified an existing song, ",Object(a.jsx)("br",{}),"it will still be saved under as new one):"]}):Object(a.jsxs)("p",{style:{margin:10},children:["You don't have a user account yet, therefore your song ",Object(a.jsx)("br",{}),"will be published as annonymous... to bad!",Object(a.jsx)("br",{}),"Please create a user profile before saving next time ",Object(a.jsx)("br",{}),"Name your song:"]}),Object(a.jsx)(D,{type:"text",placeholder:"My Supa Song...",value:u,width:"260px",onChange:function(e){l(e.target.value)}}),Object(a.jsxs)("div",{children:[Object(a.jsx)(K,{onClick:function(){return t(u)},children:"Save"}),Object(a.jsx)(K,{onClick:function(){return r()},children:"Cancel"})]})]})})},ht={START_PARTITION_LENGTH:8,MAX_PARTITION_LENGTH:64,DEFAULT_TEMPO:120,DEFAULT_TIMEOUT:125,DEFAULT_SOUND_ID:"5fba8681963aad73cd4ce0b6"},xt=function(e,t){if(!e)return[];var n=[];return e.forEach((function(){for(var e=[],r=1;r<=t;r++)e.push(0);n.push(e)})),n},ft=function(e){if(e.length)return e.map((function(e){return"Tone Synth"===e.category?pt(e):Ot(e)}))},pt=function(e){for(var t=e.colors,n=e.pitches,r=[],c=0;c<n.length;c++)r.push({});return{id:e._id,label:e.name,isToneJs:!0,colors:t,sounds:r,pitches:n}},Ot=function(e){var t=[],n=[];return e.sounds.forEach((function(e){e||(t.push({name:"default",url:""}),n.push("")),e.url?(t.push(new Audio(e.url)),n.push(e.pitch||"")):(t.push(null),n.push(""))})),{id:e._id,label:e.name,colors:e.colors,isToneJs:!1,sounds:t,pitches:n}},gt=n(64),mt=(new gt.a).toDestination(),vt=function(e,t,n){t.forEach((function(t,r){if(t[n]){var c=t[n];if(e[r].isToneJs){if(e[r].isToneJs){var i=gt.b();mt.triggerAttackRelease(e[r].pitches[c],"8n",i-.1)}}else e[r].sounds.forEach((function(e){e&&(e.pause(),e.currentTime=0)})),e[r].sounds[c].play()}}))},yt=function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=gt.b(),mt.triggerAttackRelease(t,"8n",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wt=["default","Drums","Bass","Synth","Guitar","Tone Synth","Piano","Brass","Strings","Flute","Effects","Voice","Other"],kt={"":[""],default:[""],Drums:["","Kick","Snare","Tom","Hi-hat","Cymbal","Vinnyl","Percussion","Clang","Other"],Bass:["","Acoustic","Fretless","Electric","Picked","Synth","Slap"],Synth:["","Piano","Ambiant","Lead","Pad","Effect","Electronic"],Guitar:["","Acoustic","Clean","Overdrive","Distorsion","Muted","Jazz","Fuzz","Wah","Funk"],"Tone Synth":["","Synth","AMSynth","FMSynth"],Piano:["","Grand","Acoustic","Clavesin"],Brass:["","Horn","Trumpet","Tuba","Trombone"],Strings:["","Violin","Cello","Double Bass","Harp","Mixed-strings"],Flute:["","Flute","Clarinet","Pipeau","Peruvian","Bass","Recorder"],Effects:["","Scratch","Noise","Clang","Electronic","Mystic"],Voice:["","Hi-sing","Mid-sing","Low-sing","Talk","Noize"],Other:[""]},St=function(e){return kt[e]},Ct=function(){return wt},It=function(){var e=["Anonymous","Mysterious","Unknown","Forgotten"],t=["Musician","Troubadour","Creator","Barde","Artist","Beats Maker","Sounds Juggler"],n=function(e){return Math.floor(Math.random()*e)};return"".concat(e[n(e.length)]," ").concat(t[n(t.length)])},Tt=function(e){var t=e.notePosition,n=e.color,r=e.status,c=e.toggleActiveNote,i=e.linePosition,s=e.sounds,o=e.highlighted,u=e.animated,l=e.pitches,j=l[r];return Object(a.jsx)(Ke,{color:n,highlighted:o,onClick:function(){c(t,i,s,l)},clickable:!0,animated:u,children:j||""})},Pt=function(e){var t=e.linePosition,n=e.notes,r=e.noteColors,c=e.toggleActiveNote,i=e.sounds,o=e.pitches,u=e.highlightedNote,l=e.label,j=e.animatedNotes,d=e.currentPage,b=e.lenghtOfPage,h=Object(s.useContext)(et).deleteLine,x=(d-1)*b,f=d*b,p=(null===n||void 0===n?void 0:n.length)?n.map((function(e,n){return n>=x&&n<f?Object(a.jsx)(Tt,{status:e,notePosition:n,color:r[e],toggleActiveNote:c,linePosition:t,sounds:i,pitches:o,highlighted:u===n,animated:j.includes(n)},n):null})):[];return Object(a.jsxs)(Ye,{children:[Object(a.jsx)(Z,{onClick:function(){return h(t)},children:"x"}),Object(a.jsx)(Me,{width:"100px",children:l&&l}),p]})},Nt=function(e){var t=e.totalLength,n=e.lengthOfPage,r=e.isLastPage,c=e.currentPage,i=Object(s.useContext)(et),o=i.copyOneBar,u=i.copiedPartitionBar,l=i.pasteOneBar,j=n/4,d=[],b=r&&!(t&&t%n===0)?t%n:t>n?n:t;if(n&&n>=4){for(var h=function(e){var t=(c-1)*j+e/4-1;d.push(Object(a.jsxs)($e,{children:["1 bar",Object(a.jsx)(ee,{onClick:function(){return o(t)},children:"copy"}),u&&Object(a.jsx)(ee,{onClick:function(){return l(t)},children:"paste"})]},t))},x=4;x<=b;x+=4)h(x);r&&t%4!==0&&d.push(Object(a.jsx)($e,{width:"".concat((t%4*33).toString(),"px"),height:"26px"}))}return Object(a.jsxs)(de,{children:[Object(a.jsx)(Me,{width:"124px"}),d]})},At=function(e){var t=e.partition,n=e.lengthOfPage,r=e.currentPage,c=e.pages,i=e.instruments,s=e.toggleActiveNote,u=e.highlightedNote,l=e.animatedNotes,j=e.addOneBar,d=e.removeOneBar,b=e.toggleIsAddInstrumentVisible;return Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",minWidth:800},children:[Object(a.jsx)("div",{style:{minHeight:300,display:"flex",flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center"},children:Object(a.jsx)(qe,{children:i.length?Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(Nt,{totalLength:t[0]&&t[0].length,lengthOfPage:n,isLastPage:r===c.length,currentPage:r}),i.map((function(e,c){return Object(a.jsx)(Pt,{linePosition:c,label:e.label,notes:t[c],noteColors:e.colors,toggleActiveNote:s,sounds:e.sounds,pitches:e.pitches,highlightedNote:u,animatedNotes:l,currentPage:r,lenghtOfPage:n},c)})),Object(a.jsx)(Ye,{children:Object(a.jsx)(Me,{width:"124px",children:Object(a.jsx)(te,{onClick:b,children:"+ Add instrument"})})})]}):Object(a.jsx)(te,{padding:"8px 8px 8px 8px",onClick:b,children:"No partition to display yet... Click here to add your first instrument"})})}),!!(null===i||void 0===i?void 0:i.length)&&Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)(te,{height:"160px",onClick:d,children:Object(a.jsx)(ct.a,{icon:it.b})}),Object(a.jsx)(te,{height:"160px",onClick:j,children:Object(a.jsx)(ct.a,{icon:it.c})})]})]})},Et=function(e){var t=Object(s.useState)(""),n=Object(p.a)(t,2),r=n[0],u=n[1],l=Object(s.useState)(-1),j=Object(p.a)(l,2),d=j[0],b=j[1],h=o.a.useRef(null),x=window.innerWidth>=800?16:12,O=Object(s.useContext)(et),g=O.tempo,m=O.setTempo,v=O.setIsPlaying,y=O.instruments,w=O.setInstruments,k=O.partition,S=O.setPartition,C=O.setTimeoutTempo,I=O.isNotePlayedOnClick,T=O.isAddInstrumentVisible,P=O.toggleIsAddInstrumentVisible,N=O.isSaveSongVisible,E=O.setIsSaveSongVisible,_=O.animatedNotes,D=O.timeoutTempo,L=O.setAnimatedNotes,M=O.currentPage,B=O.setCurrentPage,U=O.pages,V=O.setPages;Object(s.useEffect)((function(){var t,n,r=null===e||void 0===e||null===(t=e.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id;return r?R(r):F(),function(){return z()}}),[]);var F=function(){var e=Object(i.a)(c.a.mark((function e(){var t,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt.a.get("/api/instrument/starter");case 2:t=e.sent,n=t.data,r=ft(n),i=xt(r,ht.START_PARTITION_LENGTH),w(r),S(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,i,a,s,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt.a.get("/api/song/".concat(t));case 2:for(n=e.sent,r=n.data,i=Object(f.a)(r.instruments),a=ft(i),w(a),S(r.partition),m(r.tempo),C(6e4/r.tempo/4),s=Math.ceil(r.partition[0].length/x),o=[],u=1;u<=s;u++)o.push(1);V(o);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){v(!1),clearInterval(h.current)},H=function(){var t=Object(i.a)(c.a.mark((function t(n){var r,i,a,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=y.map((function(e){return e.id})),s={title:n,partition:k,tempo:g,instruments:a,creator:(null===(r=e.user)||void 0===r?void 0:r._id)||void 0,creatorName:(null===(i=e.user)||void 0===i?void 0:i.username)||It(),posted:!0},t.next=4,jt.a.post("api/song/",s);case 4:E(!1),u('New song "'.concat(n,'" successfully saved!')),setTimeout((function(){u("")}),1500);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)(o.a.Fragment,{children:[T&&Object(a.jsx)(dt,{addInstrument:function(e){for(var t=k[0]?k[0].length:8,n=[],r=1;r<=t;r++)n.push(0);var c,i=Object(f.a)(k),a=Object(f.a)(y),s="Tone Synth"===(c=e).category?pt(c):Ot(c);a.push(s),i.push(n),w(a),S(i)}}),N&&Object(a.jsx)(bt,{saveTheSong:H,toggleIsSaveSongVisible:function(){return E(!N)},user:e.user}),r&&Object(a.jsx)(A,{children:Object(a.jsx)("p",{children:r})}),Object(a.jsx)(nt,{}),Object(a.jsx)(At,{partition:k,lengthOfPage:x,currentPage:M,pages:U,instruments:y,toggleActiveNote:function(e,t,n,r){var c=Object(f.a)(k),i=n.length,a=(c[t][e]+1)%i;c[t][e]=a,n[a]instanceof Audio&&I?n[a].play():y[t].isToneJs&&r.length&&r[a]&&yt(r[a]),S(c)},highlightedNote:d,animatedNotes:_,toggleIsAddInstrumentVisible:P,addOneBar:function(){if(k.length&&k[0].length<ht.MAX_PARTITION_LENGTH){var e=Object(f.a)(k);e.forEach((function(e){e.push(0)}));var t=Math.ceil(e[0].length/x),n=U.length<t?U.concat([1]):U;S(e),V(n)}},removeOneBar:function(){var e;if(!((null===(e=k[0])||void 0===e?void 0:e.length)<2)){var t=Object(f.a)(k),n=t[0].length-1;t.forEach((function(e){e.splice(n,1)}));var r=Math.ceil(t[0].length/x),c=U.length>r?U.slice(0,U.length-1):U;S(t),V(c),M>c.length&&B(c.length)}}}),Object(a.jsx)(st,{onPlayBtnPress:function(){!function(e,t,n){if(t&&t.length){v(!0),B(1);var r=0;h.current=setInterval((function(){if(b(r),L([r-1,r,r+1]),vt(e,t,r),++r>=t[0].length&&(r=0),r%x===1){var n=Math.ceil(r/x);B(n)}}),n)}}(y,k,D)},onStopBtnPress:z,user:e.user})]})},_t=function(e){var t=e.status,n=e.colors,r=e.highlighted,c=e.isAnimated,i=n[t];return Object(a.jsx)(Ke,{color:i,highlighted:r,animated:c})},Dt=function(e){var t=e.notes,n=e.noteColors,r=e.highlightedNote,c=e.animatedNotes,i=e.lengthOfPage,s=e.currentPage,o=(s-1)*i,u=s*i,l=t.map((function(e,t){if(t>=o&&t<u)return Object(a.jsx)(_t,{status:e,colors:n,highlighted:r===t,isAnimated:c.includes(t)},t)}));return Object(a.jsx)(Ye,{children:l})},Lt={width:40,height:40,padding:"10px 30px",border:"solid 1px rgba(0, 0, 0, 0.6)",color:"rgba(0, 0, 0, 0.7)",backgroundColor:"rgba(250, 250, 250, 0.5)",borderRadius:5,zIndex:5},Mt=function(e){var t=e.title,n=e.partition,r=e.musicLines,c=e.tempo,i=e.creatorName,o=Object(s.useState)(!1),u=Object(p.a)(o,2),l=u[0],j=u[1],d=Object(s.useState)(-1),b=Object(p.a)(d,2),h=b[0],x=b[1],f=Object(s.useState)([-1,-1,-1]),O=Object(p.a)(f,2),g=O[0],m=O[1],v=Object(s.useState)(1),y=Object(p.a)(v,2),w=y[0],k=y[1],S=Object(s.useState)([1]),C=Object(p.a)(S,2),I=(C[0],C[1]),T=6e4/c/4,P=Object(s.useRef)(null),N=window.innerWidth>=800?16:12;Object(s.useEffect)((function(){for(var e=[],t=Math.ceil(n[0].length/N),r=1;r<=t;r++)e.push(1);I(e)}),[]),Object(s.useEffect)((function(){return function(){return A()}}),[]);var A=function(){j(!1),clearInterval(P.current)};return Object(a.jsxs)(_,{children:[Object(a.jsx)(E,{onClick:function(){l?A():function(e,t,n){j(!0),k(1);var r=0;P.current=setInterval((function(){if(x(r),m([r-1,r,r+1]),vt(e,t,r),++r>=t[0].length&&(r=0),r%N===1){var n=Math.ceil(r/N);k(n)}}),n)}(r,n,T)},children:l?Object(a.jsx)(ct.a,{icon:it.e,color:"black",style:Lt}):Object(a.jsx)(ct.a,{icon:it.d,color:"black",style:Lt})}),Object(a.jsxs)(De,{children:[Object(a.jsx)(Le,{b:!0,children:t}),Object(a.jsxs)(Le,{children:["by ",i]})]}),Object(a.jsx)(qe,{children:r.map((function(e,t){return Object(a.jsx)(Dt,{linePosition:t,notes:n[t],noteColors:e.colors,sounds:e.sounds,lengthOfPage:N,currentPage:w,highlightedNote:h,animatedNotes:g},t)}))})]})},Bt=function(){var e={padding:4,paddingTop:32,width:40,height:40};return Object(a.jsxs)(he,{children:[Object(a.jsx)(de,{children:Object(a.jsx)(xe,{justifyContent:"center",alignItems:"center",children:Object(a.jsx)(Ee,{children:"Welcome to Boom-Tchak!"})})}),Object(a.jsx)(de,{children:Object(a.jsxs)(xe,{justifyContent:"center",alignItems:"center",children:[Object(a.jsx)("p",{style:{margin:0,padding:8},children:"The app to discover and create nice music loops."}),Object(a.jsxs)("p",{style:{margin:0,padding:0},children:["Want to start creating music? It's here -"," ",Object(a.jsx)(rt.b,{to:"/create",children:Object(a.jsx)(K,{children:"Create"})})]}),Object(a.jsxs)("p",{style:{margin:0,padding:0},children:["Need help? This way -"," ",Object(a.jsx)(rt.b,{to:"/help",children:Object(a.jsx)(K,{children:"Help"})})]}),Object(a.jsx)("p",{style:{margin:0,padding:8},children:"To check out some nice music loops, scroll down and click on the songs"})]})}),Object(a.jsx)(de,{children:Object(a.jsxs)(xe,{flexDirection:"row",justifyContent:"center",alignItems:"center",children:[Object(a.jsx)(ct.a,{icon:it.a,style:e,color:"black"}),Object(a.jsx)(ct.a,{icon:it.a,style:e,color:"black"}),Object(a.jsx)(ct.a,{icon:it.a,style:e,color:"black"})]})})]})},Ut=function(e){var t=e.isAppIntroDisplayed,n=void 0!==t&&t,r=Object(s.useState)([]),u=Object(p.a)(r,2),l=u[0],j=u[1],d=Object(s.useState)(!1),b=Object(p.a)(d,2),h=b[0],x=b[1],O=Object(s.useState)(1),g=Object(p.a)(O,2),m=g[0],v=g[1],y=Object(s.useState)(""),w=Object(p.a)(y,2),k=w[0],S=w[1],C=function(){var e=Object(i.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,jt.a.get("/api/song/posted/".concat(m),{page:1});case 3:if(t=e.sent,(n=t.data).length){e.next=10;break}return S("no more songs to load..."),x(!1),setTimeout((function(){S("")}),2e3),e.abrupt("return");case 10:n.forEach((function(e){var t=ft(e.instruments);e.instruments=t})),j([].concat(Object(f.a)(l),Object(f.a)(n))),x(!1),v(m+1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){C()}),[]);return Object(a.jsxs)(o.a.Fragment,{children:[n&&Object(a.jsx)(Bt,{}),l.map((function(e){return Object(a.jsx)(Mt,{title:e.title,partition:e.partition,musicLines:e.instruments,tempo:e.tempo,creatorName:e.creatorName},e._id)})),h?Object(a.jsx)(ot.Bars,{width:100,height:50,fill:"#000",stroke:"#000"}):k?Object(a.jsx)("p",{children:k}):Object(a.jsx)(Q,{onClick:function(){C()},children:"load more"}),Object(a.jsx)(ve,{height:"100px"})]})},Vt=function(e){var t=Object(s.useState)([]),n=Object(p.a)(t,2),r=n[0],o=n[1],u=Object(s.useState)(!1),l=Object(p.a)(u,2),j=l[0],d=l[1],b=Object(s.useState)(null),h=Object(p.a)(b,2),x=h[0],f=h[1],O=Object(s.useState)(""),g=Object(p.a)(O,2),m=g[0],v=g[1],y=function(){var t=Object(i.a)(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.next=3,jt.a.get("/api/song/creator/".concat(e.user._id));case 3:n=t.sent,(r=n.data)&&(o(r),d(!1));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(s.useEffect)((function(){y()}),[]);var w=function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt.a.delete("/api/song/".concat(t));case 2:n=e.sent,v(n.message),y(),setTimeout((function(){v("")}),1500);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(me,{children:[Object(a.jsx)(Ee,{children:"Load Song"}),j&&Object(a.jsx)(xe,{alignItems:"center",children:Object(a.jsx)(ot.Bars,{width:100,height:50,fill:"#000",stroke:"#000"})}),r.map((function(e){return Object(a.jsx)(F,{selected:x===e._id,onClick:function(){f(e._id)},children:e.title},e._id)})),Object(a.jsx)("div",{children:m&&Object(a.jsx)("p",{children:m})}),x&&Object(a.jsxs)("div",{style:{paddingTop:20},children:[Object(a.jsx)(rt.b,{to:"/create/".concat(x),children:Object(a.jsx)(K,{children:"Load"})}),Object(a.jsx)(K,{onClick:function(){return w(x)},children:"Delete"}),Object(a.jsx)(rt.b,{to:"/",children:Object(a.jsx)(K,{children:"Cancel"})})]})]})},Ft=function(e,t){return jt.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},Rt=function(e,t){return jt.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},zt=function(e){var t=Object(s.useState)(""),n=Object(p.a)(t,2),r=n[0],o=n[1],u=Object(s.useState)(""),l=Object(p.a)(u,2),j=l[0],d=l[1],b=Object(s.useState)(""),h=Object(p.a)(b,2),x=h[0],f=h[1],O=function(){var t=Object(i.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Rt(r,j);case 2:(n=t.sent).message?f(n.message):(e.setUser(n),e.history.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(e){"username"===e.target.name&&o(e.target.value),"password"===e.target.name&&d(e.target.value)};return Object(a.jsx)(me,{children:Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{}),Object(a.jsxs)(xe,{flex:1,children:[Object(a.jsx)(Ee,{children:"Login"}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{children:Object(a.jsx)(L,{htmlFor:"username",children:"Username:"})}),Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(D,{type:"text",name:"username",width:"100%",id:"username",value:r,onChange:g})})]}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{flex:1,children:Object(a.jsx)(L,{htmlFor:"password",children:"Password:"})}),Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(D,{type:"password",name:"password",width:"100%",id:"password",value:j,onChange:g})})]}),Object(a.jsx)(ve,{}),Object(a.jsx)(de,{children:Object(a.jsxs)(xe,{alignItems:"center",children:[x&&Object(a.jsx)(Ve,{children:x}),Object(a.jsx)(K,{onClick:O,children:"Login"}),Object(a.jsx)("p",{children:"No profile yet?"}),Object(a.jsx)(rt.b,{to:"/signup",style:{textDecoration:"none",color:"black"},children:"signup"})]})})]}),Object(a.jsx)(xe,{})]})})},Ht=function(e){var t=Object(s.useState)(""),n=Object(p.a)(t,2),r=n[0],o=n[1],u=Object(s.useState)(""),l=Object(p.a)(u,2),j=l[0],d=l[1],b=Object(s.useState)(""),h=Object(p.a)(b,2),x=h[0],f=h[1],O=function(){var t=Object(i.a)(c.a.mark((function t(n){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(r,j);case 2:(i=t.sent).message?f(i.message):(e.setUser(i),e.history.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(e){"username"===e.target.name&&o(e.target.value),"password"===e.target.name&&d(e.target.value)};return Object(a.jsx)(me,{children:Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{}),Object(a.jsxs)(xe,{flex:1,children:[Object(a.jsx)(Ee,{children:"Signup"}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{children:Object(a.jsx)(L,{htmlFor:"username",children:"Username:"})}),Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(D,{type:"text",name:"username",width:"100%",id:"username",value:r,onChange:g})})]}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{flex:1,children:Object(a.jsx)(L,{htmlFor:"password",children:"Password:"})}),Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(D,{type:"password",name:"password",width:"100%",id:"password",value:j,onChange:g})})]}),Object(a.jsx)(ve,{}),Object(a.jsx)(de,{children:Object(a.jsxs)(xe,{alignItems:"center",children:[x&&Object(a.jsx)(Ve,{children:x}),Object(a.jsx)(K,{onClick:O,children:"Submit"}),Object(a.jsx)("p",{children:"Already have a profile?"}),Object(a.jsx)(rt.b,{to:"/login",style:{textDecoration:"none",color:"black"},children:"login"})]})})]}),Object(a.jsx)(xe,{})]})})},Gt=function(e){var t=Object(s.useState)(""),n=Object(p.a)(t,2),r=n[0],o=n[1],u=function(){var t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jt.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data}));case 2:e.setUser(null),e.history.push("/");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return e.user?Object(a.jsxs)(me,{children:[Object(a.jsx)(de,{children:Object(a.jsx)(xe,{children:Object(a.jsx)(Ee,{children:"Profile"})})}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(U,{src:"https://images.unsplash.com/photo-1502377429547-835a416e4a90?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=667&q=80"})}),Object(a.jsxs)(xe,{justifyContent:"flex-start",flex:3,children:[Object(a.jsxs)("h3",{children:["Hello, ",e.user.username]}),Object(a.jsx)("p",{children:"Are you ready to create some funky beats today?"}),Object(a.jsxs)(de,{children:[Object(a.jsx)(rt.b,{to:"/load-song",children:Object(a.jsx)(K,{children:"Load Song"})}),Object(a.jsx)(K,{onClick:function(){e.user&&!0===e.user.admin?e.history.push("/create-instrument"):(o("Coming soon, stay tuned..."),setInterval((function(){o("")}),2e3))},children:"Create Instrument"}),Object(a.jsx)(K,{onClick:u,children:"Logout"})]}),Object(a.jsx)(de,{children:Object(a.jsx)(xe,{children:r&&Object(a.jsx)("p",{children:r})})})]})]})]}):Object(a.jsxs)(me,{children:[Object(a.jsx)(Ee,{children:"No Profile..."}),Object(a.jsx)(de,{children:Object(a.jsx)(xe,{children:"Please login or signup to access the profile page"})})]})},Wt=n(33),Jt=n(21),qt=function(e){var t=e.component,n=e.user,r=Object(Wt.a)(e,["component","user"]);return Object(a.jsx)(Jt.b,Object(j.a)(Object(j.a)({user:n},r),{},{render:function(e){return n?Object(a.jsx)(t,Object(j.a)(Object(j.a)({user:n},r),e)):Object(a.jsx)(Jt.a,{to:"/"})}}))},Yt=function(e){var t=e.name,n=e.setName,r=e.category,c=e.setCategory,i=e.subCategory,s=e.setSubCategory,u=Ct();return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{flex:1,children:"Name:"}),Object(a.jsx)(xe,{justifyContent:"flex-start",flex:2,children:Object(a.jsx)(D,{width:"160px",type:"text",value:t,onChange:function(e){return n(e.target.value)}})})]}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{flex:1,children:"Category:"}),Object(a.jsx)(xe,{justifyContent:"flex-start",flex:2,children:Object(a.jsx)(M,{name:"category",width:"170px",value:r,onChange:function(e){return c(e.target.value)},children:u.map((function(e,t){return Object(a.jsx)(B,{value:e,children:"default"!==e&&e},t)}))})})]}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{flex:1,children:"Sub-category:"}),Object(a.jsx)(xe,{justifyContent:"flex-start",flex:2,children:Object(a.jsx)(M,{name:"sub-category",width:"170px",value:i,onChange:function(e){return s(e.target.value)},children:St(r).map((function(e,t){return Object(a.jsx)(B,{value:e,children:e},t)}))})})]})]})},Xt=function(e){var t=e.sounds,n=e.colors,r=e.addSound;return Object(a.jsxs)(o.a.Fragment,{children:[t&&t.map((function(e,t){return Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{children:Object(a.jsx)("p",{style:{margin:0,padding:"5px 0"},children:0===t?"Default":"".concat(t)})}),Object(a.jsx)(xe,{children:Object(a.jsx)(V,{backgroundColor:n[t]})}),Object(a.jsx)(xe,{flex:5,children:e.url?Object(a.jsx)(K,{onClick:function(){return t=e.url,void new Audio(t).play();var t},children:e.name}):Object(a.jsx)("p",{style:{margin:0,padding:"5px 18px"},children:"No sound"})})]},t)})),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{flex:2}),Object(a.jsx)(xe,{justifyContent:"flex-start",flex:5,children:Object(a.jsx)(K,{backgroundColor:"#0f0",onClick:r,children:"Add Sound"})})]})]})},Kt=function(e){var t=e.loading,n=e.availableSounds,r=e.selectedSound,c=e.selectSound,i=e.filterName,u=Object(s.useState)("default"),l=Object(p.a)(u,2),j=l[0],d=l[1],b=Object(s.useState)(""),h=Object(p.a)(b,2),x=h[0],f=h[1],O=n.filter((function(e){return(!i||e.name.toLocaleLowerCase().includes(i.toLocaleLowerCase()))&&("default"===j||j===e.category)&&(!x||x===e.subCategory)})),g={margin:2,color:"black",backgroundColor:"white",padding:6,borderColor:"black",borderWidth:1,borderStyle:"solid",borderRadius:"50%",cursor:"pointer"},m=Ct();return t?Object(a.jsx)(xe,{alignItems:"center",children:Object(a.jsx)(ot.Bars,{width:100,height:50,fill:"#000",stroke:"#000"})}):Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{}),Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(_e,{children:"Name"})}),Object(a.jsxs)(xe,{flex:2,flexDirection:"row",justifyContent:"left",children:[Object(a.jsx)(_e,{children:"Category"}),Object(a.jsx)(M,{name:"category",width:"60px",value:j,onChange:function(e){return d(e.target.value)},children:m.map((function(e,t){return Object(a.jsx)(B,{value:e,children:"default"===e?"all":e},t)}))})]}),Object(a.jsxs)(xe,{flex:2,flexDirection:"row",justifyContent:"left",children:[Object(a.jsx)(_e,{children:"Sub-cat."}),Object(a.jsx)(M,{name:"sub-category",width:"60px",value:x,onChange:function(e){return f(e.target.value)},children:St(j).map((function(e,t){return Object(a.jsx)(B,{value:e,children:e||"all"},t)}))})]}),Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(_e,{children:"Pitch"})})]}),O.map((function(e){return Object(a.jsxs)(be,{selected:r&&r.url===e.url,noHoverHighlight:!0,onClick:function(){return c(e)},children:[Object(a.jsx)(xe,{children:Object(a.jsx)(ct.a,{icon:it.f,style:g,onClick:function(){return new Audio(e.url).play()}})}),["name","category","subCategory","pitch"].map((function(t,n){return Object(a.jsx)(xe,{flex:2,children:e[t]},n)}))]},e._id)}))]})},Qt=function(e){var t=e.setView,n=e.fetchData,r=Object(s.useState)(""),u=Object(p.a)(r,2),l=u[0],j=u[1],d=Object(s.useState)(""),b=Object(p.a)(d,2),h=b[0],x=b[1],f=Object(s.useState)(""),O=Object(p.a)(f,2),g=O[0],m=O[1],v=Object(s.useState)(""),y=Object(p.a)(v,2),w=y[0],k=y[1],S=Object(s.useState)(null),C=Object(p.a)(S,2),I=C[0],T=C[1],P=Object(s.useState)(""),N=Object(p.a)(P,2),A=N[0],E=N[1],_=function(){var e=Object(i.a)(c.a.mark((function e(){var r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&h&&g){e.next=5;break}return U("Please chose a name and select categories"),e.abrupt("return");case 5:if(!(l.length<5)){e.next=9;break}U("The sound name must be at least 5 char."),e.next=12;break;case 9:if(I){e.next=12;break}return U("please select a file to upload"),e.abrupt("return");case 12:return(r=new FormData).append("sounds",I),e.next=16,jt.a.post("/api/sound/upload",r);case 16:return i=e.sent,e.next=19,jt.a.post("/api/sound",{name:l,category:h,subCategory:g,pitch:w,url:i.data.secure_url});case 19:if(!(a=e.sent).message){e.next=23;break}return U(a.message),e.abrupt("return");case 23:t("ADD"),n();case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=Ct(),U=function(e){E(e),setInterval((function(){E("")}),3e3)};return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{children:"Select file:"}),Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(D,{id:"file",name:"file",type:"file",multiple:"false",onChange:function(e){var t=e.target.files[0];T(t)}})})]}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{children:"Name:"}),Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(D,{type:"text",value:l,onChange:function(e){return j(e.target.value)}})})]}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{children:"Category:"}),Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(M,{name:"category",onChange:function(e){return x(e.target.value)},children:L.map((function(e,t){return Object(a.jsx)(B,{value:e,children:"default"!==e&&e},t)}))})})]}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{children:"Sub-Category:"}),Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(M,{name:"sub-category",onChange:function(e){return m(e.target.value)},children:St(h).map((function(e,t){return Object(a.jsx)(B,{value:e,children:e},t)}))})})]}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{children:"Pitch (optional):"}),Object(a.jsx)(xe,{flex:2,children:Object(a.jsx)(D,{type:"text",value:w,onChange:function(e){return k(e.target.value)}})})]}),Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{}),Object(a.jsx)(xe,{flex:2,children:I&&I.name})]}),Object(a.jsx)(de,{children:Object(a.jsx)(xe,{children:A&&A})}),Object(a.jsx)(de,{children:Object(a.jsx)(xe,{flex:1,children:Object(a.jsx)(K,{onClick:_,children:"Create Sound"})})})]})},$t="ADD",Zt="UPLOAD",en=function(e){var t=e.switchToOverview,n=e.availableSounds,r=e.selectedSound,c=e.selectSound,i=e.addSound,u=e.loading,l=e.fetchData,j=e.displayMessage,d=Object(s.useState)($t),b=Object(p.a)(d,2),h=b[0],x=b[1],f=Object(s.useState)(""),O=Object(p.a)(f,2),g=O[0],m=O[1];Object(s.useEffect)((function(){c(null)}),[]);return Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{flexDirection:"row",justifyContent:"left",children:Object(a.jsx)(Ee,{children:"Add Sound"})}),Object(a.jsx)(xe,{flexDirection:"row",justifyContent:"left",children:Object(a.jsx)(D,{type:"text",width:"140px",value:g,placeholder:"Search...",onChange:function(e){return m(e.target.value)}})}),Object(a.jsxs)(xe,{flex:2,flexDirection:"row",justifyContent:"flex-end",children:[Object(a.jsx)(K,{backgroundColor:"#0f0",onClick:function(){r&&r.name&&r.url?i({id:r._id,name:r.name,color:"#ddd",url:r.url}):j("Please select a sound first")},children:"Add"}),Object(a.jsx)(K,{backgroundColor:"#f00",onClick:t,children:"Cancel"}),h===$t&&Object(a.jsx)(K,{onClick:function(){x(Zt)},children:"Upload own sound"}),h===Zt&&Object(a.jsx)(K,{onClick:function(){x($t)},children:"Search sound"})]})]}),Object(a.jsx)(de,{children:Object(a.jsxs)(xe,{flex:1,children:[h===Zt&&Object(a.jsx)(Qt,{setView:x,fetchData:l}),h===$t&&Object(a.jsx)(Kt,{loading:u,availableSounds:n,selectedSound:r,selectSound:c,filterName:g})]})})]})},tn=n(133),nn="OVERVIEW",rn="ADD_SOUND",cn=function(e){var t=Object(s.useState)(""),n=Object(p.a)(t,2),r=n[0],u=n[1],l=Object(s.useState)(""),j=Object(p.a)(l,2),d=j[0],b=j[1],h=Object(s.useState)(""),x=Object(p.a)(h,2),O=x[0],g=x[1],m=Object(s.useState)(""),v=Object(p.a)(m,2),y=v[0],w=v[1],k=Object(s.useState)([{id:ht.DEFAULT_SOUND_ID}]),S=Object(p.a)(k,2),C=S[0],I=S[1],T=Object(s.useState)(nn),P=Object(p.a)(T,2),N=P[0],A=P[1],E=Object(s.useState)(!1),_=Object(p.a)(E,2),D=_[0],L=_[1],M=Object(s.useState)([]),B=Object(p.a)(M,2),U=B[0],V=B[1],F=Object(s.useState)(null),R=Object(p.a)(F,2),z=R[0],H=R[1],G=Object(s.useState)("start"),W=Object(p.a)(G,2),J=W[0],q=W[1],Y=Object(s.useState)(["#ddd"]),X=Object(p.a)(Y,2),Q=X[0],Z=X[1],ee=Object(s.useState)("#aaaaaa"),te=Object(p.a)(ee,2),ne=te[0],re=te[1],ce=Object(s.useState)("#555555"),ie=Object(p.a)(ce,2),ae=ie[0],se=ie[1],oe=Object(s.useState)("#aaaaaa"),ue=Object(p.a)(oe,2),le=ue[0],je=ue[1];Object(s.useEffect)((function(){be()}),[ne,ae]);var be=function(){var e=Object(f.a)(Q),t=C.length;if(1!==t){if(t>=2&&(e[1]=ne),t>=3&&(e[t-1]=ae),t>3)for(var n=function(e,t,n){function r(e){var t,n,r,c=e.length>6?e.substr(1,e.length-1):e;return c.length>3?(t=c.substr(0,2),n=c.substr(2,2),r=c.substr(4,2)):(t=c.substr(0,1)+c.substr(0,1),n=c.substr(1,1)+c.substr(1,1),r=c.substr(2,1)+c.substr(2,1)),[parseInt(t,16),parseInt(n,16),parseInt(r,16)]}for(var c=function(e,t,n){return n=n||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e},i=r(e),a=r(t),s=[],o=100/(n+1),u=[a[0]-i[0],a[1]-i[1],a[2]-i[2]],l=0;l<n;l++){var j=c(u[0]>0?Math.round(u[0]/100*(o*(l+1))).toString(16):Math.round(i[0]+u[0]/100*(o*(l+1))).toString(16),2),d=c(u[1]>0?Math.round(u[1]/100*(o*(l+1))).toString(16):Math.round(i[1]+u[1]/100*(o*(l+1))).toString(16),2),b=c(u[2]>0?Math.round(u[2]/100*(o*(l+1))).toString(16):Math.round(i[2]+u[2]/100*(o*(l+1))).toString(16),2);s[l]=["#",j,d,b].join("")}return s}(ne,ae,t-3),r=2;r<t-1;r++)e[r]=n[r-2];Z(e)}},he=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(rn),e.next=3,fe();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(i.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,jt.a.get("/api/sound");case 3:t=e.sent,(n=t.data)&&(V(n),L(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(e){w(e),setInterval((function(){w("")}),2e3)},Oe=function(){u(""),b(""),g(""),I([{id:ht.DEFAULT_SOUND_ID}])},ge=function(){var t=Object(i.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&d&&O){t.next=3;break}return pe("Please enter the fields: ".concat(r?"":"Name"," ").concat(d?"":"Category"," ").concat(O?"":"Sub-category")),t.abrupt("return");case 3:if(!(C.length<2)){t.next=6;break}return pe("You must select at least 1 sound"),t.abrupt("return");case 6:return t.next=8,jt.a.post("/api/instrument",{name:r,category:d,subCategory:O,sounds:C.map((function(e){return e.id||null})),colors:Q,creator:e.user._id,private:!1});case 8:(n=t.sent).message?pe(n.message):200===n.status&&(pe("Success! You just created a new instrument!"),Oe());case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)(me,{children:[Object(a.jsx)(de,{children:y&&Object(a.jsx)(Ve,{children:y})}),N===rn&&Object(a.jsx)(en,{switchToOverview:function(){A(nn)},availableSounds:U,selectedSound:z,selectSound:function(e){H(e)},loading:D,addSound:function(e){if(e.url,e.color){var t={id:e.id,name:e.name,url:e.url,pitch:e.pitch||""},n=[].concat(Object(f.a)(C),[t]);I(n),Z([].concat(Object(f.a)(Q),["#ddd"])),A(nn)}else pe("Please select or upload a sound and pick a color")},fetchData:fe,displayMessage:pe}),N===nn&&Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsxs)(de,{children:[Object(a.jsx)(xe,{flex:1,children:Object(a.jsx)(Ee,{children:"Create Instrument"})}),Object(a.jsxs)(xe,{flex:2,flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-end",children:[Object(a.jsx)(K,{onClick:ge,children:"Save Instrument"}),Object(a.jsx)(K,{onClick:Oe,children:"Reset"}),Object(a.jsx)(K,{onClick:function(){},children:"Help"})]})]}),Object(a.jsxs)(de,{children:[Object(a.jsxs)(xe,{flex:2,children:[Object(a.jsx)(Yt,{name:r,setName:u,category:d,setCategory:b,subCategory:O,setSubCategory:g}),Object(a.jsx)(de,{children:Object(a.jsx)(xe,{children:Object(a.jsx)("h3",{children:"Sounds:"})})}),Object(a.jsx)(de,{children:Object(a.jsx)(xe,{children:Object(a.jsx)(Xt,{sounds:C,colors:Q,addSound:he})})})]}),Object(a.jsxs)(xe,{flex:1,children:[Object(a.jsx)(tn.a,{color:le,onChangeComplete:function(e){je(e.hex),"start"===J?re(e.hex):"end"===J&&se(e.hex)}}),Object(a.jsx)(de,{children:Object(a.jsxs)(xe,{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",children:[Object(a.jsx)($,{selected:"start"===J,onClick:function(){return q("start")},children:"Pick start color"}),Object(a.jsx)($,{selected:"end"===J,onClick:function(){return q("end")},children:"Pick end color"})]})})]})]})]})]})},an=function(){return Object(a.jsxs)(me,{children:[Object(a.jsx)(de,{children:Object(a.jsx)(xe,{children:Object(a.jsx)(Ee,{children:"Help"})})}),Object(a.jsx)(de,{children:Object(a.jsx)(xe,{children:Object(a.jsx)("p",{children:'The 2 main sections of the app are "Listen", where you can browse, check and play the music loops that are created, and "Create" where you can create your own loops.'})})}),Object(a.jsx)(de,{children:Object(a.jsxs)(xe,{children:[Object(a.jsx)(_e,{children:"Create song"}),Object(a.jsx)("p",{children:"In the song creation space you see the music grid which is composed of notes represented by gray squares, and a control panel at the bottom:"}),Object(a.jsx)(de,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)(xe,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)("img",{src:"images/music-grid-1.png",alt:"Music grid example"})})}),Object(a.jsx)("p",{children:"On the music grid, the horizontal axis is the time, the vertical is the array of instruments that are available to you. Let's first try the default instruments."}),Object(a.jsx)("p",{children:"By clicking on a square, it changes color as you activate a sound to be played at a certain time in the loop. For example if you click on the first square of the kick, a kick will be played at the beginning."}),Object(a.jsx)(de,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)(xe,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)("img",{src:"images/music-grid-2.png",alt:"Music grid example"})})}),Object(a.jsx)("p",{children:"Some instruments have only one sound, some have several, clicking several times on the same square switches between different sounds. Let's create a basic loop by switching on the notes (1 click) to form the following pattern:"}),Object(a.jsx)(de,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)(xe,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)("img",{src:"images/music-grid-3.png",alt:"Music grid example"})})}),Object(a.jsx)("p",{children:"Press play and the magic happens! The notes are read as a sequence, at a 120 tempo, 8 squares represent a second, so our loop is 1 second long."}),Object(a.jsx)("p",{children:'To make the loop longer, press the "+" button next to "bars" and the grid extends. When the grid is longer than 16 notes, it gets spread on several pages that you can check and select using the page selector:'}),Object(a.jsx)(de,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)(xe,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)("img",{src:"images/music-pages-selectors.png",alt:"Page selectors example"})})}),Object(a.jsx)("p",{children:'You can add and remove instruments (grid lines) using the menu. Once you are happy with your creation, click on "save" to keep it and share it. To save, you will need to create a profile, but this takes a couple of seconds. That\'s about it!'})]})}),Object(a.jsx)(de,{children:Object(a.jsx)(xe,{children:Object(a.jsx)(_e,{children:"Have fun!"})})})]})},sn={textDecoration:"none",color:"black"},on={textDecoration:"none",color:"black",padding:"0 8px"},un=function(e){return Object(a.jsx)(fe,{children:Object(a.jsxs)(ge,{flexDirection:"row",justifyContent:"space-between",children:[Object(a.jsx)(rt.b,{style:sn,to:"/",children:Object(a.jsx)(Ue,{children:"Boum-Tchak!"})}),Object(a.jsxs)("div",{style:{display:"flex",paddingRight:20,alignItems:"center"},children:[Object(a.jsx)(rt.b,{style:sn,to:"/listen",children:Object(a.jsx)(Q,{children:"Listen"})}),Object(a.jsx)(rt.b,{style:sn,to:"/create",children:Object(a.jsx)(Q,{children:"Create"})}),e.user?Object(a.jsx)(rt.b,{style:sn,to:"/profile",children:Object(a.jsx)(Q,{children:"Profile"})}):Object(a.jsxs)(o.a.Fragment,{children:[Object(a.jsx)(rt.b,{style:sn,to:"/signup",children:Object(a.jsx)(Q,{children:"Signup"})}),Object(a.jsx)(rt.b,{style:on,to:"/login",children:"Login"})]}),Object(a.jsx)(rt.b,{style:on,to:"/help",children:"Help"})]})]})})},ln=(n(279),function(e){Object(h.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={user:e.props.user},e.setUser=function(t){e.setState({user:t})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(Oe,{children:[Object(a.jsx)(un,{user:this.state.user}),Object(a.jsxs)(ge,{children:[Object(a.jsx)(pe,{}),Object(a.jsxs)(Jt.d,{children:[Object(a.jsx)(Jt.b,{exact:!0,path:"/create",render:function(t){return Object(a.jsx)(Et,Object(j.a)({user:e.state.user},t))}}),Object(a.jsx)(Jt.b,{exact:!0,path:"/help",render:function(e){return Object(a.jsx)(an,Object(j.a)({},e))}}),Object(a.jsx)(Jt.b,{exact:!0,path:"/create/:id",render:function(t){return Object(a.jsx)(Et,Object(j.a)({user:e.state.user},t))}}),Object(a.jsx)(Jt.b,{exact:!0,path:"/login",render:function(t){return e.state.user?Object(a.jsx)(Jt.a,{to:"/"}):Object(a.jsx)(zt,Object(j.a)({setUser:e.setUser},t))}}),Object(a.jsx)(Jt.b,{exact:!0,path:"/signup",render:function(t){return e.state.user?Object(a.jsx)(Jt.a,{to:"/"}):Object(a.jsx)(Ht,Object(j.a)({setUser:e.setUser},t))}}),Object(a.jsx)(qt,{exact:!0,path:"/profile",user:this.state.user,setUser:this.setUser,component:Gt}),Object(a.jsx)(qt,{exact:!0,path:"/create-instrument",user:this.state.user,setUser:this.setUser,component:cn}),Object(a.jsx)(Jt.b,{exact:!0,path:"/",render:function(e){return Object(a.jsx)(Ut,Object(j.a)({isAppIntroDisplayed:!0},e))}}),Object(a.jsx)(Jt.b,{exact:!0,path:"/listen",render:function(e){return Object(a.jsx)(Ut,Object(j.a)({isAppIntroDisplayed:!1},e))}}),Object(a.jsx)(Jt.b,{exact:!0,path:"/load-song",render:function(t){return e.state.user?Object(a.jsx)(Vt,Object(j.a)({user:e.state.user},t)):Object(a.jsx)(Jt.a,{to:"/"})}})]})]})]})}}]),n}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var jn="SET_TEMPO",dn="SET_TIMEOUT_TEMPO",bn="SET_IS_NOTE_PLAYED_ON_CLICK",hn="SET_IS_ADD_INSTRUMENT_VISIBLE",xn="SET_IS_SAVE_SONG_VISIBLE",fn="SET_IS_PLAYING",pn="SET_PARTITION",On="SET_INSTRUMENTS",gn="SET_COPIED_PARTITION_BAR",mn="SET_ANIMATED_NOTES",vn="SET_CURRENT_PAGE",yn="SET_PAGES",wn=function(e,t){var n=t.payload;switch(t.type){case jn:return Object(j.a)(Object(j.a)({},e),{},{tempo:n});case dn:return Object(j.a)(Object(j.a)({},e),{},{timeoutTempo:n});case hn:return Object(j.a)(Object(j.a)({},e),{},{isAddInstrumentVisible:n});case bn:return Object(j.a)(Object(j.a)({},e),{},{isNotePlayedOnClick:n});case xn:return Object(j.a)(Object(j.a)({},e),{},{isSaveSongVisible:n});case fn:return Object(j.a)(Object(j.a)({},e),{},{isPlaying:n});case On:return Object(j.a)(Object(j.a)({},e),{},{instruments:n});case pn:return Object(j.a)(Object(j.a)({},e),{},{partition:n});case gn:return Object(j.a)(Object(j.a)({},e),{},{copiedPartitionBar:n});case mn:return Object(j.a)(Object(j.a)({},e),{},{animatedNotes:n});case vn:return Object(j.a)(Object(j.a)({},e),{},{currentPage:n});case yn:return Object(j.a)(Object(j.a)({},e),{},{pages:n});default:return e}},kn=function(e){var t={isPLaying:!1,instruments:[],partition:[],copiedPartitionBar:null,partitionLength:ht.START_PARTITION_LENGTH,maxPartitionLength:ht.MAX_PARTITION_LENGTH,tempo:ht.DEFAULT_TEMPO,timeoutTempo:ht.DEFAULT_TIMEOUT,isNotePlayedOnClick:!0,isAddInstrumentVisible:!1,isSaveSongVisible:!1,animatedNotes:[],currentPage:1,pages:[1]},n=Object(s.useReducer)(wn,t),r=Object(p.a)(n,2),c=r[0],i=r[1],o=function(e){i({type:On,payload:e})},u=function(e){i({type:pn,payload:e})};return Object(a.jsx)(tt.Provider,{value:{tempo:c.tempo,isPlaying:c.isPlaying,instruments:c.instruments,partition:c.partition,copiedPartitionBar:c.copiedPartitionBar,timeoutTempo:c.timeoutTempo,isNotePlayedOnClick:c.isNotePlayedOnClick,isAddInstrumentVisible:c.isAddInstrumentVisible,isSaveSongVisible:c.isSaveSongVisible,animatedNotes:c.animatedNotes,currentPage:c.currentPage,pages:c.pages,setTempo:function(e){i({type:jn,payload:e})},setIsPlaying:function(e){i({type:fn,payload:e})},setInstruments:o,setPartition:u,copyOneBar:function(e){var t=[],n=4*e,r=n+3;c.partition.forEach((function(e){for(var c=[],i=n;i<=r;i++)c.push(e[i]);t.push(c)})),i({type:gn,payload:t})},pasteOneBar:function(e){var t=[],n=c.partition[0].length,r=4*e,a=r+3;c.partition.forEach((function(e,i){for(var s=[],o=0,u=0;u<n;u++)u>=r&&u<=a?(s.push(c.copiedPartitionBar[i][0+o]),o++):s.push(e[u]);t.push(s)})),i({type:pn,payload:t})},setTimeoutTempo:function(e){i({type:dn,payload:e})},setIsNotePlayedOnClick:function(e){i({type:bn,payload:e})},toggleIsAddInstrumentVisible:function(){var e=!c.isAddInstrumentVisible;i({type:hn,payload:e})},setIsSaveSongVisible:function(e){i({type:xn,payload:e})},deleteLine:function(e){var t=Object(f.a)(c.partition),n=Object(f.a)(c.instruments);t.splice(e,1),n.splice(e,1),u(t),o(n)},setAnimatedNotes:function(e){i({type:mn,payload:e})},setCurrentPage:function(e){i({type:vn,payload:e})},setPages:function(e){i({type:yn,payload:e})}},children:e.children})};(function(){var e=Object(i.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt.a.get("/api/auth/loggedin");case 2:t=e.sent,n=t.data,l.a.render(Object(a.jsx)(rt.a,{children:Object(a.jsx)(kn,{children:Object(a.jsx)(ln,{user:n})})}),document.getElementById("root"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[280,1,2]]]);
//# sourceMappingURL=main.ab0847a6.chunk.js.map