{"version":3,"sources":["context/GlobalContext.jsx","ui-kit/elements.js","ui-kit/buttons.js","ui-kit/layout.js","ui-kit/typography.js","ui-kit/musicGrid.js","components/CreateSong/Note.jsx","components/CreateSong/CreateLine.jsx","components/Shared/PageCircles.jsx","components/CreateSong/PlayControls.jsx","components/CreateSong/AdvControls.jsx","components/CreateSong/AddInstrument.jsx","components/CreateSong/SaveSong.jsx","components/CreateSong/ToolsLine.jsx","config/config.js","components/utils/instruments.js","components/utils/playMechanics.js","components/utils/categories.js","components/utils/getRandomName.js","components/CreateSong/CreateSong.jsx","components/DisplaySong/Note.jsx","components/DisplaySong/DisplayLine.jsx","components/DisplaySong/DisplaySong.jsx","components/InfoPages/AppIntro.jsx","components/DisplaySong/SongsList.jsx","components/LoadSong/LoadSong.jsx","components/Auth/utils.js","components/Auth/Login.jsx","components/Auth/Signup.jsx","components/Auth/Profile.jsx","components/Auth/ProtectedRoute.jsx","components/CreateInstrument/Characteristics.jsx","components/CreateInstrument/InstrumentSoundsList.jsx","components/CreateInstrument/AvailableSoundsList.jsx","components/CreateInstrument/CreateSound.jsx","components/CreateInstrument/AddSound.jsx","components/CreateInstrument/CreateInstrument.jsx","components/utils/gradientBuilder.js","components/InfoPages/Help.jsx","components/Header/Header.jsx","App.jsx","serviceWorker.js","context/GlobalReducer.jsx","context/types.js","context/GlobalState.jsx","index.js"],"names":["globalContext","createContext","ControlsPad","styled","div","Tempo","span","ExpandedMenuItem","SongPostPlay","SongPost","Input","input","props","width","Label","form","label","Select","select","Option","option","ProfilePic","img","src","ColorSquare","backgroundColor","SelectableText","p","selected","Button","button","hoverColor","PlayButton","StopButton","MenuButton","CategoryBtn","DeleteButton","SmallEditBtn","color","AverageEditBtn","margin","padding","Row","SelectableRow","noHoverHighlight","AppIntroLayout","Column","flexDirection","alignItems","justifyContent","flex","HeaderLayout","BackHeader","MainScreen","Wrapper","maxWidth","PageLayout","BlankSpace","height","Heading2","h2","Heading3","h3","SongHeader","SongTitle","b","LineLabel","Text","HeaderTitle","h1","Alert","MusicGrid","Line","notesPlayingAnimation","keyframes","StyledNote","highlighted","clickable","animated","PageCircle","BarIndicator","Note","notePosition","status","toggleActiveNote","linePosition","sounds","pitch","onClick","CreateLine","notes","noteColors","pitches","highlightedNote","animatedNotes","currentPage","lenghtOfPage","useContext","isRemoveInstrumentVisible","deleteLine","firstIndex","lastIndex","displayNotes","length","map","n","i","key","includes","PageCircles","selectPage","pages","createMode","el","iconStyle","PlayControls","onPlayBtnPress","onStopBtnPress","addOneBar","removeOneBar","numberOfBars","tempo","setTempo","isPlaying","setTimeoutTempo","isNotePlayedOnClick","setIsNotePlayedOnClick","icon","faStop","style","faPlay","AdvControls","toggleIsSaveSongVisible","user","to","AddInstrument","addInstrument","useState","newInstruments","setNewInstruments","searchCategory","setSearchCategory","loading","setLoading","uniqueCategories","setUniqueCategories","toggleIsAddInstrumentVisible","fetchInstrumentsData","searchCat","shouldCreateBtns","a","searchParams","params","category","axios","get","data","allCategories","instrument","newUniqueCategories","Set","useEffect","cat","selectCategory","fill","stroke","name","subCategory","SaveSong","saveTheSong","title","setTitle","Fragment","type","placeholder","value","onChange","e","target","ToolsLine","totalLength","lengthOfPage","isLastPage","copyOneBar","copiedPartitionBar","pasteOneBar","barsPerPage","displayBarsLength","maxLength2","barIndex","push","config","START_PARTITION_LENGTH","MAX_PARTITION_LENGTH","DEFAULT_TEMPO","DEFAULT_TIMEOUT","DEFAULT_SOUND_ID","preparePartition","instruments","partition","forEach","emptyLine","prepareInstruments","prepareToneJsInstrument","prepareSamplesInstrument","colors","id","_id","isToneJs","lineSounds","linePitches","url","Audio","playBeat","beatNumber","partitionLine","soundIndex","synth","Tone","toDestination","now","triggerAttackRelease","sound","pause","currentTime","play","SOUND_CATEGORIES","SUB_CATEGORIES","default","Drums","Bass","Synth","Guitar","Piano","Brass","Strings","Flute","Effects","Voice","Other","getSubCategories","getCategories","getRandomName","first","second","randomIndex","Math","floor","random","CreateSong","setHighlightedNote","setAnimatedNotes","bottomMessage","setBottomMessage","setCurrentPage","setPages","musicPlaying","React","useRef","window","innerWidth","setIsPlaying","timeoutTempo","setInstruments","setPartition","isAddInstrumentVisible","toggleIsRemoveInstrumentVisible","isSaveSongVisible","setIsSaveSongVisible","songIdToLoad","match","prepareLoadedSong","prepareNewMusic","stopPlaying","preparedInstruments","newPartition","loadedSong","numberOfPages","ceil","newPages","clearInterval","current","col","row","updatedPartition","depth","newIndex","songInstruments","songData","creator","undefined","creatorName","username","posted","post","setTimeout","instr","newPartitionRow","preparedNewInstrument","minHeight","display","counter","setInterval","nextPage","playMusic","pagesCalculation","pagesUpdate","concat","last","splice","pagesCalc","slice","isAnimated","DisplayLine","iconsStyle","border","borderRadius","zIndex","DisplaySong","intervalId","updatedPages","musicLines","line","AppIntro","chevronStyle","paddingTop","faChevronDown","SongsList","isAppIntroDisplayed","songs","setSongs","message","setMessage","loadSongs","page","loadedSongs","song","LoadSong","songsList","setSongsList","selectedSong","setSelectedSong","fetchData","deleteSong","songId","delete","response","signup","password","then","catch","err","login","Login","setUsername","setPassword","handleLogin","setUser","history","handleChange","htmlFor","textDecoration","Signup","handleSignup","Profile","onLogoutBtnClick","admin","ProtectedRoute","Component","component","rest","render","Characteristics","setName","setCategory","setSubCategory","instrumentCategories","subCat","InstrumentSoundsList","addSound","AvailableSoundsList","availableSounds","selectedSound","selectSound","filterName","filterCategory","setFilterCategory","filterSubCategory","setFilterSubCategory","filteredSounds","filter","toLocaleLowerCase","volumeBtnStyle","borderColor","borderWidth","borderStyle","cursor","soundCategories","faVolumeUp","columnTitle","index","CreateSound","setView","soundName","setSoundName","soundCategory","setSoundCategory","soundSubCategory","setSoundSubCategory","soundPitch","setSoundPitch","soundFile","setSoundFile","uploadSound","displayMessage","uploadData","FormData","append","uploadedSound","secure_url","createdSound","mes","multiple","event","selectedFile","files","views","AddSound","switchToOverview","view","setFilterName","CreateInstrument","setSounds","setAvailableSounds","setSelectedSound","editedColor","setEditedColor","setColors","startColor","setStartColor","endColor","setEndColor","pickerColor","setPickerColor","updateSoundsColors","updatedColors","l","gradient","value1","value2","steps","processHEX","val","r","g","hex","substr","parseInt","pad","z","Array","join","val1RGB","val2RGB","stepsPerc","valClampRGB","clampedR","round","toString","clampedG","clampedB","gradientBuilder","openAddSoundSection","resetInstrument","saveInstrument","private","createdInstrument","newSound","updatedSounds","onChangeComplete","Help","alt","linkStyle","textLinkStyle","Header","paddingRight","App","state","setState","this","exact","path","Boolean","location","hostname","action","payload","GlobalState","initialState","isPLaying","partitionLength","maxPartitionLength","useReducer","GlobalReducer","dispatch","setIsRemoveInstrumentVisible","GlobalContext","Provider","newCopiedBar","startIndex","endIndex","newLine","offset","newValue","lineNumber","updatedInstruments","children","authResponse","ReactDOM","document","getElementById","renderApp","navigator","serviceWorker","ready","registration","unregister","error","console"],"mappings":"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","file":"static/js/main.5632e830.chunk.js","sourcesContent":["import { createContext } from \"react\";\n\nexport const globalContext = createContext();\n\nexport default globalContext;\n","import styled from \"styled-components\";\n\nexport const ControlsPad = styled.div`\n  padding: 10px;\n`;\n\nexport const Tempo = styled.span`\n  font-size: 16px;\n`;\n\nexport const ExpandedMenuItem = styled.div`\n  margin: auto;\n  min-width: 400px;\n  max-width: 700px;\n  position: absolute;\n  z-index: 10;\n  top: 150px;\n  box-shadow: 3px 3px 5px #bbb;\n  background-color: white;\n  border: solid 1px black;\n  border-radius: 3px;\n  padding: 10px;\n`;\n\nexport const SongPostPlay = styled.div`\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  margin-top: -8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  visibility: hidden;\n`;\n\nexport const SongPost = styled.div`\n  position: relative;\n  margin: 30px 10px;\n  border: solid 1px black;\n  border-radius: 10px;\n  padding-top: 10px;\n  width: 80%;\n  &:hover ${SongPostPlay} {\n    visibility: visible;\n  }\n`;\n\nexport const Input = styled.input`\n  height: 24px;\n  width: ${(props) => props.width || \"100px\"};\n  margin: 10px;\n  border: 1px solid black;\n  border-radius: 4px;\n`;\n\nexport const Form = styled.form`\n  border: solid black 1px;\n  width: ${(props) => (props.width ? `${props.width}px` : \"100%\")};\n`;\n\nexport const Label = styled.label`\n  margin: 0px 5px;\n`;\n\nexport const Select = styled.select`\n  margin: 8px;\n  height: 26px;\n  width: ${(props) => props.width || \"110px\"};\n`;\n\nexport const Option = styled.option`\n  font-size: 12px;\n`;\n\nexport const ProfilePic = styled.img`\n  src: ${(props) => props.src}\n  height: 260px;\n  width: 260px;\n  object-fit: cover;\n  padding: 10px;\n`;\n\nexport const ColorSquare = styled.div`\n  height: 24px;\n  width: 24px;\n  margin: 4px;\n  border: solid black 1px;\n  background-color: ${(props) => props.backgroundColor || \"white\"};\n`;\n\nexport const SelectableText = styled.p`\n  padding: 3px;\n  margin: 0px;\n  cursor: pointer;\n  color: ${(props) => (props.selected ? \"white\" : \"black\")};\n  background-color: ${(props) => (props.selected ? \"black\" : \"white\")};\n  &:hover {\n    background-color: black;\n    color: white;\n  }\n`;\n","import styled from \"styled-components\";\n\nexport const Button = styled.button`\n  height: 36px;\n  min-width: 36px;\n  margin: 8px;\n  padding: 0px 10px;\n  border-radius: 18px;\n  border: solid 1px black;\n  background-color: ${(props) => props.backgroundColor || \"white\"};\n  font-size: 16px;\n  box-shadow: 3px 3px 5px #bbb;\n  cursor: pointer;\n  transition: background-color 0.7s, color 0.7s;\n  &:hover {\n    background-color: ${(props) => props.hoverColor || \"black\"};\n    color: white;\n  }\n`;\n\nexport const PlayButton = styled(Button)`\n  width: 60px;\n  background-color: #0f0;\n  color: #fff;\n  font-size: 20px;\n  font-weight: bold;\n`;\n\nexport const StopButton = styled(Button)`\n  width: 60px;\n  background-color: #f00;\n  color: #fff;\n  font-size: 20px;\n  font-weight: bold;\n`;\n\nexport const MenuButton = styled.div`\n  margin: 8px;\n  border: solid 2px black;\n  border-radius: 5px;\n  padding: 6px 12px;\n  color: #000;\n  text-decoration: none;\n  cursor: pointer;\n  transition: background-color 0.7s, color 0.7s;\n  &:hover {\n    background-color: black;\n    color: white;\n  }\n`;\n\nexport const CategoryBtn = styled.button`\n  height: 30px;\n  min-width: 40px;\n  margin: 8px;\n  padding: 0px 10px;\n  border-radius: 15px;\n  border: solid 1px black;\n  color: ${(props) => (props.selected ? \"white\" : \"black\")};\n  background-color: ${(props) => (props.selected ? \"black\" : \"white\")};\n  font-size: 12px;\n  &:hover {\n    background-color: black;\n    color: white;\n    opacity: ${(props) => (props.selected ? 0.5 : 1)};\n  }\n`;\n\nexport const DeleteButton = styled.p`\n  line-height: 10px;\n  padding: 3px;\n  margin: 5px;\n  font-size: 25px;\n  color: red;\n  font-weight: bold;\n  cursor: pointer;\n  &:hover {\n    background-color: red;\n    color: white;\n  }\n`;\n\nexport const IconButton = styled.button`\n  color: black;\n  backgroundcolor: white;\n  padding: 6px;\n  bordercolor: black;\n  border: 1px solid black;\n  border-radius: 50%;\n  cursor: pointer;\n`;\n\nexport const SmallEditBtn = styled.button`\n  color: ${(props)=> props.color || '#aaa'};\n  border: 1px solid #aaa;\n  margin: 4px 4px 4px 8px;\n  background-color: #fff;\n  border-radius: 4px;\n  font-size: 12px;\n  &:hover {\n    background-color: #aaa;\n    color: #fff;\n  }\n`;\n\nexport const AverageEditBtn = styled.button`\n  color: ${(props)=> props.color || '#888'};\n  border: 1px solid #aaa;\n  margin: ${(props)=> props.margin || '4px 4px 4px 0px'};\n  padding: ${(props)=> props.padding || 'default'};\n  background-color: #fff;\n  border-radius: 4px;\n  font-size: 14px;\n  transition: background-color 0.5s, color 0.5s;\n  &:hover {\n    background-color: #888;\n    color: #fff;\n  }\n`;\n","import styled from \"styled-components\";\n\nexport const Row = styled.div`\n  padding: ${(props) => props.padding || 0};\n  display: flex;\n  width: 100%;\n`;\n\nexport const SelectableRow = styled(Row)`\n  padding: ${(props) => props.padding || 0};\n  cursor: pointer;\n  color: ${(props) => (props.selected ? \"white\" : \"black\")};\n  background-color: ${(props) => (props.selected ? \"black\" : \"white\")};\n  &:hover {\n    background-color: ${(props) =>\n      props.noHoverHighlight && !props.selected ? \"white\" : \"black\"};\n    color: ${(props) =>\n      props.noHoverHighlight && !props.selected ? \"black\" : \"white\"};\n    opacity: ${(props) => (props.selected ? 0.5 : 1)};\n  }\n`;\n\nexport const AppIntroLayout = styled.div`\n  min-height: 60vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\n\nexport const Column = styled.div`\n  display: flex;\n  flex-direction: ${(props) => props.flexDirection || \"column\"};\n  justify-content: center;\n  min-height: 20px;\n  padding: ${(props) => props.padding || 0};\n  align-items: ${(props) => props.alignItems || \"flex-start\"};\n  justify-content: ${(props) => props.justifyContent || \"center\"};\n  flex: ${(props) => props.flex || 1};\n`;\n\nexport const HeaderLayout = styled.div`\n  height: 90px;\n  width: 100vw;\n  z-index: 10;\n  background-color: white;\n  display: flex;\n  position: fixed;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 4px 4px 5px #eee;\n`;\n\nexport const BackHeader = styled.div`\n  height: 110px;\n`;\n\nexport const MainScreen = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nexport const Wrapper = styled.div`\n  display: flex;\n  flex-direction: ${(props) => props.flexDirection || \"column\"};\n  align-items: ${(props) => props.alignItems || \"center\"};\n  justify-content: ${(props) => props.justifyContent || \"flex-start\"};\n  width: 100vw;\n  max-width: ${(props) => props.maxWidth || \"900px\"};\n`;\n\nexport const PageLayout = styled.div`\n  width: 90%;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flexStart;\n`;\n\nexport const BlankSpace = styled.div`\n  height: ${(props) => props.height || \"20px\"};\n`;\n","import styled from \"styled-components\";\n\nexport const Heading2 = styled.h2`\n  padding: 10px 0;\n  margin: 0 0 10px 0;\n`;\n\nexport const Heading3 = styled.h3`\n  padding: 10px 0;\n  margin: 0 0 4px 0;\n`;\n\nexport const SongHeader = styled.div`\n  margin-top: -32px;\n  padding: 0px 12px;\n  display: flex;\n  justify-content: space-between;\n`;\n\nexport const SongTitle = styled.p`\n  padding: 0px 10px;\n  background-color: white;\n  font-weight: ${(props) => (props.b ? \"bold\" : \"regular\")};\n  font-size: 12px;\n`;\n\nexport const LineLabel = styled.p`\n  font-size: 10px;\n  line-height: 10px;\n  width: ${(props) => (props.width || \"70px\")};\n`;\n\nexport const Text = styled.p`\n  font-size: 12px;\n  line-height: 12px;\n  padding: ${(props) => props.padding || 2};\n  margin: 0;\n`;\n\nexport const HeaderTitle = styled.h1`\n  padding: 0px 50px;\n  font-size: 56px;\n  text-shadow: 4px 4px #7799dd;\n`;\n\nexport const Alert = styled.p`\n  color: red;\n`;\n","import styled, { keyframes } from \"styled-components\";\n\nexport const MusicGrid = styled.div`\n  margin: 10px 20px;\n  padding-bottom: 10px;\n`;\n\nexport const Line = styled.div`\n  margin: 0;\n  display: flex;\n`;\n\nconst notesPlayingAnimation = keyframes`\n 0% { \n   height: 30px; \n   width: 30px;\n   margin: 3px; \n  }\n  20% { \n   height: 24px; \n   width: 24px;\n   margin: 6px; \n    }\n 30% { \n   height: 32px; \n    width: 32px;  \n    margin: 2px;\n}\n 100% { \n   height: 30px; \n   width: 30px;\n   margin: 3px; \n }\n`;\n\nexport const StyledNote = styled.div`\n  height: 30px;\n  width: 30px;\n  margin: 3px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  box-shadow: 3px 3px 5px ${(props) => props.color};\n  background-color: ${(props) => props.color};\n  opacity: ${(props) => (props.highlighted ? 0.7 : 1)};\n  cursor: pointer;\n  &:hover {\n    height: ${(props) => (props.clickable ? \"24px\" : \"30px\")};\n    width: ${(props) => (props.clickable ? \"24px\" : \"30px\")};\n    margin: ${(props) => (props.clickable ? \"6px\" : \"3px\")};\n  }\n  animation-name: ${(props) => props.animated && notesPlayingAnimation};\n  animation-duration: 0.8s;\n  animation-iteration-count: 1;\n`;\n\nexport const PageCircle = styled.div`\n  height: 8px;\n  width: 8px;\n  margin: 4px;\n  border-width: 2px;\n  border-style: solid;\n  border-radius: 50%;\n  border-color: ${(props) => props.color || \"black\"};\n  background-color: ${(props) =>\n    props.selected ? props.color || \"black\" : \"white\"};\n  cursor: pointer;\n`;\n\nexport const BarIndicator = styled.div`\n  border-bottom: 1px solid #aaa;\n  width: 138px;\n  margin: 0px 3px 12px 3px;\n  font-size: 10px;\n  color: #aaa;\n`;\n","import React from \"react\";\nimport { StyledNote } from \"../../ui-kit\";\n\nexport const Note = ({\n  notePosition,\n  status,\n  color,\n  toggleActiveNote,\n  linePosition,\n  sounds,\n  highlighted,\n  animated,\n  pitch,\n}) => {\n  const onNoteClick = () => {\n    toggleActiveNote(notePosition, linePosition, sounds);\n  };\n\n  return (\n    <StyledNote\n      color={color}\n      highlighted={highlighted}\n      onClick={onNoteClick}\n      clickable={true}\n      animated={animated}\n    >\n    { pitch ? pitch : '' }\n    </StyledNote>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { globalContext } from \"../../context/GlobalContext\";\nimport { Note } from \"./Note\";\nimport { Line, LineLabel, DeleteButton } from \"../../ui-kit\";\n\nexport const CreateLine = ({\n  linePosition,\n  notes,\n  noteColors,\n  toggleActiveNote,\n  sounds,\n  pitches,\n  highlightedNote,\n  label,\n  animatedNotes,\n  currentPage,\n  lenghtOfPage,\n}) => {\n  const { isRemoveInstrumentVisible, deleteLine } = useContext(globalContext);\n\n  const firstIndex = (currentPage - 1) * lenghtOfPage;\n  const lastIndex = currentPage * lenghtOfPage;\n\n  const displayNotes = notes?.length\n    ? notes.map((n, i) => {\n        if (i >= firstIndex && i < lastIndex) {\n          return (\n            <Note\n              key={i}\n              status={n}\n              notePosition={i}\n              color={noteColors[n]}\n              toggleActiveNote={toggleActiveNote}\n              linePosition={linePosition}\n              sounds={sounds}\n              pitch={pitches[n]}\n              highlighted={highlightedNote === i}\n              animated={animatedNotes.includes(i)}\n            />\n          );\n        }\n        return null;\n      })\n    : [];\n\n  return (\n    <Line>\n      <LineLabel width={'90px'}>{label && label}</LineLabel>\n      {isRemoveInstrumentVisible && (\n        <DeleteButton onClick={() => deleteLine(linePosition)}>x</DeleteButton>\n      )}\n      {displayNotes}\n    </Line>\n  );\n};\n","import React from \"react\";\nimport { Row, Column, PageCircle } from \"../../ui-kit\";\n\nexport const PageCircles = ({\n  currentPage,\n  selectPage,\n  pages,\n  clickable = true,\n  createMode,\n}) => {\n  if (pages.length < 2 && !createMode) {\n    return null;\n  }\n\n  return (\n    <Row>\n      <Column flex={2}></Column>\n      <Column>\n        <Row>\n          {pages.map((el, i) => {\n            return (\n              <PageCircle\n                key={i}\n                selected={currentPage === i + 1}\n                onClick={clickable ? () => selectPage(i + 1) : null}\n              />\n            );\n          })}\n        </Row>\n      </Column>\n    </Row>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { globalContext } from \"../../context/GlobalContext\";\nimport {\n  Button,\n  PlayButton,\n  StopButton,\n  ControlsPad,\n  Tempo,\n} from \"../../ui-kit\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlay, faStop } from \"@fortawesome/free-solid-svg-icons\";\n\nconst iconStyle = { width: 16, height: 16 };\n\nexport const PlayControls = ({\n  onPlayBtnPress,\n  onStopBtnPress,\n  addOneBar,\n  removeOneBar,\n  numberOfBars,\n}) => {\n  const {\n    tempo,\n    setTempo,\n    isPlaying,\n    setTimeoutTempo,\n    isNotePlayedOnClick,\n    setIsNotePlayedOnClick,\n  } = useContext(globalContext);\n\n  const togglePlayOnClick = () => {\n    setIsNotePlayedOnClick(!isNotePlayedOnClick);\n  };\n\n  const onPlusTempoPress = () => {\n    setTempo(tempo + 5);\n    const newTimeout = 60000 / tempo / 4;\n    setTimeoutTempo(newTimeout);\n  };\n\n  const onMinusTempoPress = () => {\n    setTempo(tempo - 5);\n    const newTimeout = 60000 / tempo / 4;\n    setTimeoutTempo(newTimeout);\n  };\n\n  return (\n    <ControlsPad>\n      {isPlaying ? (\n        <StopButton onClick={onStopBtnPress}>\n          <FontAwesomeIcon icon={faStop} color=\"white\" style={iconStyle} />\n        </StopButton>\n      ) : (\n        <PlayButton onClick={onPlayBtnPress}>\n          <FontAwesomeIcon icon={faPlay} color=\"white\" style={iconStyle} />\n        </PlayButton>\n      )}\n      <Button onClick={togglePlayOnClick}>\n        Play on click: {isNotePlayedOnClick ? \"yes\" : \"no\"}\n      </Button>\n      <Button onClick={removeOneBar}>-</Button>\n      <Tempo>Notes: {numberOfBars}</Tempo>\n      <Button onClick={addOneBar}>+</Button>\n      <Button onClick={onMinusTempoPress}>-</Button>\n      <Tempo>Tempo: {tempo}</Tempo>\n      <Button onClick={onPlusTempoPress}>+</Button>\n    </ControlsPad>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { globalContext } from \"../../context/GlobalContext\";\nimport { Button, ControlsPad } from \"../../ui-kit\";\nimport { Link } from \"react-router-dom\";\n\nexport const AdvControls = ({ toggleIsSaveSongVisible, user }) => {\n  return (\n    <ControlsPad>\n      <Button onClick={toggleIsSaveSongVisible}>Save Song</Button>\n      {user && (\n        <Link to=\"/load-song\">\n          <Button>Load Song</Button>\n        </Link>\n      )}\n    </ControlsPad>\n  );\n};\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { globalContext } from \"../../context/GlobalContext\";\nimport { Bars } from \"svg-loaders-react\";\nimport {\n  CategoryBtn,\n  ExpandedMenuItem,\n  Column,\n  Row,\n  Button,\n  SelectableRow,\n  Text,\n} from \"../../ui-kit\";\nimport axios from \"axios\";\n\nexport const AddInstrument = ({ addInstrument }) => {\n  const [newInstruments, setNewInstruments] = useState([]);\n  const [searchCategory, setSearchCategory] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [uniqueCategories, setUniqueCategories] = useState([]);\n\n  const {\n    toggleIsAddInstrumentVisible,\n  } = useContext(globalContext);\n\n  const fetchInstrumentsData = async (searchCat, shouldCreateBtns) => {\n    const searchParams = searchCat && {\n      params: { category: searchCat },\n    };\n    const { data } = await axios.get(\"/api/instrument\", searchParams);\n    if (data) {\n      setNewInstruments(data);\n      if (shouldCreateBtns) {\n        const allCategories = data.map((instrument) => {\n          return instrument.category;\n        });\n        const newUniqueCategories = [...new Set(allCategories)];\n        setUniqueCategories(newUniqueCategories);\n      }\n    }\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    setLoading(true);\n    fetchInstrumentsData(null, true);\n  }, []);\n\n  const handleClick = (inst) => {\n    addInstrument(inst);\n    toggleIsAddInstrumentVisible();\n  };\n\n  const selectCategory = (cat) => {\n    fetchInstrumentsData(cat);\n    setSearchCategory(cat);\n  };\n\n  return (\n    <ExpandedMenuItem>\n      <Row padding=\"10px 12px 4px 12px\">\n        <Column flexDirection=\"row\">\n          {uniqueCategories.map((cat) => {\n            if (cat !== \"default\") {\n              return (\n                <CategoryBtn\n                  key={cat}\n                  selected={searchCategory === cat}\n                  onClick={() => selectCategory(cat)}>\n                  {cat}\n                </CategoryBtn>\n              );\n            }\n          })}\n        </Column>\n      </Row>\n      {loading && (\n        <Column justifyContent=\"center\" alignItems=\"center\">\n          <Bars width={100} height={50} fill=\"#000\" stroke=\"#000\" />\n        </Column>\n      )}\n      <Row padding=\"4px 12px 0 12px\">\n        <Column>\n          {newInstruments.map((instrument) => {\n            return (\n              <SelectableRow\n                key={instrument.name}\n                padding=\"4px 0 4px 0\"\n                onClick={() => handleClick(instrument)}>\n                <Column flex={2}>\n                  <Text>{instrument.name}</Text>\n                </Column>\n                <Column>\n                  <Text>{instrument.category}</Text>\n                </Column>\n                <Column>\n                  <Text>{instrument.subCategory}</Text>\n                </Column>\n              </SelectableRow>\n            );\n          })}\n        </Column>\n      </Row>\n      <Row padding=\"20px 0 10px 0\">\n        <Column alignItems=\"center\">\n          <Button\n            hoverColor=\"red\"\n            onClick={toggleIsAddInstrumentVisible}>\n            Cancel\n          </Button>\n        </Column>\n      </Row>\n    </ExpandedMenuItem>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { ExpandedMenuItem, Button, Input } from \"../../ui-kit\";\n\nexport const SaveSong = ({ saveTheSong, user, toggleIsSaveSongVisible }) => {\n  const [title, setTitle] = useState(\"\");\n\n  const handleChange = (e) => {\n    setTitle(e.target.value);\n  };\n  return (\n    <ExpandedMenuItem>\n      {\n        <React.Fragment>\n          {user ? (\n            <p style={{ margin: 10 }}>\n              Name your song (if you modified an existing song, <br />\n              it will still be saved under as new one):\n            </p>\n          ) : (\n            <p style={{ margin: 10 }}>\n              You don't have a user account yet, therefore your song <br />\n              will be published as annonymous... to bad!\n              <br />\n              Please create a user profile before saving next time <br />\n              Name your song:\n            </p>\n          )}\n          <Input\n            type=\"text\"\n            placeholder=\"My Supa Song...\"\n            value={title}\n            width={\"260px\"}\n            onChange={handleChange}\n          />\n          <div>\n            <Button onClick={() => saveTheSong(title)}>Save</Button>\n            <Button onClick={() => toggleIsSaveSongVisible()}>Cancel</Button>\n          </div>\n        </React.Fragment>\n      }\n    </ExpandedMenuItem>\n  );\n};\n","import React, { useContext } from \"react\";\nimport { LineLabel, Row, SmallEditBtn, BarIndicator } from \"../../ui-kit\";\nimport { globalContext } from \"../../context/GlobalContext\";\n\nexport const ToolsLine = ({\n  totalLength,\n  lengthOfPage,\n  isLastPage,\n  currentPage,\n}) => {\n  const { copyOneBar, copiedPartitionBar, pasteOneBar } = useContext(\n    globalContext\n  );\n\n  const barsPerPage = lengthOfPage / 4;\n  const displayBarsLength = [];\n  const l = totalLength;\n  const lastPageFull = l && l % lengthOfPage === 0;\n  const maxLength = l > lengthOfPage ? lengthOfPage : l;\n  const maxLength2 = isLastPage && !lastPageFull ? l % lengthOfPage : maxLength;\n\n  if (lengthOfPage && lengthOfPage >= 4) {\n    for (let i = 4; i <= maxLength2; i += 4) {\n      // Zero base index\n      const barIndex = (currentPage - 1) * barsPerPage + i / 4 - 1;\n      displayBarsLength.push(\n        <BarIndicator key={barIndex}>\n          1 bar\n          <SmallEditBtn onClick={() => copyOneBar(barIndex)}>copy</SmallEditBtn>\n          {copiedPartitionBar && (\n            <SmallEditBtn onClick={() => pasteOneBar(barIndex)}>\n              paste\n            </SmallEditBtn>\n          )}\n        </BarIndicator>\n      );\n    }\n  }\n  return (\n    <Row>\n      <LineLabel width={'90px'}/>\n      {displayBarsLength}\n    </Row>\n  );\n};\n","export const config = {\n  START_PARTITION_LENGTH: 8,\n  MAX_PARTITION_LENGTH: 64,\n  DEFAULT_TEMPO: 120,\n  DEFAULT_TIMEOUT: 60000 / 120 / 4,\n  DEFAULT_SOUND_ID: \"5fba8681963aad73cd4ce0b6\",\n};\n","export const preparePartition = (instruments, length) => {\n  if (!instruments) return [];\n  const partition = [];\n  instruments.forEach(() => {\n    const emptyLine = [];\n    for (let i = 1; i <= length; i++) {\n      emptyLine.push(0);\n    }\n    partition.push(emptyLine);\n  });\n  return partition;\n};\n\nexport const prepareInstruments = (instruments) => {\n  if(!instruments.length) return;\n  const preparedInstruments = instruments.map((instrument) => {\n    if(instrument.category===\"Tone Synth\") {\n      return prepareToneJsInstrument(instrument);\n    }\n    return prepareSamplesInstrument(instrument);\n  });\n  return preparedInstruments;\n};\n\nexport const prepareOneInstrument = (instrument) => {\n  if(instrument.category===\"Tone Synth\") {\n    return prepareToneJsInstrument(instrument);\n  }\n  return prepareSamplesInstrument(instrument);\n}\n\nexport const prepareToneJsInstrument = (instrument) => {\n  const { colors, pitches } = instrument;\n  const sounds = [];\n\n  for(let i=0; i<pitches.length;i++){\n    sounds.push({});\n  }\n  return {\n    id: instrument._id,\n    label: instrument.name,\n    isToneJs: true,\n    colors,\n    sounds,\n    pitches,\n  };\n}\n\nexport const prepareSamplesInstrument = (instrument) => {\n  const lineSounds = [];\n  const linePitches = [];\n  instrument.sounds.forEach((el) => {\n    if(!el) {\n      lineSounds.push({ name: \"default\", url: \"\" });\n      linePitches.push('');\n    }\n    if (el.url) {\n      lineSounds.push(new Audio(el.url));\n      linePitches.push(el.pitch || '');\n    } else {\n      lineSounds.push(null);\n      linePitches.push('');\n    }\n  });\n  return {\n    id: instrument._id,\n    label: instrument.name,\n    colors: instrument.colors,\n    isToneJs: false,\n    sounds: lineSounds,\n    pitches: linePitches,\n  };\n};\n","import * as Tone from 'tone';\n/* Plays one beat of the music, \neach note of the beat being the note on each line corresponding \nto the selected index */\nexport const playBeat = (instruments, partition, beatNumber) => {\n  partition.forEach((partitionLine, i) => {\n    if (partitionLine[beatNumber]) {\n      const soundIndex = partitionLine[beatNumber];\n\n        if(!instruments[i].isToneJs){\n          // stops if a sound was playing\n          instruments[i].sounds.forEach((sound) => {\n            if (sound) {\n              sound.pause();\n              sound.currentTime = 0;\n            }\n          });\n  \n          //plays selected sound\n          instruments[i].sounds[soundIndex].play();\n        }else if(instruments[i].isToneJs){\n          const synth = new Tone.Synth().toDestination();\n          const now = Tone.now();\n          synth.triggerAttackRelease(instruments[i].pitches[soundIndex], \"8n\", now);\n        }\n      }\n  });\n};\n","const SOUND_CATEGORIES = [\n  \"default\",\n  \"Drums\",\n  \"Bass\",\n  \"Synth\",\n  \"Guitar\",\n  \"Tone Synth\",\n  \"Piano\",\n  \"Brass\",\n  \"Strings\",\n  \"Flute\",\n  \"Effects\",\n  \"Voice\",\n  \"Other\",\n];\n\nconst SUB_CATEGORIES = {\n  \"\": [\"\"],\n  default: [\"\"],\n  Drums: [\n    \"\",\n    \"Kick\",\n    \"Snare\",\n    \"Tom\",\n    \"Hi-hat\",\n    \"Cymbal\",\n    \"Vinnyl\",\n    \"Percussion\",\n    \"Clang\",\n    \"Other\",\n  ],\n  Bass: [\"\", \"Acoustic\", \"Fretless\", \"Electric\", \"Picked\", \"Synth\", \"Slap\"],\n  Synth: [\"\", \"Piano\", \"Ambiant\", \"Lead\", \"Pad\", \"Effect\", \"Electronic\"],\n  Guitar: [\n    \"\",\n    \"Acoustic\",\n    \"Clean\",\n    \"Overdrive\",\n    \"Distorsion\",\n    \"Muted\",\n    \"Jazz\",\n    \"Fuzz\",\n    \"Wah\",\n    \"Funk\",\n  ],\n  \"Tone Synth\": [\"\", \"Synth\", \"AMSynth\", \"FMSynth\"],\n  Piano: [\"\", \"Grand\", \"Acoustic\", \"Clavesin\"],\n  Brass: [\"\", \"Horn\", \"Trumpet\", \"Tuba\", \"Trombone\"],\n  Strings: [\"\", \"Violin\", \"Cello\", \"Double Bass\", \"Harp\", \"Mixed-strings\"],\n  Flute: [\"\", \"Flute\", \"Clarinet\", \"Pipeau\", \"Peruvian\", \"Bass\", \"Recorder\"],\n  Effects: [\"\", \"Scratch\", \"Noise\", \"Clang\", \"Electronic\", \"Mystic\"],\n  Voice: [\"\", \"Hi-sing\", \"Mid-sing\", \"Low-sing\", \"Talk\", \"Noize\"],\n  Other: [\"\"],\n};\n\nexport const getSubCategories = (category) => {\n  return SUB_CATEGORIES[category];\n};\n\nexport const getCategories = () => {\n  return SOUND_CATEGORIES;\n};\n","export const getRandomName = () => {\n  const first = [\"Anonymous\", \"Mysterious\", \"Unknown\", \"Forgotten\"];\n  const second = [\n    \"Musician\",\n    \"Troubadour\",\n    \"Creator\",\n    \"Barde\",\n    \"Artist\",\n    \"Beats Maker\",\n    \"Sounds Juggler\",\n  ];\n\n  const randomIndex = (n) => Math.floor(Math.random() * n);\n\n  const randomName = `${first[randomIndex(first.length)]} ${\n    second[randomIndex(second.length)]\n  }`;\n\n  return randomName;\n};\n","import React, { useState, useEffect, useContext } from \"react\";\nimport { CreateLine } from \"./CreateLine\";\nimport { MusicGrid, ExpandedMenuItem, AverageEditBtn, Row } from \"../../ui-kit\";\nimport { PageCircles } from \"../Shared/PageCircles\";\nimport { PlayControls } from \"./PlayControls\";\nimport { AdvControls } from \"./AdvControls\";\nimport { AddInstrument } from \"./AddInstrument\";\nimport { SaveSong } from \"./SaveSong\";\nimport { ToolsLine } from \"./ToolsLine\";\nimport { config } from \"./../../config/config\";\nimport {\n  playBeat,\n  getRandomName,\n  preparePartition,\n  prepareInstruments,\n  prepareOneInstrument,\n} from \"../utils\";\nimport axios from \"axios\";\nimport { globalContext } from \"../../context/GlobalContext\";\n\nexport const CreateSong = (props) => {\n  const [highlightedNote, setHighlightedNote] = useState([-1]);\n  const [animatedNotes, setAnimatedNotes] = useState([]);\n  const [bottomMessage, setBottomMessage] = useState(\"\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pages, setPages] = useState([1]);\n\n  let musicPlaying = React.useRef(null);\n\n  const lengthOfPage = window.innerWidth >= 800 ? 16 : 12;\n\n  const {\n    tempo,\n    setTempo,\n    setIsPlaying,\n    timeoutTempo,\n    instruments,\n    setInstruments,\n    partition,\n    setPartition,\n    setTimeoutTempo,\n    isNotePlayedOnClick,\n    isAddInstrumentVisible,\n    toggleIsAddInstrumentVisible,\n    toggleIsRemoveInstrumentVisible,\n    isSaveSongVisible,\n    setIsSaveSongVisible,\n  } = useContext(globalContext);\n\n  useEffect(() => {\n    const songIdToLoad = props?.match?.params?.id;\n    if (songIdToLoad) {\n      prepareLoadedSong(songIdToLoad);\n    } else {\n      prepareNewMusic();\n    }\n    return () => stopPlaying();\n  }, []);\n\n  const prepareNewMusic = async () => {\n    const { data } = await axios.get(\"/api/instrument/starter\");\n    const preparedInstruments = prepareInstruments(data);\n    const newPartition = preparePartition(\n      preparedInstruments,\n      config.START_PARTITION_LENGTH\n    );\n    setInstruments(preparedInstruments);\n    setPartition(newPartition);\n  };\n\n  const prepareLoadedSong = async (songIdToLoad) => {\n    const { data: loadedSong } = await axios.get(`/api/song/${songIdToLoad}`);\n    const newInstruments = [...loadedSong.instruments];\n    const preparedInstruments = prepareInstruments(newInstruments);\n    setInstruments(preparedInstruments);\n    setPartition(loadedSong.partition);\n    setTempo(loadedSong.tempo);\n    setTimeoutTempo(60000 / loadedSong.tempo / 4);\n    const numberOfPages = Math.ceil(\n      loadedSong.partition[0].length / lengthOfPage\n    );\n    const newPages = [];\n    for (let i = 1; i <= numberOfPages; i++) {\n      newPages.push(1);\n    }\n    setPages(newPages);\n  };\n\n  const addOneBar = () => {\n    if (partition.length && partition[0].length < config.MAX_PARTITION_LENGTH) {\n      const updatedPartition = [...partition];\n      updatedPartition.forEach((el) => {\n        el.push(0);\n      });\n      const pagesCalculation = Math.ceil(\n        updatedPartition[0].length / lengthOfPage\n      );\n      const pagesUpdate =\n        pages.length < pagesCalculation ? pages.concat([1]) : pages;\n      setPartition(updatedPartition);\n      setPages(pagesUpdate);\n    }\n  };\n\n  const removeOneBar = () => {\n    const updatedPartition = [...partition];\n    const last = updatedPartition[0].length - 1;\n    updatedPartition.forEach((el) => {\n      el.splice(last, 1);\n    });\n    const pagesCalc = Math.ceil(updatedPartition[0].length / lengthOfPage);\n    const pagesUpdate =\n      pages.length > pagesCalc ? pages.slice(0, pages.length - 1) : pages;\n    setPartition(updatedPartition);\n    setPages(pagesUpdate);\n    if (currentPage > pagesUpdate.length) setCurrentPage(pagesUpdate.length);\n  };\n\n  const playMusic = (instruments, partition, tempo) => {\n    if (!partition || !partition.length) return;\n    setIsPlaying(true);\n    setCurrentPage(1);\n    let counter = 0;\n\n    const playInterval = () => {\n      setHighlightedNote(counter);\n      setAnimatedNotes([counter - 1, counter, counter + 1]);\n      playBeat(instruments, partition, counter);\n      counter++;\n      if (counter >= partition[0].length) {\n        counter = 0;\n      }\n      if (counter % lengthOfPage === 1) {\n        const nextPage = Math.ceil(counter / lengthOfPage);\n        setCurrentPage(nextPage);\n      }\n    };\n\n    musicPlaying.current = setInterval(playInterval, tempo);\n  };\n\n  const onPlayBtnPress = () => {\n    playMusic(instruments, partition, timeoutTempo);\n  };\n\n  const stopPlaying = () => {\n    setIsPlaying(false);\n    clearInterval(musicPlaying.current);\n  };\n\n  const addInstrument = (instr) => {\n    const length = partition[0] ? partition[0].length : 8;\n    const newPartitionRow = [];\n    for (let i = 1; i <= length; i++) {\n      newPartitionRow.push(0);\n    }\n    const newPartition = [...partition];\n    const newInstruments = [...instruments];\n    const preparedNewInstrument = prepareOneInstrument(instr);\n    newInstruments.push(preparedNewInstrument);\n    newPartition.push(newPartitionRow);\n    setInstruments(newInstruments);\n    setPartition(newPartition);\n  };\n\n  const toggleActiveNote = (col, row, sounds) => {\n    const updatedPartition = [...partition];\n    const depth = sounds.length;\n    const newIndex = (updatedPartition[row][col] + 1) % depth;\n    updatedPartition[row][col] = newIndex;\n    if (sounds[newIndex] && sounds[newIndex] instanceof Audio && isNotePlayedOnClick) {\n      sounds[newIndex].play();\n    }\n    setPartition(updatedPartition);\n  };\n\n  const saveTheSong = async (title) => {\n    const songInstruments = instruments.map((el) => {\n      return el.id;\n    });\n    const songData = {\n      title,\n      partition,\n      tempo,\n      instruments: songInstruments,\n      creator: props.user?._id || undefined,\n      creatorName: props.user?.username || getRandomName(),\n      posted: true,\n    };\n    await axios.post(\"api/song/\", songData);\n    setIsSaveSongVisible(false);\n    setBottomMessage(`New song \"${title}\" successfully saved!`);\n    setTimeout(() => {\n      setBottomMessage(\"\");\n    }, 1500);\n  };\n\n  return (\n    <React.Fragment>\n      {isAddInstrumentVisible && (\n        <AddInstrument addInstrument={addInstrument} />\n      )}\n      {isSaveSongVisible && (\n        <SaveSong\n          saveTheSong={saveTheSong}\n          toggleIsSaveSongVisible={() =>\n            setIsSaveSongVisible(!isSaveSongVisible)\n          }\n          user={props.user}\n        />\n      )}\n      {bottomMessage && (\n        <ExpandedMenuItem>\n          <p>{bottomMessage}</p>\n        </ExpandedMenuItem>\n      )}\n      <PageCircles\n        pages={pages}\n        selectPage={setCurrentPage}\n        currentPage={currentPage}\n        createMode\n      />\n      <div\n        style={{\n          minHeight: 300,\n          display: \"flex\",\n          flexDirection: \"column\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n        }}>\n        <MusicGrid>\n          <ToolsLine\n            totalLength={partition[0] && partition[0].length}\n            lengthOfPage={lengthOfPage}\n            isLastPage={currentPage === pages.length}\n            currentPage={currentPage}\n          />\n          {instruments.length ? (\n            <React.Fragment>\n              {instruments.map((instrument, i) => {\n                return (\n                  <CreateLine\n                    key={i}\n                    linePosition={i}\n                    label={instrument.label}\n                    notes={partition[i]}\n                    noteColors={instrument.colors}\n                    toggleActiveNote={toggleActiveNote}\n                    sounds={instrument.sounds}\n                    pitches={instrument.pitches}\n                    highlightedNote={highlightedNote}\n                    animatedNotes={animatedNotes}\n                    currentPage={currentPage}\n                    lenghtOfPage={lengthOfPage}\n                  />\n                );\n              })}\n            <Row padding='16px 0px 0px 0px'>\n              <AverageEditBtn padding='2px 16px 2px 16px' onClick={toggleIsAddInstrumentVisible}>+ Add</AverageEditBtn>\n              <AverageEditBtn padding='2px 8px 2px 8px' onClick={toggleIsRemoveInstrumentVisible}>- Remove</AverageEditBtn>\n            </Row>\n          </React.Fragment>\n          ) : (\n            <AverageEditBtn padding={'8px 8px 8px 8px'} onClick={toggleIsAddInstrumentVisible}>\n              No partition to display yet... Click here to add your first instrument\n            </AverageEditBtn>\n          )}\n        </MusicGrid>\n      </div>\n      <PlayControls\n        onPlayBtnPress={onPlayBtnPress}\n        onStopBtnPress={stopPlaying}\n        addOneBar={addOneBar}\n        removeOneBar={removeOneBar}\n        numberOfBars={partition[0] ? partition[0].length : 0}\n      />\n      <AdvControls\n        toggleIsSaveSongVisible={() => setIsSaveSongVisible(!isSaveSongVisible)}\n        user={props.user}\n      />\n    </React.Fragment>\n  );\n};\n","import React from \"react\";\nimport { StyledNote } from \"../../ui-kit\";\n\nexport const Note = ({ status, colors, highlighted, isAnimated }) => {\n  const color = colors[status];\n\n  return (\n    <StyledNote\n      color={color}\n      highlighted={highlighted}\n      animated={isAnimated}\n    />\n  );\n};\n","import React from \"react\";\nimport { Note } from \"./Note\";\nimport { Line } from \"../../ui-kit\";\n\nexport const DisplayLine = ({\n  notes,\n  noteColors,\n  highlightedNote,\n  animatedNotes,\n  lengthOfPage,\n  currentPage,\n}) => {\n  const firstIndex = (currentPage - 1) * lengthOfPage;\n  const lastIndex = currentPage * lengthOfPage;\n\n  const displayNotes = notes.map((n, i) => {\n    if (i >= firstIndex && i < lastIndex) {\n      return (\n        <Note\n          key={i}\n          status={n}\n          colors={noteColors}\n          highlighted={highlightedNote === i}\n          isAnimated={animatedNotes.includes(i)}\n        />\n      );\n    }\n  });\n\n  return <Line>{displayNotes}</Line>;\n};\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { DisplayLine } from \"./DisplayLine\";\nimport { PageCircles } from \"../Shared/PageCircles\";\nimport { playBeat } from \"../utils\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPlay, faStop } from \"@fortawesome/free-solid-svg-icons\";\nimport {\n  MusicGrid,\n  SongPost,\n  SongPostPlay,\n  SongHeader,\n  SongTitle,\n  Row,\n} from \"../../ui-kit\";\n\nconst iconsStyle = {\n  width: 40,\n  height: 40,\n  padding: \"10px 30px\",\n  border: \"solid 1px rgba(0, 0, 0, 0.6)\",\n  color: \"rgba(0, 0, 0, 0.7)\",\n  backgroundColor: \"rgba(250, 250, 250, 0.5)\",\n  borderRadius: 5,\n  zIndex: 5,\n};\n\nexport const DisplaySong = (props) => {\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [highlightedNote, setHighlightedNote] = useState(-1);\n  const [animatedNotes, setAnimatedNotes] = useState([-1, -1, -1]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [pages, setPages] = useState([1]);\n\n  const timeoutTempo = 60000 / props.tempo / 4;\n  let intervalId = useRef(null);\n\n  const lengthOfPage = window.innerWidth >= 800 ? 16 : 12;\n\n  useEffect(() => {\n    const updatedPages = [];\n    const numberOfPages = Math.ceil(props.partition[0].length / lengthOfPage);\n    for (let i = 1; i <= numberOfPages; i++) {\n      updatedPages.push(1);\n    }\n    setPages(updatedPages);\n  }, []);\n\n  useEffect(() => {\n    return () => stopPlaying();\n  }, []);\n\n  const playMusic = (musicLines, partition, tempo) => {\n    setIsPlaying(true);\n    setCurrentPage(1);\n    let counter = 0;\n    intervalId.current = setInterval(() => {\n      setHighlightedNote(counter);\n      setAnimatedNotes([counter - 1, counter, counter + 1]);\n      playBeat(musicLines, partition, counter);\n      counter++;\n      if (counter >= partition[0].length) {\n        counter = 0;\n      }\n      if (counter % lengthOfPage === 1) {\n        const nextPage = Math.ceil(counter / lengthOfPage);\n        setCurrentPage(nextPage);\n      }\n    }, tempo);\n  };\n\n  const stopPlaying = () => {\n    setIsPlaying(false);\n    clearInterval(intervalId.current);\n  };\n\n  const onSongClick = () => {\n    if (isPlaying) {\n      stopPlaying();\n    } else {\n      playMusic(props.musicLines, props.partition, timeoutTempo);\n    }\n  };\n\n  return (\n    <SongPost>\n      <SongPostPlay onClick={onSongClick}>\n        {isPlaying ? (\n          <FontAwesomeIcon icon={faStop} color=\"black\" style={iconsStyle} />\n        ) : (\n          <FontAwesomeIcon icon={faPlay} color=\"black\" style={iconsStyle} />\n        )}\n      </SongPostPlay>\n      <SongHeader>\n        <SongTitle b={true}>{props.title}</SongTitle>\n        <SongTitle>by {props.creatorName}</SongTitle>\n      </SongHeader>\n      <Row>\n        <PageCircles\n          pages={pages}\n          selectPage={props.selectPage}\n          currentPage={currentPage}\n          clickable={false}\n        />\n      </Row>\n      <MusicGrid>\n        {props.musicLines.map((line, i) => {\n          return (\n            <DisplayLine\n              key={i}\n              linePosition={i}\n              notes={props.partition[i]}\n              noteColors={line.colors}\n              sounds={line.sounds}\n              lengthOfPage={lengthOfPage}\n              currentPage={currentPage}\n              highlightedNote={highlightedNote}\n              animatedNotes={animatedNotes}\n            />\n          );\n        })}\n      </MusicGrid>\n    </SongPost>\n  );\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronDown } from \"@fortawesome/free-solid-svg-icons\";\nimport { Row, Column, Heading2, AppIntroLayout, Button } from \"../../ui-kit\";\n\nexport const AppIntro = () => {\n  const chevronStyle = {\n    padding: 4,\n    paddingTop: 32,\n    width: 40,\n    height: 40,\n  };\n  return (\n    <AppIntroLayout>\n      <Row>\n        <Column justifyContent=\"center\" alignItems=\"center\">\n          <Heading2>Welcome to Boom-Tchak!</Heading2>\n        </Column>\n      </Row>\n      <Row>\n        <Column justifyContent=\"center\" alignItems=\"center\">\n          <p style={{ margin: 0, padding: 8 }}>\n            The app to discover and create nice music loops.\n          </p>\n          <p style={{ margin: 0, padding: 0 }}>\n            Want to start creating music? It's here >>{\" \"}\n            <Link to=\"/create\">\n              <Button>Create</Button>\n            </Link>\n          </p>\n          <p style={{ margin: 0, padding: 0 }}>\n            Need help? This way >>{\" \"}\n            <Link to=\"/help\">\n              <Button>Help</Button>\n            </Link>\n          </p>\n          <p style={{ margin: 0, padding: 8 }}>\n            To check out some nice music loops, scroll down and click on the\n            songs\n          </p>\n        </Column>\n      </Row>\n      <Row>\n        <Column flexDirection=\"row\" justifyContent=\"center\" alignItems=\"center\">\n          <FontAwesomeIcon\n            icon={faChevronDown}\n            style={chevronStyle}\n            color=\"black\"\n          />\n          <FontAwesomeIcon\n            icon={faChevronDown}\n            style={chevronStyle}\n            color=\"black\"\n          />\n          <FontAwesomeIcon\n            icon={faChevronDown}\n            style={chevronStyle}\n            color=\"black\"\n          />\n        </Column>\n      </Row>\n    </AppIntroLayout>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Bars } from \"svg-loaders-react\";\nimport axios from \"axios\";\nimport { DisplaySong } from \"./DisplaySong\";\nimport { prepareInstruments } from \"../utils/instruments\";\nimport { AppIntro } from \"../InfoPages/AppIntro\";\nimport { BlankSpace } from \"../../ui-kit\";\n\nexport const SongsList = ({ isAppIntroDisplayed = false }) => {\n  const [songs, setSongs] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [message, setMessage] = useState(\"\");\n\n  const loadSongs = async () => {\n    setLoading(true);\n    const { data: loadedSongs } = await axios.get(\n      `/api/song/posted/${currentPage}`,\n      {\n        page: 1,\n      }\n    );\n    if (!loadedSongs.length) {\n      setMessage(\"no more songs to load...\");\n      setLoading(false);\n      setTimeout(() => {\n        setMessage(\"\");\n      }, 2000);\n      return;\n    }\n    loadedSongs.forEach((song) => {\n      const preparedInstruments = prepareInstruments(song.instruments);\n      song.instruments = preparedInstruments;\n    });\n    setSongs([...songs, ...loadedSongs]);\n    setLoading(false);\n    setCurrentPage(currentPage + 1);\n  };\n\n  useEffect(() => {\n    loadSongs();\n  }, []);\n\n  const loadMore = () => {\n    loadSongs();\n  };\n\n  return (\n    <React.Fragment>\n      {isAppIntroDisplayed && <AppIntro />}\n      {songs.map((song) => {\n        return (\n          <DisplaySong\n            key={song._id}\n            title={song.title}\n            partition={song.partition}\n            musicLines={song.instruments}\n            tempo={song.tempo}\n            creatorName={song.creatorName}\n          />\n        );\n      })}\n      {loading ? (\n        <Bars width={100} height={50} fill=\"#000\" stroke=\"#000\" />\n      ) : message ? (\n        <p>{message}</p>\n      ) : (\n        <p onClick={loadMore}>loadMore</p>\n      )}\n      <BlankSpace height=\"100px\" />\n    </React.Fragment>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Bars } from \"svg-loaders-react\";\nimport {\n  PageLayout,\n  SelectableText,\n  Button,\n  Heading2,\n  Column,\n} from \"../../ui-kit\";\nimport { Link } from \"react-router-dom\";\nimport axios from \"axios\";\n\nexport const LoadSong = (props) => {\n  const [songsList, setSongsList] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [selectedSong, setSelectedSong] = useState(null);\n  const [message, setMessage] = useState(\"\");\n\n  const fetchData = async () => {\n    setLoading(true);\n    const { data } = await axios.get(`/api/song/creator/${props.user._id}`);\n    if (data) {\n      setSongsList(data);\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchData();\n  }, []);\n\n  const deleteSong = async (songId) => {\n    const response = await axios.delete(`/api/song/${songId}`);\n    setMessage(response.message);\n    fetchData();\n    setTimeout(() => {\n      setMessage(\"\");\n    }, 1500);\n  };\n\n  return (\n    <PageLayout>\n      <Heading2>Load Song</Heading2>\n      {loading && (\n        <Column alignItems=\"center\">\n          <Bars width={100} height={50} fill=\"#000\" stroke=\"#000\" />\n        </Column>\n      )}\n      {songsList.map((el) => {\n        return (\n          <SelectableText\n            key={el._id}\n            selected={selectedSong === el._id}\n            onClick={() => {\n              setSelectedSong(el._id);\n            }}>\n            {el.title}\n          </SelectableText>\n        );\n      })}\n      <div>{message && <p>{message}</p>}</div>\n      {selectedSong && (\n        <div style={{ paddingTop: 20 }}>\n          <Link to={`/create/${selectedSong}`}>\n            <Button>Load</Button>\n          </Link>\n          <Button onClick={() => deleteSong(selectedSong)}>Delete</Button>\n          <Link to={\"/\"}>\n            <Button>Cancel</Button>\n          </Link>\n        </div>\n      )}\n    </PageLayout>\n  );\n};\n","import axios from \"axios\";\n\nexport const signup = (username, password) => {\n  return axios\n    .post(\"/api/auth/signup\", { username, password })\n    .then((response) => {\n      return response.data;\n    })\n    .catch((err) => {\n      return err.response.data;\n    });\n};\n\nexport const login = (username, password) => {\n  return axios\n    .post(\"/api/auth/login\", { username, password })\n    .then((response) => {\n      return response.data;\n    })\n    .catch((err) => {\n      return err.response.data;\n    });\n};\n\nexport const logout = () => {\n  return axios\n    .delete(\"/api/auth/logout\")\n    .then((response) => {\n      return response.data;\n    })\n    .catch((err) => {\n      return err.response.data;\n    });\n};\n","import React, { useState } from \"react\";\nimport { login } from \"./utils\";\nimport { Link } from \"react-router-dom\";\nimport {\n  Input,\n  Button,\n  PageLayout,\n  Label,\n  Row,\n  Column,\n  Alert,\n  Heading2,\n  BlankSpace,\n} from \"../../ui-kit\";\n\nexport const Login = (props) => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n\n  const linkStyle = {\n    textDecoration: \"none\",\n    color: \"black\",\n  };\n\n  const handleLogin = async () => {\n    const data = await login(username, password);\n    if (data.message) {\n      setMessage(data.message);\n    } else {\n      props.setUser(data);\n      props.history.push(\"/\");\n    }\n  };\n\n  const handleChange = (e) => {\n    if (e.target.name === \"username\") {\n      setUsername(e.target.value);\n    }\n    if (e.target.name === \"password\") {\n      setPassword(e.target.value);\n    }\n  };\n\n  return (\n    <PageLayout>\n      <Row>\n        <Column />\n        <Column flex={1}>\n          <Heading2>Login</Heading2>\n          <Row>\n            <Column>\n              <Label htmlFor=\"username\">Username:</Label>\n            </Column>\n            <Column flex={2}>\n              <Input\n                type=\"text\"\n                name=\"username\"\n                width={\"100%\"}\n                id=\"username\"\n                value={username}\n                onChange={handleChange}\n              />\n            </Column>\n          </Row>\n          <Row>\n            <Column flex={1}>\n              <Label htmlFor=\"password\">Password:</Label>\n            </Column>\n            <Column flex={2}>\n              <Input\n                type=\"password\"\n                name=\"password\"\n                width={\"100%\"}\n                id=\"password\"\n                value={password}\n                onChange={handleChange}\n              />\n            </Column>\n          </Row>\n          <BlankSpace />\n          <Row>\n            <Column alignItems={\"center\"}>\n              {message && <Alert>{message}</Alert>}\n              <Button onClick={handleLogin}>Login</Button>\n              <p>No profile yet?</p>\n              <Link to=\"/signup\" style={linkStyle}>\n                signup\n              </Link>\n            </Column>\n          </Row>\n        </Column>\n        <Column />\n      </Row>\n    </PageLayout>\n  );\n};\n","import React, { useState } from \"react\";\nimport {\n  Input,\n  Button,\n  Label,\n  Row,\n  Column,\n  Alert,\n  PageLayout,\n  BlankSpace,\n  Heading2,\n} from \"../../ui-kit\";\nimport { Link } from \"react-router-dom\";\nimport { signup } from \"./utils\";\n\nexport const Signup = (props) => {\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n\n  const linkStyle = {\n    textDecoration: \"none\",\n    color: \"black\",\n  };\n\n  const handleSignup = async (e) => {\n    const data = await signup(username, password);\n    if (data.message) {\n      setMessage(data.message);\n    } else {\n      props.setUser(data);\n      props.history.push(\"/\");\n    }\n  };\n\n  const handleChange = (e) => {\n    if (e.target.name === \"username\") {\n      setUsername(e.target.value);\n    }\n    if (e.target.name === \"password\") {\n      setPassword(e.target.value);\n    }\n  };\n\n  return (\n    <PageLayout>\n      <Row>\n        <Column />\n        <Column flex={1}>\n          <Heading2>Signup</Heading2>\n          <Row>\n            <Column>\n              <Label htmlFor=\"username\">Username:</Label>\n            </Column>\n            <Column flex={2}>\n              <Input\n                type=\"text\"\n                name=\"username\"\n                width={\"100%\"}\n                id=\"username\"\n                value={username}\n                onChange={handleChange}\n              />\n            </Column>\n          </Row>\n          <Row>\n            <Column flex={1}>\n              <Label htmlFor=\"password\">Password:</Label>\n            </Column>\n            <Column flex={2}>\n              <Input\n                type=\"password\"\n                name=\"password\"\n                width={\"100%\"}\n                id=\"password\"\n                value={password}\n                onChange={handleChange}\n              />\n            </Column>\n          </Row>\n          <BlankSpace />\n          <Row>\n            <Column alignItems={\"center\"}>\n              {message && <Alert>{message}</Alert>}\n              <Button onClick={handleSignup}>Submit</Button>\n              <p>Already have a profile?</p>\n              <Link to=\"/login\" style={linkStyle}>\n                login\n              </Link>\n            </Column>\n          </Row>\n        </Column>\n        <Column />\n      </Row>\n    </PageLayout>\n  );\n};\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { logout } from \"./utils\";\nimport {\n  Row,\n  Column,\n  Button,\n  PageLayout,\n  ProfilePic,\n  Heading2,\n} from \"../../ui-kit\";\n\nexport const Profile = (props) => {\n  const [message, setMessage] = useState(\"\");\n\n  const onLogoutBtnClick = async () => {\n    await logout();\n    props.setUser(null);\n    props.history.push(\"/\");\n  };\n\n  const onCreateInstrumentBtnClick = () => {\n    const isUserAdmin = props.user && props.user.admin === true;\n    if (isUserAdmin) {\n      props.history.push(\"/create-instrument\");\n    } else {\n      setMessage(\"Coming soon, stay tuned...\");\n      setInterval(() => {\n        setMessage(\"\");\n      }, 2000);\n    }\n  };\n\n  if (!props.user) {\n    return (\n      <PageLayout>\n        <Heading2>No Profile...</Heading2>\n        <Row>\n          <Column>Please login or signup to access the profile page</Column>\n        </Row>\n      </PageLayout>\n    );\n  }\n\n  return (\n    <PageLayout>\n      <Row>\n        <Column>\n          <Heading2>Profile</Heading2>\n        </Column>\n      </Row>\n      <Row>\n        <Column flex={2}>\n          <ProfilePic\n            src={\n              \"https://images.unsplash.com/photo-1502377429547-835a416e4a90?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=667&q=80\"\n            }\n          />\n        </Column>\n        <Column justifyContent=\"flex-start\" flex={3}>\n          <h3>Hello, {props.user.username}</h3>\n          <p>Are you ready to create some funky beats today?</p>\n          <Row>\n            <Link to=\"/load-song\">\n              <Button>Load Song</Button>\n            </Link>\n            <Button onClick={onCreateInstrumentBtnClick}>\n              Create Instrument\n            </Button>\n            <Button onClick={onLogoutBtnClick}>Logout</Button>\n          </Row>\n          <Row>\n            <Column>{message && <p>{message}</p>}</Column>\n          </Row>\n        </Column>\n      </Row>\n    </PageLayout>\n  );\n};\n","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nexport const ProtectedRoute = ({ component: Component, user, ...rest }) => {\n  return (\n    <Route\n      user={user}\n      {...rest}\n      render={(props) => {\n        if (user) {\n          return <Component user={user} {...rest} {...props} />;\n        } else {\n          return <Redirect to=\"/\" />;\n        }\n      }}\n    />\n  );\n};\n","import React from \"react\";\nimport { getCategories, getSubCategories } from \"../utils\";\nimport { Row, Column, Input, Select, Option } from \"../../ui-kit\";\n\nexport const Characteristics = ({\n  name,\n  setName,\n  category,\n  setCategory,\n  subCategory,\n  setSubCategory,\n}) => {\n  const instrumentCategories = getCategories();\n\n  return (\n    <React.Fragment>\n      <Row>\n        <Column flex={1}>Name:</Column>\n        <Column justifyContent=\"flex-start\" flex={2}>\n          <Input\n            width=\"160px\"\n            type=\"text\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column flex={1}>Category:</Column>\n        <Column justifyContent=\"flex-start\" flex={2}>\n          <Select\n            name=\"category\"\n            width=\"170px\"\n            value={category}\n            onChange={(e) => setCategory(e.target.value)}>\n            {instrumentCategories.map((cat, i) => {\n              return (\n                <Option key={i} value={cat}>\n                  {cat !== \"default\" && cat}\n                </Option>\n              );\n            })}\n          </Select>\n        </Column>\n      </Row>\n      <Row>\n        <Column flex={1}>Sub-category:</Column>\n        <Column justifyContent=\"flex-start\" flex={2}>\n          <Select\n            name=\"sub-category\"\n            width=\"170px\"\n            value={subCategory}\n            onChange={(e) => setSubCategory(e.target.value)}>\n            {getSubCategories(category).map((subCat, i) => {\n              return (\n                <Option key={i} value={subCat}>\n                  {subCat}\n                </Option>\n              );\n            })}\n          </Select>\n        </Column>\n      </Row>\n    </React.Fragment>\n  );\n};\n","import React from \"react\";\nimport { Row, Column, ColorSquare, Button } from \"../../ui-kit\";\n\nexport const InstrumentSoundsList = ({ sounds, colors, addSound }) => {\n  const playSound = (url) => {\n    new Audio(url).play();\n  };\n\n  return (\n    <React.Fragment>\n      {sounds &&\n        sounds.map((el, i) => {\n          return (\n            <Row key={i}>\n              <Column>\n                <p style={{ margin: 0, padding: \"5px 0\" }}>\n                  {i === 0 ? \"Default\" : `${i}`}\n                </p>\n              </Column>\n              <Column>\n                <ColorSquare backgroundColor={colors[i]} />\n              </Column>\n              <Column flex={5}>\n                {el.url ? (\n                  <Button onClick={() => playSound(el.url)}>{el.name}</Button>\n                ) : (\n                  <p style={{ margin: 0, padding: \"5px 18px\" }}>No sound</p>\n                )}\n              </Column>\n            </Row>\n          );\n        })}\n      <Row>\n        <Column flex={2}></Column>\n        <Column justifyContent=\"flex-start\" flex={5}>\n          <Button backgroundColor=\"#0f0\" onClick={addSound}>\n            Add Sound\n          </Button>\n        </Column>\n      </Row>\n    </React.Fragment>\n  );\n};\n","import React, { useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faVolumeUp } from \"@fortawesome/free-solid-svg-icons\";\nimport { Bars } from \"svg-loaders-react\";\nimport { getCategories, getSubCategories } from \"../utils\";\nimport {\n  Row,\n  Column,\n  SelectableText,\n  Heading3,\n  Select,\n  Option,\n  SelectableRow,\n} from \"../../ui-kit\";\n\nexport const AvailableSoundsList = ({\n  loading,\n  availableSounds,\n  selectedSound,\n  selectSound,\n  filterName,\n}) => {\n  const [filterCategory, setFilterCategory] = useState(\"default\");\n  const [filterSubCategory, setFilterSubCategory] = useState(\"\");\n\n  const filteredSounds = availableSounds.filter((sound) => {\n    return (\n      (!filterName ||\n        sound.name\n          .toLocaleLowerCase()\n          .includes(filterName.toLocaleLowerCase())) &&\n      (filterCategory === \"default\" || filterCategory === sound.category) &&\n      (!filterSubCategory || filterSubCategory === sound.subCategory)\n    );\n  });\n\n  const volumeBtnStyle = {\n    margin: 2,\n    color: \"black\",\n    backgroundColor: \"white\",\n    padding: 6,\n    borderColor: \"black\",\n    borderWidth: 1,\n    borderStyle: \"solid\",\n    borderRadius: \"50%\",\n    cursor: \"pointer\",\n  };\n\n  const soundCategories = getCategories();\n\n  if (loading) {\n    return (\n      <Column alignItems=\"center\">\n        <Bars width={100} height={50} fill=\"#000\" stroke=\"#000\" />\n      </Column>\n    );\n  }\n  return (\n    <React.Fragment>\n      <Row>\n        <Column />\n        <Column flex={2}>\n          <Heading3>Name</Heading3>\n        </Column>\n        <Column flex={2} flexDirection=\"row\" justifyContent=\"left\">\n          <Heading3>Category</Heading3>\n          <Select\n            name=\"category\"\n            width=\"60px\"\n            value={filterCategory}\n            onChange={(e) => setFilterCategory(e.target.value)}>\n            {soundCategories.map((cat, i) => {\n              return (\n                <Option key={i} value={cat}>\n                  {cat === \"default\" ? \"all\" : cat}\n                </Option>\n              );\n            })}\n          </Select>\n        </Column>\n        <Column flex={2} flexDirection=\"row\" justifyContent=\"left\">\n          <Heading3>Sub-cat.</Heading3>\n          <Select\n            name=\"sub-category\"\n            width=\"60px\"\n            value={filterSubCategory}\n            onChange={(e) => setFilterSubCategory(e.target.value)}>\n            {getSubCategories(filterCategory).map((subCat, i) => {\n              return (\n                <Option key={i} value={subCat}>\n                  {subCat || \"all\"}\n                </Option>\n              );\n            })}\n          </Select>\n        </Column>\n        <Column flex={2}>\n          <Heading3>Pitch</Heading3>\n        </Column>\n      </Row>\n      {filteredSounds.map((el) => {\n        const playSound = () => {\n          return new Audio(el.url).play();\n        };\n        return (\n          <SelectableRow\n            selected={selectedSound && selectedSound.url === el.url}\n            noHoverHighlight\n            onClick={() => selectSound(el)}\n            key={el._id}>\n            <Column>\n              <FontAwesomeIcon\n                icon={faVolumeUp}\n                style={volumeBtnStyle}\n                onClick={playSound}\n              />\n            </Column>\n            {[\"name\", \"category\", \"subCategory\", \"pitch\"].map((columnTitle, index) => {\n              return <Column key={index} flex={2}>{el[columnTitle]}</Column>;\n            })}\n          </SelectableRow>\n        );\n      })}\n    </React.Fragment>\n  );\n};\n","import React, { useState } from \"react\";\nimport axios from \"axios\";\nimport { getCategories, getSubCategories } from \"../utils\";\nimport { Row, Column, Input, Button, Select, Option } from \"../../ui-kit\";\n\nexport const CreateSound = ({ setView, fetchData }) => {\n  const [soundName, setSoundName] = useState(\"\");\n  const [soundCategory, setSoundCategory] = useState(\"\");\n  const [soundSubCategory, setSoundSubCategory] = useState(\"\");\n  const [soundPitch, setSoundPitch] = useState(\"\");\n  const [soundFile, setSoundFile] = useState(null);\n  const [message, setMessage] = useState(\"\");\n\n  const fileSelectorHandler = (event) => {\n    const selectedFile = event.target.files[0];\n    setSoundFile(selectedFile);\n  };\n\n  const uploadSound = async () => {\n    if (!soundName || !soundCategory || !soundSubCategory) {\n      displayMessage(\"Please chose a name and select categories\");\n      return;\n    } else if (soundName.length < 5) {\n      displayMessage(\"The sound name must be at least 5 char.\");\n    } else if (!soundFile) {\n      displayMessage(\"please select a file to upload\");\n      return;\n    }\n    const uploadData = new FormData();\n    uploadData.append(\"sounds\", soundFile);\n    const uploadedSound = await axios.post(\"/api/sound/upload\", uploadData);\n    const createdSound = await axios.post(\"/api/sound\", {\n      name: soundName,\n      category: soundCategory,\n      subCategory: soundSubCategory,\n      pitch: soundPitch,\n      url: uploadedSound.data.secure_url,\n    });\n    if (createdSound.message) {\n      displayMessage(createdSound.message);\n      return;\n    }\n    setView(\"ADD\");\n    fetchData();\n  };\n\n  const soundCategories = getCategories();\n\n  const displayMessage = (mes) => {\n    setMessage(mes);\n    setInterval(() => {\n      setMessage(\"\");\n    }, 3000);\n  };\n  return (\n    <React.Fragment>\n      <Row>\n        <Column>Select file:</Column>\n        <Column flex={2}>\n          <Input\n            id=\"file\"\n            name=\"file\"\n            type=\"file\"\n            multiple=\"false\"\n            onChange={fileSelectorHandler}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column>Name:</Column>\n        <Column flex={2}>\n          <Input\n            type=\"text\"\n            value={soundName}\n            onChange={(e) => setSoundName(e.target.value)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column>Category:</Column>\n        <Column flex={2}>\n          <Select\n            name=\"category\"\n            onChange={(e) => setSoundCategory(e.target.value)}>\n            {soundCategories.map((cat, i) => {\n              return (\n                <Option key={i} value={cat}>\n                  {cat !== \"default\" && cat}\n                </Option>\n              );\n            })}\n          </Select>\n        </Column>\n      </Row>\n      <Row>\n        <Column>Sub-Category:</Column>\n        <Column flex={2}>\n          <Select\n            name=\"sub-category\"\n            onChange={(e) => setSoundSubCategory(e.target.value)}>\n            {getSubCategories(soundCategory).map((subCat, i) => {\n              return (\n                <Option key={i} value={subCat}>\n                  {subCat}\n                </Option>\n              );\n            })}\n          </Select>\n        </Column>\n      </Row>\n      <Row>\n        <Column>Pitch (optional):</Column>\n        <Column flex={2}>\n          <Input\n            type=\"text\"\n            value={soundPitch}\n            onChange={(e) => setSoundPitch(e.target.value)}\n          />\n        </Column>\n      </Row>\n      <Row>\n        <Column></Column>\n        <Column flex={2}>{soundFile && soundFile.name}</Column>\n      </Row>\n      <Row>\n        <Column>{message && message}</Column>\n      </Row>\n      <Row>\n        <Column flex={1}>\n          <Button onClick={uploadSound}>Create Sound</Button>\n        </Column>\n      </Row>\n    </React.Fragment>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { AvailableSoundsList } from \"./AvailableSoundsList\";\nimport { CreateSound } from \"./CreateSound\";\nimport { Row, Button, Column, Heading2, Input } from \"../../ui-kit\";\n\nconst views = {\n  ADD: \"ADD\",\n  UPLOAD: \"UPLOAD\",\n};\n\nexport const AddSound = ({\n  switchToOverview,\n  availableSounds,\n  selectedSound,\n  selectSound,\n  addSound,\n  loading,\n  fetchData,\n  displayMessage,\n}) => {\n  const [view, setView] = useState(views.ADD);\n  const [filterName, setFilterName] = useState(\"\");\n\n  useEffect(() => {\n    selectSound(null);\n  }, []);\n\n  const handleAddSoundClick = () => {\n    if (!selectedSound || !selectedSound.name || !selectedSound.url) {\n      displayMessage(\"Please select a sound first\");\n      return;\n    }\n    addSound({\n      id: selectedSound._id,\n      name: selectedSound.name,\n      color: \"#ddd\",\n      url: selectedSound.url,\n    });\n  };\n\n  return (\n    <React.Fragment>\n      <Row>\n        <Column flexDirection=\"row\" justifyContent=\"left\">\n          <Heading2>Add Sound</Heading2>\n        </Column>\n        <Column flexDirection=\"row\" justifyContent=\"left\">\n          <Input\n            type=\"text\"\n            width=\"140px\"\n            value={filterName}\n            placeholder=\"Search...\"\n            onChange={(e) => setFilterName(e.target.value)}\n          />\n        </Column>\n        <Column flex={2} flexDirection=\"row\" justifyContent=\"flex-end\">\n          <Button backgroundColor=\"#0f0\" onClick={handleAddSoundClick}>\n            Add\n          </Button>\n          <Button backgroundColor=\"#f00\" onClick={switchToOverview}>\n            Cancel\n          </Button>\n          {view === views.ADD && (\n            <Button\n              onClick={() => {\n                setView(views.UPLOAD);\n              }}>\n              Upload own sound\n            </Button>\n          )}\n          {view === views.UPLOAD && (\n            <Button\n              onClick={() => {\n                setView(views.ADD);\n              }}>\n              Search sound\n            </Button>\n          )}\n        </Column>\n      </Row>\n      <Row>\n        <Column flex={1}>\n          {view === views.UPLOAD && (\n            <CreateSound setView={setView} fetchData={fetchData} />\n          )}\n          {view === views.ADD && (\n            <AvailableSoundsList\n              loading={loading}\n              availableSounds={availableSounds}\n              selectedSound={selectedSound}\n              selectSound={selectSound}\n              filterName={filterName}\n            />\n          )}\n        </Column>\n      </Row>\n    </React.Fragment>\n  );\n};\n","import React, { useState, useEffect } from \"react\";\nimport { Characteristics } from \"./Characteristics\";\nimport { InstrumentSoundsList } from \"./InstrumentSoundsList\";\nimport { AddSound } from \"./AddSound\";\nimport { SketchPicker } from \"react-color\";\nimport { gradientBuilder } from \"../utils\";\nimport { config } from '../../config/config';\nimport axios from \"axios\";\nimport {\n  Row,\n  Column,\n  Button,\n  PageLayout,\n  Heading2,\n  Alert,\n  CategoryBtn,\n} from \"../../ui-kit\";\n\nconst views = {\n  OVERVIEW: \"OVERVIEW\",\n  ADD_SOUND: \"ADD_SOUND\",\n};\n\nexport const CreateInstrument = (props) => {\n  const [name, setName] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [subCategory, setSubCategory] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [sounds, setSounds] = useState([{id: config.DEFAULT_SOUND_ID}]);\n  const [view, setView] = useState(views.OVERVIEW);\n  const [loading, setLoading] = useState(false);\n  const [availableSounds, setAvailableSounds] = useState([]);\n  const [selectedSound, setSelectedSound] = useState(null);\n  const [editedColor, setEditedColor] = useState(\"start\");\n  const [colors, setColors] = useState(['#ddd']);\n  const [startColor, setStartColor] = useState(\"#aaaaaa\");\n  const [endColor, setEndColor] = useState(\"#555555\");\n  const [pickerColor, setPickerColor] = useState(\"#aaaaaa\");\n\n  const handleColorChange = (color) => {\n    setPickerColor(color.hex);\n    if (editedColor === \"start\") {\n      setStartColor(color.hex);\n    } else if (editedColor === \"end\") {\n      setEndColor(color.hex);\n    }\n  };\n\n  useEffect(()=>{\n    updateSoundsColors();\n  }, [startColor, endColor])\n\n  const updateSoundsColors = () => {\n    const updatedColors = [...colors];\n    const l = sounds.length;\n    if (l === 1) return;\n    if (l >= 2) updatedColors[1] = startColor;\n    if (l >= 3) updatedColors[l - 1] = endColor;\n    if (l > 3) {\n      const gradient = gradientBuilder(startColor, endColor, l - 3);\n      for (let i = 2; i < l - 1; i++) {\n        updatedColors[i] = gradient[i - 2];\n      }\n    }\n    setColors(updatedColors);\n  };\n\n  const openAddSoundSection = async () => {\n    setView(views.ADD_SOUND);\n    await fetchData();\n  };\n\n  const fetchData = async () => {\n    setLoading(true);\n    const { data } = await axios.get(\"/api/sound\");\n    if (data) {\n      setAvailableSounds(data);\n      setLoading(false);\n    }\n  };\n\n  const displayMessage = (mes) => {\n    setMessage(mes);\n    setInterval(() => {\n      setMessage(\"\");\n    }, 2000);\n  };\n\n  const addSound = (sound) => {\n    if ((!sound.url, !sound.color)) {\n      displayMessage(\"Please select or upload a sound and pick a color\");\n      return;\n    }\n    const newSound = {\n      id: sound.id,\n      name: sound.name,\n      url: sound.url,\n      pitch: sound.pitch || \"\",\n    };\n    const updatedSounds = [...sounds, newSound];\n    setSounds(updatedSounds);\n    setColors([...colors, '#ddd']);\n    setView(views.OVERVIEW);\n  };\n\n  const switchToOverview = () => {\n    setView(views.OVERVIEW);\n  };\n\n  const selectSound = (sound) => {\n    setSelectedSound(sound);\n  };\n\n  const resetInstrument = () => {\n    setName(\"\");\n    setCategory(\"\");\n    setSubCategory(\"\");\n    setSounds([{id: config.DEFAULT_SOUND_ID}]);\n  };\n\n  const saveInstrument = async () => {\n    if (!name || !category || !subCategory) {\n      displayMessage(`Please enter the fields: ${!name?'Name':''} ${!category?'Category':''} ${!subCategory?'Sub-category':''}`);\n      return;\n    }\n    if (sounds.length < 2) {\n      displayMessage(\"You must select at least 1 sound\");\n      return;\n    }\n    const createdInstrument = await axios.post(\"/api/instrument\", {\n      name,\n      category,\n      subCategory,\n      sounds: sounds.map(el=> el.id || null),\n      colors: colors,\n      creator: props.user._id,\n      private: false,\n    });\n    if (createdInstrument.message) {\n      displayMessage(createdInstrument.message);\n    } else if (createdInstrument.status === 200) {\n      displayMessage(`Success! You just created a new instrument!`);\n      resetInstrument();\n    }\n  };\n\n  const toggleHelp = () => {};\n\n  return (\n    <PageLayout>\n      <Row>{message && <Alert>{message}</Alert>}</Row>\n      {view === views.ADD_SOUND && (\n        <AddSound\n          switchToOverview={switchToOverview}\n          availableSounds={availableSounds}\n          selectedSound={selectedSound}\n          selectSound={selectSound}\n          loading={loading}\n          addSound={addSound}\n          fetchData={fetchData}\n          displayMessage={displayMessage}\n        />\n      )}\n      {view === views.OVERVIEW && (\n        <React.Fragment>\n          <Row>\n            <Column flex={1}>\n              <Heading2>Create Instrument</Heading2>\n            </Column>\n            <Column\n              flex={2}\n              flexDirection=\"row\"\n              alignItems=\"flex-end\"\n              justifyContent=\"flex-end\">\n              <Button onClick={saveInstrument}>Save Instrument</Button>\n              <Button onClick={resetInstrument}>Reset</Button>\n              <Button onClick={toggleHelp}>Help</Button>\n            </Column>\n          </Row>\n          <Row>\n            <Column flex={2}>\n              <Characteristics\n                name={name}\n                setName={setName}\n                category={category}\n                setCategory={setCategory}\n                subCategory={subCategory}\n                setSubCategory={setSubCategory}\n              />\n              <Row>\n                <Column>\n                  <h3>Sounds:</h3>\n                </Column>\n              </Row>\n              <Row>\n                <Column>\n                  <InstrumentSoundsList\n                    sounds={sounds}\n                    colors={colors}\n                    addSound={openAddSoundSection}\n                  />\n                </Column>\n              </Row>\n            </Column>\n            <Column flex={1}>\n              <SketchPicker\n                color={pickerColor}\n                onChangeComplete={handleColorChange}\n              />\n              <Row>\n                <Column\n                  flexDirection=\"row\"\n                  alignItems=\"center\"\n                  justifyContent=\"flex-start\">\n                  <CategoryBtn\n                    selected={editedColor === \"start\"}\n                    onClick={() => setEditedColor(\"start\")}>\n                    Pick start color\n                  </CategoryBtn>\n                  <CategoryBtn\n                    selected={editedColor === \"end\"}\n                    onClick={() => setEditedColor(\"end\")}>\n                    Pick end color\n                  </CategoryBtn>\n                </Column>\n              </Row>\n            </Column>\n          </Row>\n        </React.Fragment>\n      )}\n    </PageLayout>\n  );\n};\n","/*\n * Inspired by https://codepen.io/BangEqual/pen/VLNowO\n */\n\nexport const gradientBuilder = (value1, value2, steps) => {\n  //return a workable RGB int array [r,g,b] from hex representation\n  function processHEX(val) {\n    //does the hex contain extra char?\n    const hex = val.length > 6 ? val.substr(1, val.length - 1) : val;\n    let r, g, b;\n    // is it a six character hex?\n    if (hex.length > 3) {\n      //scrape out the numerics\n      r = hex.substr(0, 2);\n      g = hex.substr(2, 2);\n      b = hex.substr(4, 2);\n\n      // if not six character hex,\n      // then work as if its a three character hex\n    } else {\n      // just concat the pieces with themselves\n      r = hex.substr(0, 1) + hex.substr(0, 1);\n      g = hex.substr(1, 1) + hex.substr(1, 1);\n      b = hex.substr(2, 1) + hex.substr(2, 1);\n    }\n    // return our clean values\n    return [parseInt(r, 16), parseInt(g, 16), parseInt(b, 16)];\n  }\n\n  /**\n   * padding function:\n   * cba to roll my own, thanks Pointy!\n   * ==================================\n   * source: http://stackoverflow.com/questions/10073699/pad-a-number-with-leading-zeros-in-javascript\n   */\n  const pad = (n, width, z) => {\n    z = z || \"0\";\n    n = n + \"\";\n    return n.length >= width ? n : new Array(width - n.length + 1).join(z) + n;\n  };\n\n  const val1RGB = processHEX(value1);\n  const val2RGB = processHEX(value2);\n  const colors = [\n    // somewhere to dump gradient\n  ];\n\n  //the percentage representation of the step\n  const stepsPerc = 100 / (steps + 1);\n\n  // diffs between two values\n  const valClampRGB = [\n    val2RGB[0] - val1RGB[0],\n    val2RGB[1] - val1RGB[1],\n    val2RGB[2] - val1RGB[2],\n  ];\n\n  // build the color array out with color steps\n  for (let i = 0; i < steps; i++) {\n    const clampedR =\n      valClampRGB[0] > 0\n        ? pad(\n            Math.round((valClampRGB[0] / 100) * (stepsPerc * (i + 1))).toString(\n              16\n            ),\n            2\n          )\n        : pad(\n            Math.round(\n              val1RGB[0] + (valClampRGB[0] / 100) * (stepsPerc * (i + 1))\n            ).toString(16),\n            2\n          );\n\n    const clampedG =\n      valClampRGB[1] > 0\n        ? pad(\n            Math.round((valClampRGB[1] / 100) * (stepsPerc * (i + 1))).toString(\n              16\n            ),\n            2\n          )\n        : pad(\n            Math.round(\n              val1RGB[1] + (valClampRGB[1] / 100) * (stepsPerc * (i + 1))\n            ).toString(16),\n            2\n          );\n\n    const clampedB =\n      valClampRGB[2] > 0\n        ? pad(\n            Math.round((valClampRGB[2] / 100) * (stepsPerc * (i + 1))).toString(\n              16\n            ),\n            2\n          )\n        : pad(\n            Math.round(\n              val1RGB[2] + (valClampRGB[2] / 100) * (stepsPerc * (i + 1))\n            ).toString(16),\n            2\n          );\n    colors[i] = [\"#\", clampedR, clampedG, clampedB].join(\"\");\n  }\n\n  return colors;\n};\n","import React from \"react\";\nimport { Row, Column, PageLayout, Heading2, Heading3 } from \"../../ui-kit\";\n\nexport const Help = () => {\n  return (\n    <PageLayout>\n      <Row>\n        <Column>\n          <Heading2>Help</Heading2>\n        </Column>\n      </Row>\n      <Row>\n        <Column>\n          <p>\n            The 2 main sections of the app are \"Listen\", where you can browse,\n            check and play the music loops that are created, and \"Create\" where\n            you can create your own loops.\n          </p>\n        </Column>\n      </Row>\n      <Row>\n        <Column>\n          <Heading3>Create song</Heading3>\n          <p>\n            In the song creation space you see the music grid which is composed\n            of notes represented by gray squares, and a control panel at the\n            bottom:\n          </p>\n          <Row alignItems=\"center\" justifyContent=\"center\">\n            <Column alignItems=\"center\" justifyContent=\"center\">\n              <img src=\"images/music-grid-1.png\" alt=\"Music grid example\" />\n            </Column>\n          </Row>\n          <p>\n            On the music grid, the horizontal axis is the time, the vertical is\n            the array of instruments that are available to you. Let's first try\n            the default instruments.\n          </p>\n          <p>\n            By clicking on a square, it changes color as you activate a sound to\n            be played at a certain time in the loop. For example if you click on\n            the first square of the kick, a kick will be played at the\n            beginning.\n          </p>\n          <Row alignItems=\"center\" justifyContent=\"center\">\n            <Column alignItems=\"center\" justifyContent=\"center\">\n              <img src=\"images/music-grid-2.png\" alt=\"Music grid example\" />\n            </Column>\n          </Row>\n          <p>\n            Some instruments have only one sound, some have several, clicking\n            several times on the same square switches between different sounds.\n            Let's create a basic loop by switching on the notes (1 click) to\n            form the following pattern:\n          </p>\n          <Row alignItems=\"center\" justifyContent=\"center\">\n            <Column alignItems=\"center\" justifyContent=\"center\">\n              <img src=\"images/music-grid-3.png\" alt=\"Music grid example\" />\n            </Column>\n          </Row>\n          <p>\n            Press play and the magic happens! The notes are read as a sequence,\n            at a 120 tempo, 8 squares represent a second, so our loop is 1\n            second long.\n          </p>\n          <p>\n            To make the loop longer, press the \"+\" button next to \"bars\" and the\n            grid extends. When the grid is longer than 16 notes, it gets spread\n            on several pages that you can check and select using the page\n            selector:\n          </p>\n          <Row alignItems=\"center\" justifyContent=\"center\">\n            <Column alignItems=\"center\" justifyContent=\"center\">\n              <img\n                src=\"images/music-pages-selectors.png\"\n                alt=\"Page selectors example\"\n              />\n            </Column>\n          </Row>\n          <p>\n            You can add and remove instruments (grid lines) using the menu. Once\n            you are happy with your creation, click on \"save\" to keep it and\n            share it. To save, you will need to create a profile, but this takes\n            a couple of seconds. That's about it!\n          </p>\n        </Column>\n      </Row>\n      <Row>\n        <Column>\n          <Heading3>Have fun!</Heading3>\n        </Column>\n      </Row>\n    </PageLayout>\n  );\n};\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { HeaderLayout, HeaderTitle, MenuButton, Wrapper } from \"../../ui-kit\";\n\nconst linkStyle = {\n  textDecoration: \"none\",\n  color: \"black\",\n};\n\nconst textLinkStyle = {\n  textDecoration: \"none\",\n  color: \"black\",\n  padding: \"0 8px\",\n};\n\nexport const Header = (props) => {\n  return (\n    <HeaderLayout>\n      <Wrapper flexDirection=\"row\" justifyContent=\"space-between\">\n        <Link style={linkStyle} to=\"/\">\n          <HeaderTitle>Boum-Tchak!</HeaderTitle>\n        </Link>\n        <div\n          style={{ display: \"flex\", paddingRight: 20, alignItems: \"center\" }}>\n          <Link style={linkStyle} to=\"/listen\">\n            <MenuButton>Listen</MenuButton>\n          </Link>\n          <Link style={linkStyle} to=\"/create\">\n            <MenuButton>Create</MenuButton>\n          </Link>\n          {props.user ? (\n            <Link style={linkStyle} to=\"/profile\">\n              <MenuButton>Profile</MenuButton>\n            </Link>\n          ) : (\n            <React.Fragment>\n              <Link style={linkStyle} to=\"/signup\">\n                <MenuButton>Signup</MenuButton>\n              </Link>\n              <Link style={textLinkStyle} to=\"/login\">\n                Login\n              </Link>\n            </React.Fragment>\n          )}\n          <Link style={textLinkStyle} to=\"/help\">\n            Help\n          </Link>\n        </div>\n      </Wrapper>\n    </HeaderLayout>\n  );\n};\n","import React from \"react\";\nimport { CreateSong } from \"./components/CreateSong/CreateSong\";\nimport { SongsList } from \"./components/DisplaySong/SongsList\";\nimport { LoadSong } from \"./components/LoadSong/LoadSong\";\nimport { Login } from \"./components/Auth/Login\";\nimport { Signup } from \"./components/Auth/Signup\";\nimport { Profile } from \"./components/Auth/Profile\";\nimport { ProtectedRoute } from \"./components/Auth/ProtectedRoute\";\nimport { CreateInstrument } from \"./components/CreateInstrument/CreateInstrument\";\nimport { Help } from \"./components/InfoPages/Help\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\nimport { MainScreen, Wrapper, BackHeader } from \"./ui-kit\";\nimport { Header } from \"./components/Header/Header\";\nimport \"./App.css\";\n\nclass App extends React.Component {\n  state = {\n    user: this.props.user,\n  };\n\n  setUser = (user) => {\n    this.setState({\n      user: user,\n    });\n  };\n\n  render() {\n    return (\n      <MainScreen>\n        <Header user={this.state.user} />\n        <Wrapper>\n          <BackHeader />\n          <Switch>\n            <Route\n              exact\n              path=\"/create\"\n              render={(props) => (\n                <CreateSong user={this.state.user} {...props} />\n              )}\n            />\n            <Route exact path=\"/help\" render={(props) => <Help {...props} />} />\n            <Route\n              exact\n              path=\"/create/:id\"\n              render={(props) => (\n                <CreateSong user={this.state.user} {...props} />\n              )}\n            />\n            <Route\n              exact\n              path=\"/login\"\n              render={(props) => {\n                if (!this.state.user) {\n                  return <Login setUser={this.setUser} {...props} />;\n                } else {\n                  return <Redirect to=\"/\" />;\n                }\n              }}\n            />\n            <Route\n              exact\n              path=\"/signup\"\n              render={(props) => {\n                if (!this.state.user) {\n                  return <Signup setUser={this.setUser} {...props} />;\n                } else {\n                  return <Redirect to=\"/\" />;\n                }\n              }}\n            />\n            <ProtectedRoute\n              exact\n              path=\"/profile\"\n              user={this.state.user}\n              setUser={this.setUser}\n              component={Profile}\n            />\n            <ProtectedRoute\n              exact\n              path=\"/create-instrument\"\n              user={this.state.user}\n              setUser={this.setUser}\n              component={CreateInstrument}\n            />\n            <Route\n              exact\n              path=\"/\"\n              render={(props) => (\n                <SongsList isAppIntroDisplayed={true} {...props} />\n              )}\n            />\n            <Route\n              exact\n              path=\"/listen\"\n              render={(props) => (\n                <SongsList isAppIntroDisplayed={false} {...props} />\n              )}\n            />\n            <Route\n              exact\n              path=\"/load-song\"\n              render={(props) => {\n                if (this.state.user) {\n                  return <LoadSong user={this.state.user} {...props} />;\n                } else {\n                  return <Redirect to=\"/\" />;\n                }\n              }}\n            />\n          </Switch>\n        </Wrapper>\n      </MainScreen>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import {\n  SET_TEMPO,\n  SET_TIMEOUT_TEMPO,\n  SET_IS_ADD_INSTRUMENT_VISIBLE,\n  SET_IS_NOTE_PLAYED_ON_CLICK,\n  SET_IS_SAVE_SONG_VISIBLE,\n  SET_IS_PLAYING,\n  SET_INSTRUMENTS,\n  SET_PARTITION,\n  SET_IS_REMOVE_INSTRUMENT_VISIBLE,\n  SET_COPIED_PARTITION_BAR,\n  SET_TONE_JS_PARTITION,\n} from \"./types\";\n\nexport default (state, action) => {\n  const { payload, type } = action;\n\n  switch (type) {\n    case SET_TEMPO:\n      return {\n        ...state,\n        tempo: payload,\n      };\n    case SET_TIMEOUT_TEMPO:\n      return {\n        ...state,\n        timeoutTempo: payload,\n      };\n    case SET_IS_ADD_INSTRUMENT_VISIBLE:\n      return {\n        ...state,\n        isAddInstrumentVisible: payload,\n      };\n    case SET_IS_REMOVE_INSTRUMENT_VISIBLE:\n      return {\n        ...state,\n        isRemoveInstrumentVisible: payload,\n      };\n    case SET_IS_NOTE_PLAYED_ON_CLICK:\n      return {\n        ...state,\n        isNotePlayedOnClick: payload,\n      };\n    case SET_IS_SAVE_SONG_VISIBLE:\n      return {\n        ...state,\n        isSaveSongVisible: payload,\n      };\n    case SET_IS_PLAYING:\n      return {\n        ...state,\n        isPlaying: payload,\n      };\n    case SET_INSTRUMENTS:\n      return {\n        ...state,\n        instruments: payload,\n      };\n    case SET_PARTITION:\n      return {\n        ...state,\n        partition: payload,\n      };\n    case SET_COPIED_PARTITION_BAR:\n      return {\n        ...state,\n        copiedPartitionBar: payload,\n      };\n    default:\n      return state;\n  }\n};\n","export const TYPE_1 = \"TYPE_1\";\nexport const SET_TEMPO = \"SET_TEMPO\";\nexport const SET_TIMEOUT_TEMPO = \"SET_TIMEOUT_TEMPO\";\nexport const SET_IS_NOTE_PLAYED_ON_CLICK = \"SET_IS_NOTE_PLAYED_ON_CLICK\";\nexport const SET_IS_ADD_INSTRUMENT_VISIBLE = \"SET_IS_ADD_INSTRUMENT_VISIBLE\";\nexport const SET_IS_SAVE_SONG_VISIBLE = \"SET_IS_SAVE_SONG_VISIBLE\";\nexport const SET_IS_PLAYING = \"SET_IS_PLAYING\";\nexport const SET_PARTITION = \"SET_PARTITION\";\nexport const SET_INSTRUMENTS = \"SET_INSTRUMENTS\";\nexport const SET_IS_REMOVE_INSTRUMENT_VISIBLE = \"SET_IS_REMOVE_INSTRUMENT_VISIBLE\";\nexport const SET_COPIED_PARTITION_BAR = \"SET_COPIED_PARTITION_BAR\";","import React, { useReducer } from \"react\";\nimport { config } from \"../config/config\";\n\nimport GlobalContext from \"./GlobalContext\";\nimport GlobalReducer from \"./GlobalReducer\";\nimport {\n  SET_TEMPO,\n  SET_TIMEOUT_TEMPO,\n  SET_IS_SAVE_SONG_VISIBLE,\n  SET_IS_NOTE_PLAYED_ON_CLICK,\n  SET_IS_ADD_INSTRUMENT_VISIBLE,\n  SET_IS_PLAYING,\n  SET_INSTRUMENTS,\n  SET_PARTITION,\n  SET_IS_REMOVE_INSTRUMENT_VISIBLE,\n  SET_COPIED_PARTITION_BAR,\n  SET_TONE_JS_PARTITION,\n} from \"./types\";\n\nexport const GlobalState = (props) => {\n  let initialState = {\n    isPLaying: false,\n    instruments: [],\n    partition: [],\n    copiedPartitionBar: null,\n    isRemoveInstrumentVisible: false,\n    partitionLength: config.START_PARTITION_LENGTH,\n    maxPartitionLength: config.MAX_PARTITION_LENGTH,\n    tempo: config.DEFAULT_TEMPO,\n    timeoutTempo: config.DEFAULT_TIMEOUT,\n    isNotePlayedOnClick: true,\n    isAddInstrumentVisible: false,\n    isSaveSongVisible: false,\n  };\n\n  const [state, dispatch] = useReducer(GlobalReducer, initialState);\n\n  const setTempo = (value) => {\n    dispatch({ type: SET_TEMPO, payload: value });\n  };\n\n  const setTimeoutTempo = (value) => {\n    dispatch({ type: SET_TIMEOUT_TEMPO, payload: value });\n  };\n\n  const setIsNotePlayedOnClick = (value) => {\n    dispatch({ type: SET_IS_NOTE_PLAYED_ON_CLICK, payload: value });\n  };\n  const toggleIsAddInstrumentVisible = () => {\n    const newValue = !state.isAddInstrumentVisible;\n    dispatch({ type: SET_IS_ADD_INSTRUMENT_VISIBLE, payload: newValue });\n  };\n  const setIsSaveSongVisible = (value) => {\n    dispatch({ type: SET_IS_SAVE_SONG_VISIBLE, payload: value });\n  };\n\n  const setIsRemoveInstrumentVisible = (value) => {\n    dispatch({ type: SET_IS_REMOVE_INSTRUMENT_VISIBLE, payload: value });\n  };\n\n  const toggleIsRemoveInstrumentVisible = () => {\n    const newValue = !state.isRemoveInstrumentVisible;\n    dispatch({ type: SET_IS_REMOVE_INSTRUMENT_VISIBLE, payload: newValue });\n  };\n\n  const setIsPlaying = (value) => {\n    dispatch({ type: SET_IS_PLAYING, payload: value });\n  };\n\n  const setInstruments = (value) => {\n    dispatch({ type: SET_INSTRUMENTS, payload: value });\n  };\n\n  const setPartition = (value) => {\n    dispatch({ type: SET_PARTITION, payload: value });\n  };\n\n  const deleteLine = (lineNumber) => {\n    const updatedPartition = [...state.partition];\n    const updatedInstruments = [...state.instruments];\n    updatedPartition.splice(lineNumber, 1);\n    updatedInstruments.splice(lineNumber, 1);\n    setPartition(updatedPartition);\n    setInstruments(updatedInstruments);\n    setIsRemoveInstrumentVisible(!setIsRemoveInstrumentVisible);\n  };\n\n  const copyOneBar = (barIndex) => {\n    const newCopiedBar = [];\n    const startIndex = 4 * barIndex;\n    const endIndex = startIndex + 3;\n    state.partition.forEach((el) => {\n      const newLine = [];\n      for (let i = startIndex; i <= endIndex; i++) {\n        newLine.push(el[i]);\n      }\n      newCopiedBar.push(newLine);\n    });\n    dispatch({ type: SET_COPIED_PARTITION_BAR, payload: newCopiedBar });\n  };\n\n  const pasteOneBar = (barIndex) => {\n    const updatedPartition = [];\n    const partitionLength = state.partition[0].length;\n    const startIndex = 4 * barIndex;\n    const endIndex = startIndex + 3;\n    state.partition.forEach((el, index) => {\n      const newLine = [];\n      let offset = 0;\n      for (let i = 0; i < partitionLength; i++) {\n        if (i >= startIndex && i <= endIndex) {\n          newLine.push(state.copiedPartitionBar[index][0 + offset]);\n          offset++;\n        } else {\n          newLine.push(el[i]);\n        }\n      }\n      updatedPartition.push(newLine);\n    });\n    dispatch({ type: SET_PARTITION, payload: updatedPartition });\n  };\n\n  return (\n    <GlobalContext.Provider\n      value={{\n        tempo: state.tempo,\n        isPlaying: state.isPlaying,\n        instruments: state.instruments,\n        partition: state.partition,\n        copiedPartitionBar: state.copiedPartitionBar,\n        timeoutTempo: state.timeoutTempo,\n        isNotePlayedOnClick: state.isNotePlayedOnClick,\n        isAddInstrumentVisible: state.isAddInstrumentVisible,\n        isSaveSongVisible: state.isSaveSongVisible,\n        isRemoveInstrumentVisible: state.isRemoveInstrumentVisible,\n        setTempo,\n        setIsPlaying,\n        setInstruments,\n        setPartition,\n        copyOneBar,\n        pasteOneBar,\n        setIsRemoveInstrumentVisible,\n        toggleIsRemoveInstrumentVisible,\n        setTimeoutTempo,\n        setIsNotePlayedOnClick,\n        toggleIsAddInstrumentVisible,\n        setIsSaveSongVisible,\n        deleteLine,\n      }}>\n      {props.children}\n    </GlobalContext.Provider>\n  );\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport { GlobalState } from \"./context/GlobalState\";\nimport axios from \"axios\";\n\nconst renderApp = async () => {\n  const authResponse = await axios.get(\"/api/auth/loggedin\");\n  const user = authResponse.data;\n  ReactDOM.render(\n    <BrowserRouter>\n      <GlobalState>\n        <App user={user} />\n      </GlobalState>\n    </BrowserRouter>,\n    document.getElementById(\"root\")\n  );\n};\nrenderApp();\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}