(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{143:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){"use strict";n.r(t);var r=n(8),c=n.n(r),i=n(14),a=n(1),o=n(0),s=n.n(o),u=n(45),l=n.n(u),j=(n(143),n(7)),d=n(2),b=n(3),h=n(5),x=n(4),p=n(15),f=n(11),O=n(16),g=n(17);function m(){var e=Object(O.a)(["\n  padding: 3px;\n  margin: 0px;\n  cursor: pointer;\n  color: ",";\n  background-color: ",";\n  &:hover {\n    background-color: black;\n    color: white;\n  }\n"]);return m=function(){return e},e}function v(){var e=Object(O.a)(["\n  height: 24px;\n  width: 24px;\n  margin: 4px;\n  border: solid black 1px;\n  background-color: ",";\n"]);return v=function(){return e},e}function y(){var e=Object(O.a)(["\n  src: ","\n  height: 260px;\n  width: 260px;\n  object-fit: cover;\n  padding: 10px;\n"]);return y=function(){return e},e}function w(){var e=Object(O.a)(["\n  font-size: 12px;\n"]);return w=function(){return e},e}function k(){var e=Object(O.a)(["\n  margin: 8px;\n  height: 26px;\n  width: ",";\n"]);return k=function(){return e},e}function C(){var e=Object(O.a)(["\n  margin: 0px 5px;\n"]);return C=function(){return e},e}function S(){var e=Object(O.a)(["\n  border: solid black 1px;\n  width: ",";\n"]);return S=function(){return e},e}function P(){var e=Object(O.a)(["\n  height: 24px;\n  width: ",";\n  margin: 10px;\n  border: 1px solid black;\n  border-radius: 4px;\n"]);return P=function(){return e},e}function T(){var e=Object(O.a)(["\n  position: relative;\n  margin: 30px 10px;\n  border: solid 1px black;\n  border-radius: 10px;\n  padding-top: 10px;\n  width: 80%;\n  &:hover "," {\n    visibility: visible;\n  }\n"]);return T=function(){return e},e}function I(){var e=Object(O.a)(["\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  margin-top: -8px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  visibility: hidden;\n"]);return I=function(){return e},e}function N(){var e=Object(O.a)(["\n  margin: auto;\n  min-width: 400px;\n  max-width: 700px;\n  position: absolute;\n  z-index: 10;\n  top: 150px;\n  box-shadow: 3px 3px 5px #bbb;\n  background-color: white;\n  border: solid 1px black;\n  border-radius: 3px;\n  padding: 10px;\n"]);return N=function(){return e},e}var A=g.a.div(N()),E=g.a.div(I()),_=g.a.div(T(),E),D=g.a.input(P(),(function(e){return e.width||"100px"})),L=(g.a.form(S(),(function(e){return e.width?"".concat(e.width,"px"):"100%"})),g.a.label(C())),B=g.a.select(k(),(function(e){return e.width||"110px"})),M=g.a.option(w()),R=g.a.img(y(),(function(e){return e.src})),U=g.a.div(v(),(function(e){return e.backgroundColor||"white"})),V=g.a.p(m(),(function(e){return e.selected?"white":"black"}),(function(e){return e.selected?"black":"white"}));function F(){var e=Object(O.a)(["\n  color: ",";\n  border: 1px solid #aaa;\n  margin: ",";\n  padding: ",";\n  height: ",";\n  background-color: #fff;\n  border-radius: 4px;\n  font-size: 14px;\n  transition: background-color 0.5s, color 0.5s;\n  &:hover {\n    background-color: #888;\n    color: #fff;\n  }\n"]);return F=function(){return e},e}function H(){var e=Object(O.a)(["\n  color: ",";\n  border: 1px solid #aaa;\n  margin: 4px 4px 4px 8px;\n  background-color: #fff;\n  border-radius: 4px;\n  font-size: 12px;\n  &:hover {\n    background-color: #aaa;\n    color: #fff;\n  }\n"]);return H=function(){return e},e}function z(){var e=Object(O.a)(["\n  color: black;\n  background-color: white;\n  padding: 6px;\n  border-color: black;\n  border: 1px solid black;\n  border-radius: 50%;\n  cursor: pointer;\n"]);return z=function(){return e},e}function G(){var e=Object(O.a)(["\n  color: ",";\n  border: 1px solid #aaa;\n  margin: ",";\n  padding: ",";\n  background-color: #fff;\n  border-radius: 4px;\n  font-size: 14px;\n  font-weight: bold;\n  transition: background-color 0.5s, color 0.5s;\n  &:hover {\n    background-color: #f00;\n    color: #fff;\n  }\n"]);return G=function(){return e},e}function W(){var e=Object(O.a)(["\n  height: 30px;\n  min-width: 40px;\n  margin: 8px;\n  padding: 0px 10px;\n  border-radius: 15px;\n  border: solid 1px black;\n  color: ",";\n  background-color: ",";\n  font-size: 12px;\n  &:hover {\n    background-color: black;\n    color: white;\n    opacity: ",";\n  }\n"]);return W=function(){return e},e}function J(){var e=Object(O.a)(["\n  margin: 8px;\n  background-color: ",";\n  border: solid 1px black;\n  border-radius: 5px;\n  padding: 6px 12px;\n  color: #000;\n  text-decoration: none;\n  cursor: pointer;\n  transition: background-color 0.7s, color 0.7s;\n  &:hover {\n    background-color: black;\n    color: white;\n  }\n"]);return J=function(){return e},e}function q(){var e=Object(O.a)(["\n  height: ",";\n  min-width: ",";\n  margin: 8px;\n  padding: 0px 10px;\n  border-radius: 5px;\n  border: solid 1px #555;\n  color: #333;\n  background-color: ",";\n  font-size: 14px;\n  cursor: pointer;\n  transition: background-color 0.7s, color 0.7s;\n  &:hover {\n    background-color: ",";\n    color: white;\n  }\n"]);return q=function(){return e},e}var Y=g.a.button(q(),(function(e){return"big"===e.variant?"48px":"32px"}),(function(e){return"big"===e.variant?"60px":"36px"}),(function(e){return e.backgroundColor||"white"}),(function(e){return e.hoverColor||"#555"})),K=g.a.div(J(),(function(e){return e.backgroundColor||"white"})),X=g.a.button(W(),(function(e){return e.selected?"white":"black"}),(function(e){return e.selected?"black":"white"}),(function(e){return e.selected?.5:1})),Q=g.a.p(G(),(function(e){return e.color||"#888"}),(function(e){return e.margin||"4px 8px 4px 0px"}),(function(e){return e.padding||"2px"})),$=(g.a.button(z()),g.a.button(H(),(function(e){return e.color||"#aaa"}))),Z=g.a.button(F(),(function(e){return e.color||"#888"}),(function(e){return e.margin||"4px 4px 4px 0px"}),(function(e){return e.padding||"default"}),(function(e){return e.height||"default"}));function ee(){var e=Object(O.a)(["\n  margin: 4px;\n  padding: 12px;\n  border: solid #888 1px;\n  border-radius: 8px;\n  display: flex;\n  flex-direction: ",";\n  justify-content: space-between;\n  &:hover {\n    background-color: ",";\n  }\n"]);return ee=function(){return e},e}function te(){var e=Object(O.a)(["\n  height: ",";\n"]);return te=function(){return e},e}function ne(){var e=Object(O.a)(["\n  width: 90%;\n  padding: 20px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flexStart;\n"]);return ne=function(){return e},e}function re(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n  width: 100vw;\n  max-width: ",";\n"]);return re=function(){return e},e}function ce(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return ce=function(){return e},e}function ie(){var e=Object(O.a)(["\n  height: 110px;\n"]);return ie=function(){return e},e}function ae(){var e=Object(O.a)(["\n  height: 70px;\n  width: 100vw;\n  z-index: 10;\n  background-color: white;\n  display: flex;\n  position: fixed;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 4px 4px 5px #eee;\n"]);return ae=function(){return e},e}function oe(){var e=Object(O.a)(["\n  display: flex;\n  flex-direction: ",";\n  min-height: 20px;\n  padding: ",";\n  align-items: ",";\n  justify-content: ",";\n  flex: ",";\n"]);return oe=function(){return e},e}function se(){var e=Object(O.a)(["\n  min-height: 60vh;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n"]);return se=function(){return e},e}function ue(){var e=Object(O.a)(["\n  padding: ",";\n  cursor: pointer;\n  color: ",";\n  background-color: ",";\n  &:hover {\n    background-color: ",";\n    color: ",";\n    opacity: ",";\n  }\n"]);return ue=function(){return e},e}function le(){var e=Object(O.a)(["\n  padding: ",";\n  display: flex;\n  align-items: ",";\n  justify-content: ",";\n  width: 100%;\n"]);return le=function(){return e},e}var je=g.a.div(le(),(function(e){return e.padding||0}),(function(e){return e.alignItems||"center"}),(function(e){return e.justifyContent||"center"})),de=Object(g.a)(je)(ue(),(function(e){return e.padding||0}),(function(e){return e.selected?"white":"black"}),(function(e){return e.selected?"black":e.bgColor||"white"}),(function(e){return e.noHoverHighlight&&!e.selected?"white":"black"}),(function(e){return e.noHoverHighlight&&!e.selected?"black":"white"}),(function(e){return e.selected?.5:1})),be=g.a.div(se()),he=g.a.div(oe(),(function(e){return e.flexDirection||"column"}),(function(e){return e.padding||0}),(function(e){return e.alignItems||"flex-start"}),(function(e){return e.justifyContent||"center"}),(function(e){return e.flex||1})),xe=g.a.div(ae()),pe=g.a.div(ie()),fe=g.a.div(ce()),Oe=g.a.div(re(),(function(e){return e.flexDirection||"column"}),(function(e){return e.alignItems||"center"}),(function(e){return e.justifyContent||"flex-start"}),(function(e){return e.maxWidth||"900px"})),ge=g.a.div(ne()),me=g.a.div(te(),(function(e){return e.height||"20px"})),ve=g.a.div(ee(),(function(e){return e.flexDirection||"row"}),(function(e){return e.clickable?"#aaa":"default"}));function ye(){var e=Object(O.a)(["\n  color: ",";\n  margin: ",";\n  padding: ",";\n  font-size: 14px;\n"]);return ye=function(){return e},e}function we(){var e=Object(O.a)(["\n  color: red;\n"]);return we=function(){return e},e}function ke(){var e=Object(O.a)(["\n  padding: 0px 50px;\n  font-size: 36px;\n  text-shadow: 4px 4px #7799dd;\n"]);return ke=function(){return e},e}function Ce(){var e=Object(O.a)(["\n  font-size: 12px;\n"]);return Ce=function(){return e},e}function Se(){var e=Object(O.a)(["\n  font-size: 12px;\n  line-height: 12px;\n  padding: ",";\n  margin: 0;\n"]);return Se=function(){return e},e}function Pe(){var e=Object(O.a)(["\n  font-size: 10px;\n  line-height: 10px;\n  width: ",";\n"]);return Pe=function(){return e},e}function Te(){var e=Object(O.a)(["\n  padding: 0px 10px;\n  background-color: white;\n  font-weight: ",";\n  font-size: 12px;\n"]);return Te=function(){return e},e}function Ie(){var e=Object(O.a)(["\n  margin-top: -32px;\n  padding: 0px 12px;\n  display: flex;\n  justify-content: space-between;\n"]);return Ie=function(){return e},e}function Ne(){var e=Object(O.a)(["\n  padding: 8px 0;\n  margin: 0 0 4px 0;\n"]);return Ne=function(){return e},e}function Ae(){var e=Object(O.a)(["\n  padding: 8px 0;\n  margin: 0 0 8px 0;\n"]);return Ae=function(){return e},e}var Ee=g.a.h2(Ae()),_e=g.a.h3(Ne()),De=g.a.div(Ie()),Le=g.a.p(Te(),(function(e){return e.b?"bold":"regular"})),Be=g.a.p(Pe(),(function(e){return e.width||"70px"})),Me=g.a.p(Se(),(function(e){return e.padding||2})),Re=(g.a.span(Ce()),g.a.h1(ke())),Ue=g.a.p(we()),Ve=g.a.p(ye(),(function(e){return e.color||"#888"}),(function(e){return e.margin||"4px 4px 4px 0px"}),(function(e){return e.padding||"default"}));function Fe(){var e=Object(O.a)(["\n  border-bottom: 1px solid #aaa;\n  width: ",";\n  height: ",";\n  margin: 0px 3px 12px 3px;\n  font-size: 10px;\n  color: #aaa;\n"]);return Fe=function(){return e},e}function He(){var e=Object(O.a)(["\n  height: 8px;\n  width: 8px;\n  margin: 4px;\n  border-width: 2px;\n  border-style: solid;\n  border-radius: 50%;\n  border-color: ",";\n  background-color: ",";\n  cursor: pointer;\n"]);return He=function(){return e},e}function ze(){var e=Object(O.a)(["\n  height: 28px;\n  width: 28px;\n  margin: 3px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: white;\n  box-shadow: 3px 3px 5px ",";\n  background-color: ",";\n  opacity: ",";\n  cursor: pointer;\n  &:hover {\n    height: ",";\n    width: ",";\n    margin: ",";\n  }\n  animation-name: ",";\n  animation-duration: 0.8s;\n  animation-iteration-count: 1;\n"]);return ze=function(){return e},e}function Ge(){var e=Object(O.a)(["\n 0% { \n   height: 30px; \n   width: 30px;\n   margin: 3px; \n  }\n  20% { \n   height: 24px; \n   width: 24px;\n   margin: 6px; \n    }\n 30% { \n   height: 32px; \n    width: 32px;  \n    margin: 2px;\n}\n 100% { \n   height: 30px; \n   width: 30px;\n   margin: 3px; \n }\n"]);return Ge=function(){return e},e}function We(){var e=Object(O.a)(["\n  margin: 0;\n  display: flex;\n"]);return We=function(){return e},e}function Je(){var e=Object(O.a)(["\n  margin: 10px 20px;\n  padding-bottom: 10px;\n"]);return Je=function(){return e},e}var qe,Ye=g.a.div(Je()),Ke=g.a.div(We()),Xe=Object(g.b)(Ge()),Qe=g.a.div(ze(),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.highlighted?.5:1}),(function(e){return e.clickable?"22px":"28px"}),(function(e){return e.clickable?"22px":"28px"}),(function(e){return e.clickable?"6px":"3px"}),(function(e){return e.animated&&Xe})),$e=g.a.div(He(),(function(e){return e.color||"black"}),(function(e){return e.selected?e.color||"black":"white"})),Ze=g.a.div(Fe(),(function(e){return e.width||"138px"}),(function(e){return e.height||"default"})),et=n(296),tt=Object(o.createContext)(),nt=tt,rt=function(e){var t=e.clickable,n=void 0===t||t,r=Object(o.useContext)(tt),c=r.currentPage,i=r.setCurrentPage,s=r.pages,u=r.isNotePlayedOnClick,l=r.setIsNotePlayedOnClick,j=r.tempo,d=r.setTempo,b=r.setTimeoutTempo;return Object(a.jsxs)(je,{padding:"0 0 24px 0",children:[Object(a.jsxs)(he,{flexDirection:"row",alignItems:"center",justifyContent:"flex-end",children:[Object(a.jsx)(Ve,{children:"Play on click"}),Object(a.jsx)(et.a,{onChange:function(){l(!u)},checked:u})]}),Object(a.jsxs)(he,{flexDirection:"row",alignItems:"center",justifyContent:"center",children:[Object(a.jsx)(Z,{onClick:function(){d(j-5),b(6e4/j/4)},children:"-"}),Object(a.jsxs)(Ve,{children:["tempo: ",j]}),Object(a.jsx)(Z,{onClick:function(){d(j+5),b(6e4/j/4)},children:"+"})]}),Object(a.jsxs)(he,{flexDirection:"row",alignItems:"center",justifyContent:"left",children:[Object(a.jsx)(Ve,{children:"Pages:"}),s.map((function(e,t){return Object(a.jsx)($e,{selected:c===t+1,onClick:n?function(){return i(t+1)}:null},t)}))]})]})},ct=n(18),it=n(23),at=n(24),ot={width:16,height:16},st=function(e){var t=e.onStopBtnPress,n=e.onPlayBtnPress,r=e.user,c=Object(o.useContext)(tt),i=c.isPlaying,s=c.isSaveSongVisible,u=c.setIsSaveSongVisible;return Object(a.jsxs)(je,{justifyContent:"center",children:[i?Object(a.jsx)(K,{onClick:t,backgroundColor:"#f00",children:Object(a.jsx)(it.a,{icon:at.e,color:"white",style:ot})}):Object(a.jsx)(K,{onClick:n,backgroundColor:"#0f0",children:Object(a.jsx)(it.a,{icon:at.d,color:"white",style:ot})}),Object(a.jsx)(K,{onClick:function(){return u(!s)},children:"Save"}),r&&Object(a.jsx)(ct.b,{to:"/load-song",children:Object(a.jsx)(K,{children:"Load"})})]})},ut=n(34),lt=n(134),jt=n(19),dt=n.n(jt),bt=function(e){var t=e.addInstrument,n=Object(o.useState)([]),r=Object(f.a)(n,2),s=r[0],u=r[1],l=Object(o.useState)(null),j=Object(f.a)(l,2),d=j[0],b=j[1],h=Object(o.useState)(!1),x=Object(f.a)(h,2),O=x[0],g=x[1],m=Object(o.useState)([]),v=Object(f.a)(m,2),y=v[0],w=v[1],k=Object(o.useContext)(tt).toggleIsAddInstrumentVisible,C=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,i,a,o,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t&&{params:{category:t}},e.next=3,dt.a.get("/api/instrument",r);case 3:i=e.sent,(a=i.data)&&(u(a),n&&(o=a.map((function(e){return e.category})),s=Object(p.a)(new Set(o)),w(s))),g(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){g(!0),C(null,!0)}),[]);return Object(a.jsxs)(A,{children:[Object(a.jsx)(je,{padding:"10px 12px 4px 12px",children:Object(a.jsx)(_e,{children:"Add Instrument"})}),Object(a.jsx)(je,{padding:"10px 12px 4px 12px",children:Object(a.jsx)(he,{flexDirection:"row",children:y.map((function(e){if("default"!==e)return Object(a.jsx)(X,{selected:d===e,onClick:function(){return function(e){C(e),b(e)}(e)},children:e},e)}))})}),O&&Object(a.jsx)(he,{justifyContent:"center",alignItems:"center",children:Object(a.jsx)(ut.Bars,{width:100,height:50,fill:"#000",stroke:"#000"})}),Object(a.jsx)(je,{padding:"4px 12px 0 12px",children:Object(a.jsx)(he,{children:Object(a.jsx)(lt.a,{height:260,width:380,itemCount:s.length,itemSize:30,children:function(e){var n=e.index,r=e.style,c=s[n];return Object(a.jsxs)(de,{style:r,bgColor:n%2===0?"#eee":"#fff",padding:"4px 0 4px 0",onClick:function(){return t(c),void k()},children:[Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(Me,{children:c.name})}),Object(a.jsx)(he,{children:Object(a.jsx)(Me,{children:c.category})}),Object(a.jsx)(he,{children:Object(a.jsx)(Me,{children:c.subCategory})})]})}})})}),Object(a.jsx)(je,{padding:"20px 0 10px 0",children:Object(a.jsx)(he,{alignItems:"center",children:Object(a.jsx)(Y,{hoverColor:"red",onClick:k,children:"Cancel"})})})]})},ht=function(e){var t=e.saveTheSong,n=e.user,r=e.toggleIsSaveSongVisible,c=Object(o.useState)(""),i=Object(f.a)(c,2),u=i[0],l=i[1];return Object(a.jsx)(A,{children:Object(a.jsxs)(s.a.Fragment,{children:[n?Object(a.jsxs)("p",{style:{margin:10},children:["Name your song (if you modified an existing song, ",Object(a.jsx)("br",{}),"it will still be saved under as new one):"]}):Object(a.jsxs)("p",{style:{margin:10},children:["You don't have a user account yet, therefore your song ",Object(a.jsx)("br",{}),"will be published as annonymous... to bad!",Object(a.jsx)("br",{}),"Please create a user profile before saving next time ",Object(a.jsx)("br",{}),"Name your song:"]}),Object(a.jsx)(D,{type:"text",placeholder:"My Supa Song...",value:u,width:"260px",onChange:function(e){l(e.target.value)}}),Object(a.jsxs)("div",{children:[Object(a.jsx)(Y,{onClick:function(){return t(u)},children:"Save"}),Object(a.jsx)(Y,{onClick:function(){return r()},children:"Cancel"})]})]})})},xt={START_PARTITION_LENGTH:8,MAX_PARTITION_LENGTH:64,DEFAULT_TEMPO:120,DEFAULT_TIMEOUT:125,DEFAULT_SOUND_ID:"5fba8681963aad73cd4ce0b6"},pt=function(e,t){if(!e)return[];var n=[];return e.forEach((function(){for(var e=[],r=1;r<=t;r++)e.push(0);n.push(e)})),n},ft=function(e){if(e.length)return e.map((function(e){return"Tone Synth"===e.category?Ot(e):gt(e)}))},Ot=function(e){for(var t=e.colors,n=e.pitches,r=[],c=0;c<n.length;c++)r.push({});return{id:e._id,label:e.name,isToneJs:!0,colors:t,sounds:r,pitches:n}},gt=function(e){var t=[],n=[];return e.sounds.forEach((function(e){e||(t.push({name:"default",url:""}),n.push("")),e.url?(t.push(new Audio(e.url)),n.push(e.pitch||"")):(t.push(null),n.push(""))})),{id:e._id,label:e.name,colors:e.colors,isToneJs:!1,sounds:t,pitches:n}},mt=n(64),vt=(new mt.a).toDestination(),yt=function(e,t,n){t.forEach((function(t,r){if(t[n]){var c=t[n];if(e[r].isToneJs){if(e[r].isToneJs){var i=mt.b();vt.triggerAttackRelease(e[r].pitches[c],"8n",i-.1)}}else e[r].sounds.forEach((function(e){e&&(e.pause(),e.currentTime=0)})),e[r].sounds[c].play()}}))},wt=function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=mt.b(),vt.triggerAttackRelease(t,"8n",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kt=["default","Drums","Bass","Synth","Guitar","Tone Synth","Piano","Brass","Strings","Flute","Effects","Voice","Other"],Ct={"":[""],default:[""],Drums:["","Kick","Snare","Tom","Hi-hat","Cymbal","Vinnyl","Percussion","Clang","Other"],Bass:["","Acoustic","Fretless","Electric","Picked","Synth","Slap"],Synth:["","Piano","Ambiant","Lead","Pad","Effect","Electronic"],Guitar:["","Acoustic","Clean","Overdrive","Distorsion","Muted","Jazz","Fuzz","Wah","Funk"],"Tone Synth":["","Synth","AMSynth","FMSynth"],Piano:["","Grand","Acoustic","Clavesin"],Brass:["","Horn","Trumpet","Tuba","Trombone"],Strings:["","Violin","Cello","Double Bass","Harp","Mixed-strings"],Flute:["","Flute","Clarinet","Pipeau","Peruvian","Bass","Recorder"],Effects:["","Scratch","Noise","Clang","Electronic","Mystic"],Voice:["","Hi-sing","Mid-sing","Low-sing","Talk","Noize"],Other:[""]},St=function(e){return Ct[e]},Pt=function(){return kt},Tt=function(){var e=["Anonymous","Mysterious","Unknown","Forgotten"],t=["Musician","Troubadour","Creator","Barde","Artist","Beats Maker","Sounds Juggler"],n=function(e){return Math.floor(Math.random()*e)};return"".concat(e[n(e.length)]," ").concat(t[n(t.length)])},It=function(e){var t=e.notePosition,n=e.color,r=e.status,c=e.toggleActiveNote,i=e.linePosition,o=e.sounds,s=e.highlighted,u=e.animated,l=e.pitches,j=l[r];return Object(a.jsx)(Qe,{color:n,highlighted:s,onClick:function(){c(t,i,o,l)},clickable:!0,animated:u,children:j||""})},Nt=function(e){var t=e.linePosition,n=e.notes,r=e.noteColors,c=e.toggleActiveNote,i=e.sounds,s=e.pitches,u=e.highlightedNote,l=e.label,j=e.animatedNotes,d=e.currentPage,b=e.lengthOfPage,h=e.hasDeleteButton,x=void 0===h||h,p=(e.smallNotes,Object(o.useContext)(tt).deleteLine),f=(d-1)*b,O=d*b,g=(null===n||void 0===n?void 0:n.length)?n.map((function(e,n){return n>=f&&n<O?Object(a.jsx)(It,{status:e,notePosition:n,color:r[e],toggleActiveNote:c,linePosition:t,sounds:i,pitches:s,highlighted:u===n,animated:null===j||void 0===j?void 0:j.includes(n)},n):null})):[];return Object(a.jsxs)(Ke,{children:[x&&Object(a.jsx)(Q,{onClick:function(){return p(t)},children:"x"}),Object(a.jsx)(Be,{width:"110px",children:l&&l}),g]})},At=function(e){var t=e.totalLength,n=e.lengthOfPage,r=e.isLastPage,c=e.currentPage,i=Object(o.useContext)(tt),s=i.copyOneBar,u=i.copiedPartitionBar,l=i.pasteOneBar,j=n/4,d=[],b=r&&!(t&&t%n===0)?t%n:t>n?n:t;if(n&&n>=4){for(var h=function(e){var t=(c-1)*j+e/4-1;d.push(Object(a.jsxs)(Ze,{children:["1 bar",Object(a.jsx)($,{onClick:function(){return s(t)},children:"copy"}),u&&Object(a.jsx)($,{onClick:function(){return l(t)},children:"paste"})]},t))},x=4;x<=b;x+=4)h(x);r&&t%4!==0&&d.push(Object(a.jsx)(Ze,{width:"".concat((t%4*33).toString(),"px"),height:"26px"}))}return Object(a.jsxs)(je,{children:[Object(a.jsx)(Be,{width:"124px"}),d]})},Et=function(e){var t=e.partition,n=e.lengthOfPage,r=e.currentPage,c=e.pages,i=e.instruments,o=e.toggleActiveNote,u=e.highlightedNote,l=e.animatedNotes,j=e.addOneBar,d=e.removeOneBar,b=e.toggleIsAddInstrumentVisible;return Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",minWidth:800},children:[Object(a.jsx)("div",{style:{minHeight:300,display:"flex",flex:1,flexDirection:"column",alignItems:"center",justifyContent:"center"},children:Object(a.jsx)(Ye,{children:i.length?Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsx)(At,{totalLength:t[0]&&t[0].length,lengthOfPage:n,isLastPage:r===c.length,currentPage:r}),i.map((function(e,c){return Object(a.jsx)(Nt,{linePosition:c,label:e.label,notes:t[c],noteColors:e.colors,toggleActiveNote:o,sounds:e.sounds,pitches:e.pitches,highlightedNote:u,animatedNotes:l,currentPage:r,lengthOfPage:n},c)})),Object(a.jsx)(Ke,{children:Object(a.jsx)(Be,{width:"124px",children:Object(a.jsx)(Z,{onClick:b,children:"+ Add instrument"})})})]}):Object(a.jsx)(Z,{padding:"8px 8px 8px 8px",onClick:b,children:"No partition to display yet... Click here to add your first instrument"})})}),!!(null===i||void 0===i?void 0:i.length)&&Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsx)(Z,{height:"160px",onClick:d,children:Object(a.jsx)(it.a,{icon:at.b})}),Object(a.jsx)(Z,{height:"160px",onClick:j,children:Object(a.jsx)(it.a,{icon:at.c})})]})]})},_t=function(e){var t=Object(o.useState)(""),n=Object(f.a)(t,2),r=n[0],u=n[1],l=Object(o.useState)(-1),j=Object(f.a)(l,2),d=j[0],b=j[1],h=s.a.useRef(null),x=window.innerWidth>=800?16:12,O=Object(o.useContext)(tt),g=O.tempo,m=O.setTempo,v=O.setIsPlaying,y=O.instruments,w=O.setInstruments,k=O.partition,C=O.setPartition,S=O.setTimeoutTempo,P=O.isNotePlayedOnClick,T=O.isAddInstrumentVisible,I=O.toggleIsAddInstrumentVisible,N=O.isSaveSongVisible,E=O.setIsSaveSongVisible,_=O.animatedNotes,D=O.timeoutTempo,L=O.setAnimatedNotes,B=O.currentPage,M=O.setCurrentPage,R=O.pages,U=O.setPages;Object(o.useEffect)((function(){var t,n,r=null===e||void 0===e||null===(t=e.match)||void 0===t||null===(n=t.params)||void 0===n?void 0:n.id;return r?F(r):V(),function(){return H()}}),[]);var V=function(){var e=Object(i.a)(c.a.mark((function e(){var t,n,r,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.a.get("/api/instrument/starter");case 2:t=e.sent,n=t.data,r=ft(n),i=pt(r,xt.START_PARTITION_LENGTH),w(r),C(i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(c.a.mark((function e(t){var n,r,i,a,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.a.get("/api/song/".concat(t));case 2:for(n=e.sent,r=n.data,i=Object(p.a)(r.instruments),a=ft(i),w(a),C(r.partition),m(r.tempo),S(6e4/r.tempo/4),o=Math.ceil(r.partition[0].length/x),s=[],u=1;u<=o;u++)s.push(1);U(s);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){v(!1),clearInterval(h.current)},z=function(){var t=Object(i.a)(c.a.mark((function t(n){var r,i,a,o;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=y.map((function(e){return e.id})),o={title:n,partition:k,tempo:g,instruments:a,creator:(null===(r=e.user)||void 0===r?void 0:r._id)||void 0,creatorName:(null===(i=e.user)||void 0===i?void 0:i.username)||Tt(),posted:!0},t.next=4,dt.a.post("api/song/",o);case 4:E(!1),u('New song "'.concat(n,'" successfully saved!')),setTimeout((function(){u("")}),1500);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a.jsxs)(s.a.Fragment,{children:[T&&Object(a.jsx)(bt,{addInstrument:function(e){for(var t=k[0]?k[0].length:8,n=[],r=1;r<=t;r++)n.push(0);var c,i=Object(p.a)(k),a=Object(p.a)(y),o="Tone Synth"===(c=e).category?Ot(c):gt(c);a.push(o),i.push(n),w(a),C(i),H()}}),N&&Object(a.jsx)(ht,{saveTheSong:z,toggleIsSaveSongVisible:function(){return E(!N)},user:e.user}),r&&Object(a.jsx)(A,{children:Object(a.jsx)("p",{children:r})}),Object(a.jsx)(rt,{}),Object(a.jsx)(Et,{partition:k,lengthOfPage:x,currentPage:B,pages:R,instruments:y,toggleActiveNote:function(e,t,n,r){var c=Object(p.a)(k),i=n.length,a=(c[t][e]+1)%i;c[t][e]=a,n[a]instanceof Audio&&P?n[a].play():y[t].isToneJs&&r.length&&r[a]&&wt(r[a]),C(c)},highlightedNote:d,animatedNotes:_,toggleIsAddInstrumentVisible:I,addOneBar:function(){if(k.length&&k[0].length<xt.MAX_PARTITION_LENGTH){var e=Object(p.a)(k);e.forEach((function(e){e.push(0)}));var t=Math.ceil(e[0].length/x),n=R.length<t?R.concat([1]):R;C(e),U(n)}},removeOneBar:function(){var e;if(!((null===(e=k[0])||void 0===e?void 0:e.length)<2)){var t=Object(p.a)(k),n=t[0].length-1;t.forEach((function(e){e.splice(n,1)}));var r=Math.ceil(t[0].length/x),c=R.length>r?R.slice(0,R.length-1):R;C(t),U(c),B>c.length&&M(c.length)}}}),Object(a.jsx)(st,{onPlayBtnPress:function(){!function(e,t,n){if(t&&t.length){v(!0),M(1);var r=0;h.current=setInterval((function(){if(b(r),L([r-1,r,r+1]),yt(e,t,r),++r>=t[0].length&&(r=0),r%x===1){var n=Math.ceil(r/x);M(n)}}),n)}}(y,k,D)},onStopBtnPress:H,user:e.user})]})},Dt=function(e){var t=e.status,n=e.colors,r=e.highlighted,c=e.isAnimated,i=n[t];return Object(a.jsx)(Qe,{color:i,highlighted:r,animated:c})},Lt=function(e){var t=e.notes,n=e.noteColors,r=e.highlightedNote,c=e.animatedNotes,i=e.lengthOfPage,o=e.currentPage,s=(o-1)*i,u=o*i,l=t.map((function(e,t){if(t>=s&&t<u)return Object(a.jsx)(Dt,{status:e,colors:n,highlighted:r===t,isAnimated:c.includes(t)},t)}));return Object(a.jsx)(Ke,{children:l})},Bt={width:40,height:40,padding:"10px 30px",border:"solid 1px rgba(0, 0, 0, 0.6)",color:"rgba(0, 0, 0, 0.7)",backgroundColor:"rgba(250, 250, 250, 0.5)",borderRadius:5,zIndex:5},Mt=function(e){var t=e.title,n=e.partition,r=e.musicLines,c=e.tempo,i=e.creatorName,s=Object(o.useState)(!1),u=Object(f.a)(s,2),l=u[0],j=u[1],d=Object(o.useState)(-1),b=Object(f.a)(d,2),h=b[0],x=b[1],p=Object(o.useState)([-1,-1,-1]),O=Object(f.a)(p,2),g=O[0],m=O[1],v=Object(o.useState)(1),y=Object(f.a)(v,2),w=y[0],k=y[1],C=Object(o.useState)([1]),S=Object(f.a)(C,2),P=(S[0],S[1]),T=6e4/c/4,I=Object(o.useRef)(null),N=window.innerWidth>=800?16:12;Object(o.useEffect)((function(){for(var e=[],t=Math.ceil(n[0].length/N),r=1;r<=t;r++)e.push(1);P(e)}),[]),Object(o.useEffect)((function(){return function(){return A()}}),[]);var A=function(){j(!1),clearInterval(I.current)};return Object(a.jsxs)(_,{children:[Object(a.jsx)(E,{onClick:function(){l?A():function(e,t,n){j(!0),k(1);var r=0;I.current=setInterval((function(){if(x(r),m([r-1,r,r+1]),yt(e,t,r),++r>=t[0].length&&(r=0),r%N===1){var n=Math.ceil(r/N);k(n)}}),n)}(r,n,T)},children:l?Object(a.jsx)(it.a,{icon:at.e,color:"black",style:Bt}):Object(a.jsx)(it.a,{icon:at.d,color:"black",style:Bt})}),Object(a.jsxs)(De,{children:[Object(a.jsx)(Le,{b:!0,children:t}),Object(a.jsxs)(Le,{children:["by ",i]})]}),Object(a.jsx)(Ye,{children:r.map((function(e,t){return Object(a.jsx)(Lt,{linePosition:t,notes:n[t],noteColors:e.colors,sounds:e.sounds,lengthOfPage:N,currentPage:w,highlightedNote:h,animatedNotes:g},t)}))})]})},Rt=function(){var e={padding:4,paddingTop:32,width:40,height:40};return Object(a.jsxs)(be,{children:[Object(a.jsx)(je,{children:Object(a.jsx)(he,{justifyContent:"center",alignItems:"center",children:Object(a.jsx)(Ee,{children:"Welcome to Boom-Tchak!"})})}),Object(a.jsx)(je,{children:Object(a.jsxs)(he,{justifyContent:"center",alignItems:"center",children:[Object(a.jsx)("p",{style:{margin:0,padding:8},children:"The app to discover and create nice music loops."}),Object(a.jsx)("p",{children:"What do you want to do?"})]})}),Object(a.jsxs)(je,{children:[Object(a.jsx)(ct.b,{to:"/create",style:{textDecoration:"none",color:"black"},children:Object(a.jsxs)(ve,{flexDirection:"column",clickable:!0,children:[Object(a.jsx)(je,{children:Object(a.jsx)("img",{src:"images/piano-keys.svg",alt:"Keys",width:"100",height:"auto"})}),Object(a.jsx)(_e,{children:"Create a Loop"})]})}),Object(a.jsx)(ct.b,{to:"/mix",style:{textDecoration:"none",color:"black"},children:Object(a.jsxs)(ve,{flexDirection:"column",clickable:!0,children:[Object(a.jsx)(je,{children:Object(a.jsx)("img",{src:"images/CassetteRemix.svg",alt:"Cassette",width:"100",height:"auto"})}),Object(a.jsx)(je,{children:Object(a.jsx)(_e,{children:"Start Mixing"})})]})})]}),Object(a.jsx)(je,{children:Object(a.jsx)(he,{children:Object(a.jsx)("p",{style:{margin:0,padding:8},children:"To check out some nice music loops, scroll down and click on the songs"})})}),Object(a.jsx)(je,{children:Object(a.jsxs)(he,{flexDirection:"row",justifyContent:"center",alignItems:"center",children:[Object(a.jsx)(it.a,{icon:at.a,style:e,color:"black"}),Object(a.jsx)(it.a,{icon:at.a,style:e,color:"black"}),Object(a.jsx)(it.a,{icon:at.a,style:e,color:"black"})]})})]})},Ut=function(e){var t=e.isAppIntroDisplayed,n=void 0!==t&&t,r=Object(o.useState)([]),u=Object(f.a)(r,2),l=u[0],j=u[1],d=Object(o.useState)(!1),b=Object(f.a)(d,2),h=b[0],x=b[1],O=Object(o.useState)(1),g=Object(f.a)(O,2),m=g[0],v=g[1],y=Object(o.useState)(""),w=Object(f.a)(y,2),k=w[0],C=w[1],S=function(){var e=Object(i.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,dt.a.get("/api/song/posted/".concat(m),{page:1});case 3:if(t=e.sent,(n=t.data).length){e.next=10;break}return C("no more songs to load..."),x(!1),setTimeout((function(){C("")}),2e3),e.abrupt("return");case 10:n.forEach((function(e){var t=ft(e.instruments);e.instruments=t})),j([].concat(Object(p.a)(l),Object(p.a)(n))),x(!1),v(m+1);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){S()}),[]);return Object(a.jsxs)(s.a.Fragment,{children:[n&&Object(a.jsx)(Rt,{}),l.map((function(e){return Object(a.jsx)(Mt,{title:e.title,partition:e.partition,musicLines:e.instruments,tempo:e.tempo,creatorName:e.creatorName},e._id)})),h?Object(a.jsx)(ut.Bars,{width:100,height:50,fill:"#000",stroke:"#000"}):k?Object(a.jsx)("p",{children:k}):Object(a.jsx)(K,{onClick:function(){S()},children:"load more"}),Object(a.jsx)(me,{height:"100px"})]})},Vt=function(e){var t=Object(o.useState)([]),n=Object(f.a)(t,2),r=n[0],s=n[1],u=Object(o.useState)(!1),l=Object(f.a)(u,2),j=l[0],d=l[1],b=Object(o.useState)(null),h=Object(f.a)(b,2),x=h[0],p=h[1],O=Object(o.useState)(""),g=Object(f.a)(O,2),m=g[0],v=g[1],y=function(){var t=Object(i.a)(c.a.mark((function t(){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!0),t.next=3,dt.a.get("/api/song/creator/".concat(e.user._id));case 3:n=t.sent,(r=n.data)&&(s(r),d(!1));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(o.useEffect)((function(){y()}),[]);var w=function(){var e=Object(i.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.a.delete("/api/song/".concat(t));case 2:n=e.sent,v(n.message),y(),setTimeout((function(){v("")}),1500);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(ge,{children:[Object(a.jsx)(Ee,{children:"Load Song"}),j&&Object(a.jsx)(he,{alignItems:"center",children:Object(a.jsx)(ut.Bars,{width:100,height:50,fill:"#000",stroke:"#000"})}),r.map((function(e){return Object(a.jsx)(V,{selected:x===e._id,onClick:function(){p(e._id)},children:e.title},e._id)})),Object(a.jsx)("div",{children:m&&Object(a.jsx)("p",{children:m})}),x&&Object(a.jsxs)("div",{style:{paddingTop:20},children:[Object(a.jsx)(ct.b,{to:"/create/".concat(x),children:Object(a.jsx)(Y,{children:"Load"})}),Object(a.jsx)(Y,{onClick:function(){return w(x)},children:"Delete"}),Object(a.jsx)(ct.b,{to:"/",children:Object(a.jsx)(Y,{children:"Cancel"})})]})]})},Ft=function(e,t){return dt.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},Ht=function(e,t){return dt.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},zt=function(e){var t=Object(o.useState)(""),n=Object(f.a)(t,2),r=n[0],s=n[1],u=Object(o.useState)(""),l=Object(f.a)(u,2),j=l[0],d=l[1],b=Object(o.useState)(""),h=Object(f.a)(b,2),x=h[0],p=h[1],O=function(){var t=Object(i.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ht(r,j);case 2:(n=t.sent).message?p(n.message):(e.setUser(n),e.history.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(e){"username"===e.target.name&&s(e.target.value),"password"===e.target.name&&d(e.target.value)};return Object(a.jsx)(ge,{children:Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{}),Object(a.jsxs)(he,{flex:1,children:[Object(a.jsx)(Ee,{children:"Login"}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{children:Object(a.jsx)(L,{htmlFor:"username",children:"Username:"})}),Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(D,{type:"text",name:"username",width:"100%",id:"username",value:r,onChange:g})})]}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{flex:1,children:Object(a.jsx)(L,{htmlFor:"password",children:"Password:"})}),Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(D,{type:"password",name:"password",width:"100%",id:"password",value:j,onChange:g})})]}),Object(a.jsx)(me,{}),Object(a.jsx)(je,{children:Object(a.jsxs)(he,{alignItems:"center",children:[x&&Object(a.jsx)(Ue,{children:x}),Object(a.jsx)(Y,{onClick:O,children:"Login"}),Object(a.jsx)("p",{children:"No profile yet?"}),Object(a.jsx)(ct.b,{to:"/signup",style:{textDecoration:"none",color:"black"},children:"signup"})]})})]}),Object(a.jsx)(he,{})]})})},Gt=function(e){var t=Object(o.useState)(""),n=Object(f.a)(t,2),r=n[0],s=n[1],u=Object(o.useState)(""),l=Object(f.a)(u,2),j=l[0],d=l[1],b=Object(o.useState)(""),h=Object(f.a)(b,2),x=h[0],p=h[1],O=function(){var t=Object(i.a)(c.a.mark((function t(n){var i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ft(r,j);case 2:(i=t.sent).message?p(i.message):(e.setUser(i),e.history.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),g=function(e){"username"===e.target.name&&s(e.target.value),"password"===e.target.name&&d(e.target.value)};return Object(a.jsx)(ge,{children:Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{}),Object(a.jsxs)(he,{flex:1,children:[Object(a.jsx)(Ee,{children:"Signup"}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{children:Object(a.jsx)(L,{htmlFor:"username",children:"Username:"})}),Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(D,{type:"text",name:"username",width:"100%",id:"username",value:r,onChange:g})})]}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{flex:1,children:Object(a.jsx)(L,{htmlFor:"password",children:"Password:"})}),Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(D,{type:"password",name:"password",width:"100%",id:"password",value:j,onChange:g})})]}),Object(a.jsx)(me,{}),Object(a.jsx)(je,{children:Object(a.jsxs)(he,{alignItems:"center",children:[x&&Object(a.jsx)(Ue,{children:x}),Object(a.jsx)(Y,{onClick:O,children:"Submit"}),Object(a.jsx)("p",{children:"Already have a profile?"}),Object(a.jsx)(ct.b,{to:"/login",style:{textDecoration:"none",color:"black"},children:"login"})]})})]}),Object(a.jsx)(he,{})]})})},Wt=function(e){var t=Object(o.useState)(""),n=Object(f.a)(t,2),r=n[0],s=n[1],u=function(){var t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,dt.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data}));case 2:e.setUser(null),e.history.push("/");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return e.user?Object(a.jsxs)(ge,{children:[Object(a.jsx)(je,{children:Object(a.jsx)(he,{children:Object(a.jsx)(Ee,{children:"Profile"})})}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(R,{src:"https://images.unsplash.com/photo-1502377429547-835a416e4a90?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=667&q=80"})}),Object(a.jsxs)(he,{justifyContent:"flex-start",flex:3,children:[Object(a.jsxs)("h3",{children:["Hello, ",e.user.username]}),Object(a.jsx)("p",{children:"Are you ready to create some funky beats today?"}),Object(a.jsxs)(je,{children:[Object(a.jsx)(ct.b,{to:"/load-song",children:Object(a.jsx)(Y,{children:"Load Song"})}),Object(a.jsx)(Y,{onClick:function(){e.user&&!0===e.user.admin?e.history.push("/create-instrument"):(s("Coming soon, stay tuned..."),setInterval((function(){s("")}),2e3))},children:"Create Instrument"}),Object(a.jsx)(Y,{onClick:u,children:"Logout"})]}),Object(a.jsx)(je,{children:Object(a.jsx)(he,{children:r&&Object(a.jsx)("p",{children:r})})})]})]})]}):Object(a.jsxs)(ge,{children:[Object(a.jsx)(Ee,{children:"No Profile..."}),Object(a.jsx)(je,{children:Object(a.jsx)(he,{children:"Please login or signup to access the profile page"})})]})},Jt=n(35),qt=n(21),Yt=function(e){var t=e.component,n=e.user,r=Object(Jt.a)(e,["component","user"]);return Object(a.jsx)(qt.b,Object(j.a)(Object(j.a)({user:n},r),{},{render:function(e){return n?Object(a.jsx)(t,Object(j.a)(Object(j.a)({user:n},r),e)):Object(a.jsx)(qt.a,{to:"/"})}}))},Kt=function(e){var t=e.name,n=e.setName,r=e.category,c=e.setCategory,i=e.subCategory,o=e.setSubCategory,u=Pt();return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{flex:1,children:"Name:"}),Object(a.jsx)(he,{justifyContent:"flex-start",flex:2,children:Object(a.jsx)(D,{width:"160px",type:"text",value:t,onChange:function(e){return n(e.target.value)}})})]}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{flex:1,children:"Category:"}),Object(a.jsx)(he,{justifyContent:"flex-start",flex:2,children:Object(a.jsx)(B,{name:"category",width:"170px",value:r,onChange:function(e){return c(e.target.value)},children:u.map((function(e,t){return Object(a.jsx)(M,{value:e,children:"default"!==e&&e},t)}))})})]}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{flex:1,children:"Sub-category:"}),Object(a.jsx)(he,{justifyContent:"flex-start",flex:2,children:Object(a.jsx)(B,{name:"sub-category",width:"170px",value:i,onChange:function(e){return o(e.target.value)},children:St(r).map((function(e,t){return Object(a.jsx)(M,{value:e,children:e},t)}))})})]})]})},Xt=function(e){var t=e.sounds,n=e.colors,r=e.addSound;return Object(a.jsxs)(s.a.Fragment,{children:[t&&t.map((function(e,t){return Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{children:Object(a.jsx)("p",{style:{margin:0,padding:"5px 0"},children:0===t?"Default":"".concat(t)})}),Object(a.jsx)(he,{children:Object(a.jsx)(U,{backgroundColor:n[t]})}),Object(a.jsx)(he,{flex:5,children:e.url?Object(a.jsx)(Y,{onClick:function(){return t=e.url,void new Audio(t).play();var t},children:e.name}):Object(a.jsx)("p",{style:{margin:0,padding:"5px 18px"},children:"No sound"})})]},t)})),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{flex:2}),Object(a.jsx)(he,{justifyContent:"flex-start",flex:5,children:Object(a.jsx)(Y,{backgroundColor:"#0f0",onClick:r,children:"Add Sound"})})]})]})},Qt=function(e){var t=e.loading,n=e.availableSounds,r=e.selectedSound,c=e.selectSound,i=e.filterName,u=Object(o.useState)("default"),l=Object(f.a)(u,2),j=l[0],d=l[1],b=Object(o.useState)(""),h=Object(f.a)(b,2),x=h[0],p=h[1],O=n.filter((function(e){return(!i||e.name.toLocaleLowerCase().includes(i.toLocaleLowerCase()))&&("default"===j||j===e.category)&&(!x||x===e.subCategory)})),g={margin:2,color:"black",backgroundColor:"white",padding:6,borderColor:"black",borderWidth:1,borderStyle:"solid",borderRadius:"50%",cursor:"pointer"},m=Pt();return t?Object(a.jsx)(he,{alignItems:"center",children:Object(a.jsx)(ut.Bars,{width:100,height:50,fill:"#000",stroke:"#000"})}):Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{}),Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(_e,{children:"Name"})}),Object(a.jsxs)(he,{flex:2,flexDirection:"row",justifyContent:"left",children:[Object(a.jsx)(_e,{children:"Category"}),Object(a.jsx)(B,{name:"category",width:"60px",value:j,onChange:function(e){return d(e.target.value)},children:m.map((function(e,t){return Object(a.jsx)(M,{value:e,children:"default"===e?"all":e},t)}))})]}),Object(a.jsxs)(he,{flex:2,flexDirection:"row",justifyContent:"left",children:[Object(a.jsx)(_e,{children:"Sub-cat."}),Object(a.jsx)(B,{name:"sub-category",width:"60px",value:x,onChange:function(e){return p(e.target.value)},children:St(j).map((function(e,t){return Object(a.jsx)(M,{value:e,children:e||"all"},t)}))})]}),Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(_e,{children:"Pitch"})})]}),O.map((function(e){return Object(a.jsxs)(de,{selected:r&&r.url===e.url,noHoverHighlight:!0,onClick:function(){return c(e)},children:[Object(a.jsx)(he,{children:Object(a.jsx)(it.a,{icon:at.f,style:g,onClick:function(){return new Audio(e.url).play()}})}),["name","category","subCategory","pitch"].map((function(t,n){return Object(a.jsx)(he,{flex:2,children:e[t]},n)}))]},e._id)}))]})},$t=function(e){var t=e.setView,n=e.fetchData,r=Object(o.useState)(""),u=Object(f.a)(r,2),l=u[0],j=u[1],d=Object(o.useState)(""),b=Object(f.a)(d,2),h=b[0],x=b[1],p=Object(o.useState)(""),O=Object(f.a)(p,2),g=O[0],m=O[1],v=Object(o.useState)(""),y=Object(f.a)(v,2),w=y[0],k=y[1],C=Object(o.useState)(null),S=Object(f.a)(C,2),P=S[0],T=S[1],I=Object(o.useState)(""),N=Object(f.a)(I,2),A=N[0],E=N[1],_=function(){var e=Object(i.a)(c.a.mark((function e(){var r,i,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l&&h&&g){e.next=5;break}return R("Please chose a name and select categories"),e.abrupt("return");case 5:if(!(l.length<5)){e.next=9;break}R("The sound name must be at least 5 char."),e.next=12;break;case 9:if(P){e.next=12;break}return R("please select a file to upload"),e.abrupt("return");case 12:return(r=new FormData).append("sounds",P),e.next=16,dt.a.post("/api/sound/upload",r);case 16:return i=e.sent,e.next=19,dt.a.post("/api/sound",{name:l,category:h,subCategory:g,pitch:w,url:i.data.secure_url});case 19:if(!(a=e.sent).message){e.next=23;break}return R(a.message),e.abrupt("return");case 23:t("ADD"),n();case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=Pt(),R=function(e){E(e),setInterval((function(){E("")}),3e3)};return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{children:"Select file:"}),Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(D,{id:"file",name:"file",type:"file",multiple:"false",onChange:function(e){var t=e.target.files[0];T(t)}})})]}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{children:"Name:"}),Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(D,{type:"text",value:l,onChange:function(e){return j(e.target.value)}})})]}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{children:"Category:"}),Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(B,{name:"category",onChange:function(e){return x(e.target.value)},children:L.map((function(e,t){return Object(a.jsx)(M,{value:e,children:"default"!==e&&e},t)}))})})]}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{children:"Sub-Category:"}),Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(B,{name:"sub-category",onChange:function(e){return m(e.target.value)},children:St(h).map((function(e,t){return Object(a.jsx)(M,{value:e,children:e},t)}))})})]}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{children:"Pitch (optional):"}),Object(a.jsx)(he,{flex:2,children:Object(a.jsx)(D,{type:"text",value:w,onChange:function(e){return k(e.target.value)}})})]}),Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{}),Object(a.jsx)(he,{flex:2,children:P&&P.name})]}),Object(a.jsx)(je,{children:Object(a.jsx)(he,{children:A&&A})}),Object(a.jsx)(je,{children:Object(a.jsx)(he,{flex:1,children:Object(a.jsx)(Y,{onClick:_,children:"Create Sound"})})})]})},Zt="ADD",en="UPLOAD",tn=function(e){var t=e.switchToOverview,n=e.availableSounds,r=e.selectedSound,c=e.selectSound,i=e.addSound,u=e.loading,l=e.fetchData,j=e.displayMessage,d=Object(o.useState)(Zt),b=Object(f.a)(d,2),h=b[0],x=b[1],p=Object(o.useState)(""),O=Object(f.a)(p,2),g=O[0],m=O[1];Object(o.useEffect)((function(){c(null)}),[]);return Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{flexDirection:"row",justifyContent:"left",children:Object(a.jsx)(Ee,{children:"Add Sound"})}),Object(a.jsx)(he,{flexDirection:"row",justifyContent:"left",children:Object(a.jsx)(D,{type:"text",width:"140px",value:g,placeholder:"Search...",onChange:function(e){return m(e.target.value)}})}),Object(a.jsxs)(he,{flex:2,flexDirection:"row",justifyContent:"flex-end",children:[Object(a.jsx)(Y,{backgroundColor:"#0f0",onClick:function(){r&&r.name&&r.url?i({id:r._id,name:r.name,color:"#ddd",url:r.url}):j("Please select a sound first")},children:"Add"}),Object(a.jsx)(Y,{backgroundColor:"#f00",onClick:t,children:"Cancel"}),h===Zt&&Object(a.jsx)(Y,{onClick:function(){x(en)},children:"Upload own sound"}),h===en&&Object(a.jsx)(Y,{onClick:function(){x(Zt)},children:"Search sound"})]})]}),Object(a.jsx)(je,{children:Object(a.jsxs)(he,{flex:1,children:[h===en&&Object(a.jsx)($t,{setView:x,fetchData:l}),h===Zt&&Object(a.jsx)(Qt,{loading:u,availableSounds:n,selectedSound:r,selectSound:c,filterName:g})]})})]})},nn=n(133),rn="OVERVIEW",cn="ADD_SOUND",an=function(e){var t=Object(o.useState)(""),n=Object(f.a)(t,2),r=n[0],u=n[1],l=Object(o.useState)(""),j=Object(f.a)(l,2),d=j[0],b=j[1],h=Object(o.useState)(""),x=Object(f.a)(h,2),O=x[0],g=x[1],m=Object(o.useState)(""),v=Object(f.a)(m,2),y=v[0],w=v[1],k=Object(o.useState)([{id:xt.DEFAULT_SOUND_ID}]),C=Object(f.a)(k,2),S=C[0],P=C[1],T=Object(o.useState)(rn),I=Object(f.a)(T,2),N=I[0],A=I[1],E=Object(o.useState)(!1),_=Object(f.a)(E,2),D=_[0],L=_[1],B=Object(o.useState)([]),M=Object(f.a)(B,2),R=M[0],U=M[1],V=Object(o.useState)(null),F=Object(f.a)(V,2),H=F[0],z=F[1],G=Object(o.useState)("start"),W=Object(f.a)(G,2),J=W[0],q=W[1],K=Object(o.useState)(["#ddd"]),Q=Object(f.a)(K,2),$=Q[0],Z=Q[1],ee=Object(o.useState)("#aaaaaa"),te=Object(f.a)(ee,2),ne=te[0],re=te[1],ce=Object(o.useState)("#555555"),ie=Object(f.a)(ce,2),ae=ie[0],oe=ie[1],se=Object(o.useState)("#aaaaaa"),ue=Object(f.a)(se,2),le=ue[0],de=ue[1];Object(o.useEffect)((function(){be()}),[ne,ae]);var be=function(){var e=Object(p.a)($),t=S.length;if(1!==t){if(t>=2&&(e[1]=ne),t>=3&&(e[t-1]=ae),t>3)for(var n=function(e,t,n){function r(e){var t,n,r,c=e.length>6?e.substr(1,e.length-1):e;return c.length>3?(t=c.substr(0,2),n=c.substr(2,2),r=c.substr(4,2)):(t=c.substr(0,1)+c.substr(0,1),n=c.substr(1,1)+c.substr(1,1),r=c.substr(2,1)+c.substr(2,1)),[parseInt(t,16),parseInt(n,16),parseInt(r,16)]}for(var c=function(e,t,n){return n=n||"0",(e+="").length>=t?e:new Array(t-e.length+1).join(n)+e},i=r(e),a=r(t),o=[],s=100/(n+1),u=[a[0]-i[0],a[1]-i[1],a[2]-i[2]],l=0;l<n;l++){var j=c(u[0]>0?Math.round(u[0]/100*(s*(l+1))).toString(16):Math.round(i[0]+u[0]/100*(s*(l+1))).toString(16),2),d=c(u[1]>0?Math.round(u[1]/100*(s*(l+1))).toString(16):Math.round(i[1]+u[1]/100*(s*(l+1))).toString(16),2),b=c(u[2]>0?Math.round(u[2]/100*(s*(l+1))).toString(16):Math.round(i[2]+u[2]/100*(s*(l+1))).toString(16),2);o[l]=["#",j,d,b].join("")}return o}(ne,ae,t-3),r=2;r<t-1;r++)e[r]=n[r-2];Z(e)}},xe=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(cn),e.next=3,pe();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=Object(i.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.next=3,dt.a.get("/api/sound");case 3:t=e.sent,(n=t.data)&&(U(n),L(!1));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(e){w(e),setInterval((function(){w("")}),2e3)},Oe=function(){u(""),b(""),g(""),P([{id:xt.DEFAULT_SOUND_ID}])},me=function(){var t=Object(i.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&d&&O){t.next=3;break}return fe("Please enter the fields: ".concat(r?"":"Name"," ").concat(d?"":"Category"," ").concat(O?"":"Sub-category")),t.abrupt("return");case 3:if(!(S.length<2)){t.next=6;break}return fe("You must select at least 1 sound"),t.abrupt("return");case 6:return t.next=8,dt.a.post("/api/instrument",{name:r,category:d,subCategory:O,sounds:S.map((function(e){return e.id||null})),colors:$,creator:e.user._id,private:!1});case 8:(n=t.sent).message?fe(n.message):200===n.status&&(fe("Success! You just created a new instrument!"),Oe());case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)(ge,{children:[Object(a.jsx)(je,{children:y&&Object(a.jsx)(Ue,{children:y})}),N===cn&&Object(a.jsx)(tn,{switchToOverview:function(){A(rn)},availableSounds:R,selectedSound:H,selectSound:function(e){z(e)},loading:D,addSound:function(e){if(e.url,e.color){var t={id:e.id,name:e.name,url:e.url,pitch:e.pitch||""},n=[].concat(Object(p.a)(S),[t]);P(n),Z([].concat(Object(p.a)($),["#ddd"])),A(rn)}else fe("Please select or upload a sound and pick a color")},fetchData:pe,displayMessage:fe}),N===rn&&Object(a.jsxs)(s.a.Fragment,{children:[Object(a.jsxs)(je,{children:[Object(a.jsx)(he,{flex:1,children:Object(a.jsx)(Ee,{children:"Create Instrument"})}),Object(a.jsxs)(he,{flex:2,flexDirection:"row",alignItems:"flex-end",justifyContent:"flex-end",children:[Object(a.jsx)(Y,{onClick:me,children:"Save Instrument"}),Object(a.jsx)(Y,{onClick:Oe,children:"Reset"}),Object(a.jsx)(Y,{onClick:function(){},children:"Help"})]})]}),Object(a.jsxs)(je,{children:[Object(a.jsxs)(he,{flex:2,children:[Object(a.jsx)(Kt,{name:r,setName:u,category:d,setCategory:b,subCategory:O,setSubCategory:g}),Object(a.jsx)(je,{children:Object(a.jsx)(he,{children:Object(a.jsx)("h3",{children:"Sounds:"})})}),Object(a.jsx)(je,{children:Object(a.jsx)(he,{children:Object(a.jsx)(Xt,{sounds:S,colors:$,addSound:xe})})})]}),Object(a.jsxs)(he,{flex:1,children:[Object(a.jsx)(nn.a,{color:le,onChangeComplete:function(e){de(e.hex),"start"===J?re(e.hex):"end"===J&&oe(e.hex)}}),Object(a.jsx)(je,{children:Object(a.jsxs)(he,{flexDirection:"row",alignItems:"center",justifyContent:"flex-start",children:[Object(a.jsx)(X,{selected:"start"===J,onClick:function(){return q("start")},children:"Pick start color"}),Object(a.jsx)(X,{selected:"end"===J,onClick:function(){return q("end")},children:"Pick end color"})]})})]})]})]})]})},on=Object(o.createContext)(),sn=on,un={Drums:{4:[[[1,0,1,0],[0,0,0,0],[0,0,0,0]],[[1,0,0,0],[1,1,1,1],[0,0,1,0]],[[2,0,2,0],[0,3,0,3],[0,0,1,0]],[[0,0,0,0],[0,3,0,3],[2,0,2,0]],[[1,0,0,0],[0,0,0,0],[0,0,0,0]],[[1,1,0,0],[0,0,0,0],[0,0,0,0]]],8:[[[1,0,0,0,1,0,0,0],[0,0,2,0,0,0,2,0],[0,0,0,0,0,0,0,0]],[[1,0,0,0,0,0,0,0],[1,0,1,0,1,0,1,0],[0,0,0,0,1,0,0,0]],[[2,0,0,0,2,0,0,0],[0,0,3,0,0,0,3,0],[0,0,0,0,1,0,0,0]],[[1,0,0,0,0,0,0,0],[0,0,3,0,0,0,3,0],[2,0,0,0,2,0,0,0]],[[1,0,0,0,0,0,0,0],[0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0]],[[1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]]},Percussion:{4:[[[1,2,2,1],[0,0,0,0],[0,0,0,0]],[[0,0,0,0],[0,0,0,0],[0,2,2,2]]],8:[[[2,2,4,2,2,4,1,1],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[0,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,1,0,0,1,0,0]],[[0,0,0,0,0,0,0,0],[0,0,0,5,5,5,4,0],[0,0,1,0,0,0,0,0]]]},Bass:{8:[[[1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0]],[[1,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0]]],16:[[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0]],[[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]]},Melody:{8:[[[1,0,0,0,1,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]],[[1,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0]]],16:[[[1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[6,0,3,2,0,8,0,0,1,0,0,0,1,0,2,0]]]}},ln=function(e){var t=e.data,n=e.toggleActiveNote,r=e.highlightedNote,c=e.toggleLoopActive,i=Object(o.useContext)(on).setPartition,s=function(e){var t=function(e,t){var n=un[e][t];return n[Math.floor(Math.random()*n.length)]}(e.name,e.partition[0].length),n=Object(p.a)(e.partition);n.forEach((function(e,n){e.forEach((function(r,c){e[c]=t[n][c]}))})),i(n,e.name)},u=function(e,r,c,i){return n(e,r,c,i,t)};return Object(a.jsx)(ve,{children:Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(Le,{b:!0,style:{margin:"-4px 0 8px -10px"},children:t.name}),t.instruments.map((function(e,n){var c;return Object(a.jsx)(Nt,{linePosition:n,label:e.label,notes:t.partition[n],noteColors:e.colors,toggleActiveNote:u,sounds:e.sounds,pitches:e.pitches,highlightedNote:r%(null===t||void 0===t||null===(c=t.partition[n])||void 0===c?void 0:c.length),currentPage:1,lengthOfPage:32,hasDeleteButton:!1},n)}))]}),Object(a.jsxs)("div",{style:{paddingTop:12,alignItems:"center"},children:[Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(a.jsx)(et.a,{onChange:function(){c(t)},checked:!!t.status[0][0]}),Object(a.jsx)(Ve,{children:"On"})]}),Object(a.jsx)("div",{style:{padding:"0 0 0 12px"},children:Object(a.jsx)(Z,{onClick:function(){!function(e){var t=Object(p.a)(e.partition);t.forEach((function(e){e.forEach((function(t,n){e[n]=0}))})),i(t,e.name)}(t)},children:"Reset"})}),Object(a.jsx)("div",{style:{padding:"0 0 0 12px"},children:Object(a.jsx)(Z,{onClick:function(){s(t)},children:"Random"})})]})]})})},jn={width:28,height:28},dn=function(e){var t=e.onPlayBtnPress,n=e.onStopBtnPress,r=Object(o.useContext)(on),c=r.tempo,i=r.setTempo,s=r.isPlaying;return Object(a.jsxs)(ve,{children:[s?Object(a.jsx)(K,{variant:"big",onClick:n,backgroundColor:"#f00",children:Object(a.jsx)(it.a,{icon:at.e,color:"white",style:jn})}):Object(a.jsx)(K,{variant:"big",onClick:t,backgroundColor:"#0f0",children:Object(a.jsx)(it.a,{icon:at.d,color:"white",style:jn})}),Object(a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0 18px"},children:[Object(a.jsx)(Z,{onClick:function(){i(c-5)},children:"-"}),Object(a.jsxs)(Ve,{children:["tempo: ",c]}),Object(a.jsx)(Z,{onClick:function(){i(c+5)},children:"+"})]})]})},bn=function(e){var t=e.loop1,n=e.loop2,r=e.loop3,c=e.loop4,i=e.onPlayBtnPress,o=e.onStopBtnPress,s=e.toggleLoopActive,u=e.toggleActiveNote,l=e.highlightedNote;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center"},children:[Object(a.jsx)(ve,{children:Object(a.jsx)(Ee,{children:"Mix"})}),Object(a.jsx)(dn,{onPlayBtnPress:i,onStopBtnPress:o}),Object(a.jsx)(ve,{children:Object(a.jsx)("img",{src:"images/CassetteRemix.svg",alt:"Cassette",width:"100",height:"auto"})})]}),Object(a.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(a.jsx)(ln,{data:t,toggleActiveNote:u,highlightedNote:l,toggleLoopActive:s}),Object(a.jsx)(ln,{data:n,toggleActiveNote:u,highlightedNote:l,toggleLoopActive:s}),Object(a.jsx)(ln,{data:r,toggleActiveNote:u,highlightedNote:l,toggleLoopActive:s}),Object(a.jsx)(ln,{data:c,toggleActiveNote:u,highlightedNote:l,toggleLoopActive:s})]})]})},hn=function(e){var t=Object(o.useState)(!1),n=Object(f.a)(t,2),r=n[0],s=n[1],u=Object(o.useContext)(on),l=u.setPartition,j=u.setInstruments,d=u.highlightedNote,b=u.setHighlightedNote,h=u.loop1,x=u.loop2,O=u.loop3,g=u.loop4,m=u.tempo,v=u.setIsPlaying,y=u.setLoopActive,w=Object(o.useRef)(null);Object(o.useEffect)((function(){k("loop1",["E-Kicks 1","E-Hi-Hats 1","E-Cymbals"]),k("loop2",["Vinyls 1","Congas","Clap 1"]),k("loop3",["Tone Bass Synth Am","Tone Bass Synth Em"]),k("loop4",["Tone Synth Am Hi","Tone Synth Chromatic","Pizzicato C-Maj"])}),[]);var k=function(){var e=Object(i.a)(c.a.mark((function e(t,n){var r,i,a,o,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),r="loop3"===t||"loop4"===t?16:8,e.next=4,dt.a.get("/api/instrument",{params:{names:n}});case 4:i=e.sent,a=i.data,o=ft(a),u=pt(o,r),j(o,t),l(u,t),s(!1);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return r?Object(a.jsx)(ut.Bars,{width:100,height:50,fill:"#000",stroke:"#000"}):Object(a.jsx)(bn,{loop1:h,loop2:x,loop3:O,loop4:g,onPlayBtnPress:function(){!function(){v(!0);var e=6e4/m/4;qe=0,w.current=setInterval((function(){b(qe),[h,x,O,g].forEach((function(e){1===e.status[0][0]&&yt(e.instruments,e.partition,qe%e.partition[0].length)})),qe++}),e)}()},onStopBtnPress:function(){v(!1),clearInterval(w.current)},toggleLoopActive:function(e){var t=Object(p.a)(e.status),n=t[0][0];t[0][0]=1===n?0:1,y(t,e.name)},setLoopActive:y,toggleActiveNote:function(e,t,n,r,c){var i=Object(p.a)(c.partition),a=n.length,o=(i[t][e]+1)%a;i[t][e]=o,l(i,c.name)},highlightedNote:d})},xn=n(27),pn="SET_PARTITION",fn="SET_INSTRUMENTS",On="SET_HIGHLIGHTED_NOTE",gn="SET_BEAT_COUNTER",mn="SET_IS_PLAYING",vn="SET_LOOP_ACTIVE",yn="SET_TEMPO",wn=function(e,t){var n=t.payload,r=t.type,c=t.loop;switch(r){case pn:return Object(j.a)(Object(j.a)({},e),{},Object(xn.a)({},c,Object(j.a)(Object(j.a)({},e[c]),{},{partition:n})));case fn:return Object(j.a)(Object(j.a)({},e),{},Object(xn.a)({},c,Object(j.a)(Object(j.a)({},e[c]),{},{instruments:n})));case vn:return Object(j.a)(Object(j.a)({},e),{},Object(xn.a)({},c,Object(j.a)(Object(j.a)({},e[c]),{},{status:n})));case On:return Object(j.a)(Object(j.a)({},e),{},{highlightedNote:n});case gn:return Object(j.a)(Object(j.a)({},e),{},{beatCounter:n});case mn:return Object(j.a)(Object(j.a)({},e),{},{isPlaying:n});case yn:return Object(j.a)(Object(j.a)({},e),{},{tempo:n});default:return e}},kn=function(e){var t=Object(o.useReducer)(wn,{beatCounter:0,highlightedNote:-1,isPlaying:!1,tempo:120,complexity:"pro",loop1:{name:"Drums",instruments:[],partition:[],status:[[1]]},loop2:{name:"Percussion",instruments:[],partition:[],status:[[1]]},loop3:{name:"Bass",instruments:[],partition:[],status:[[1]]},loop4:{name:"Melody",instruments:[],partition:[],status:[[1]]}}),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(a.jsx)(sn.Provider,{value:{beatCounter:r.beatCounter,highlightedNote:r.highlightedNote,isPlaying:r.isPlaying,tempo:r.tempo,loop1:r.loop1,loop2:r.loop2,loop3:r.loop3,loop4:r.loop4,setTempo:function(e){c({type:yn,payload:e})},setIsPlaying:function(e){c({type:mn,payload:e})},setLoopActive:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loop1";c({type:vn,payload:e,loop:t})},setHighlightedNote:function(e){c({type:On,payload:e})},setBeatCounter:function(e){c({type:gn,payload:e})},setPartition:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loop1";c({type:pn,payload:e,loop:t})},setInstruments:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"loop1";c({type:fn,payload:e,loop:t})}},children:e.children})},Cn=function(){return Object(a.jsxs)(ge,{children:[Object(a.jsx)(je,{children:Object(a.jsx)(he,{children:Object(a.jsx)(Ee,{children:"Help"})})}),Object(a.jsx)(je,{children:Object(a.jsx)(he,{children:Object(a.jsx)("p",{children:'The 2 main sections of the app are "Listen", where you can browse, check and play the music loops that are created, and "Create" where you can create your own loops.'})})}),Object(a.jsx)(je,{children:Object(a.jsxs)(he,{children:[Object(a.jsx)(_e,{children:"Create song"}),Object(a.jsx)("p",{children:"In the song creation space you see the music grid which is composed of notes represented by gray squares, and a control panel at the bottom:"}),Object(a.jsx)(je,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)(he,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)("img",{src:"images/music-grid-1.png",alt:"Music grid example"})})}),Object(a.jsx)("p",{children:"On the music grid, the horizontal axis is the time, the vertical is the array of instruments that are available to you. Let's first try the default instruments."}),Object(a.jsx)("p",{children:"By clicking on a square, it changes color as you activate a sound to be played at a certain time in the loop. For example if you click on the first square of the kick, a kick will be played at the beginning."}),Object(a.jsx)(je,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)(he,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)("img",{src:"images/music-grid-2.png",alt:"Music grid example"})})}),Object(a.jsx)("p",{children:"Some instruments have only one sound, some have several, clicking several times on the same square switches between different sounds. Let's create a basic loop by switching on the notes (1 click) to form the following pattern:"}),Object(a.jsx)(je,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)(he,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)("img",{src:"images/music-grid-3.png",alt:"Music grid example"})})}),Object(a.jsx)("p",{children:"Press play and the magic happens! The notes are read as a sequence, at a 120 tempo, 8 squares represent a second, so our loop is 1 second long."}),Object(a.jsx)("p",{children:'To make the loop longer, press the "+" button next to "bars" and the grid extends. When the grid is longer than 16 notes, it gets spread on several pages that you can check and select using the page selector:'}),Object(a.jsx)(je,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)(he,{alignItems:"center",justifyContent:"center",children:Object(a.jsx)("img",{src:"images/music-pages-selectors.png",alt:"Page selectors example"})})}),Object(a.jsx)("p",{children:'You can add and remove instruments (grid lines) using the menu. Once you are happy with your creation, click on "save" to keep it and share it. To save, you will need to create a profile, but this takes a couple of seconds. That\'s about it!'})]})}),Object(a.jsx)(je,{children:Object(a.jsx)(he,{children:Object(a.jsx)(_e,{children:"Have fun!"})})})]})},Sn={textDecoration:"none",color:"black"},Pn={textDecoration:"none",color:"black",padding:"0 8px"},Tn=function(e){return Object(a.jsx)(xe,{children:Object(a.jsxs)(Oe,{flexDirection:"row",justifyContent:"space-between",children:[Object(a.jsx)(ct.b,{style:Sn,to:"/",children:Object(a.jsx)(Re,{children:"Boum-Tchak!"})}),Object(a.jsxs)("div",{style:{display:"flex",paddingRight:20,alignItems:"center"},children:[Object(a.jsx)(ct.b,{style:Sn,to:"/listen",children:Object(a.jsx)(K,{children:"Listen"})}),Object(a.jsx)(ct.b,{style:Sn,to:"/create",children:Object(a.jsx)(K,{children:"Create"})}),Object(a.jsx)(ct.b,{style:Sn,to:"/mix",children:Object(a.jsx)(K,{children:"Mix"})}),e.user?Object(a.jsx)(ct.b,{style:Sn,to:"/profile",children:Object(a.jsx)(K,{children:"Profile"})}):Object(a.jsx)(ct.b,{style:Pn,to:"/login",children:"Login"}),Object(a.jsx)(ct.b,{style:Pn,to:"/help",children:"Help"})]})]})})},In=(n(280),function(e){Object(h.a)(n,e);var t=Object(x.a)(n);function n(){var e;Object(d.a)(this,n);for(var r=arguments.length,c=new Array(r),i=0;i<r;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={user:e.props.user},e.setUser=function(t){e.setState({user:t})},e}return Object(b.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)(fe,{children:[Object(a.jsx)(Tn,{user:this.state.user}),Object(a.jsxs)(Oe,{children:[Object(a.jsx)(pe,{}),Object(a.jsxs)(qt.d,{children:[Object(a.jsx)(qt.b,{exact:!0,path:"/create",render:function(t){return Object(a.jsx)(_t,Object(j.a)({user:e.state.user},t))}}),Object(a.jsx)(qt.b,{exact:!0,path:"/help",render:function(e){return Object(a.jsx)(Cn,Object(j.a)({},e))}}),Object(a.jsx)(qt.b,{exact:!0,path:"/create/:id",render:function(t){return Object(a.jsx)(_t,Object(j.a)({user:e.state.user},t))}}),Object(a.jsx)(qt.b,{exact:!0,path:"/login",render:function(t){return e.state.user?Object(a.jsx)(qt.a,{to:"/"}):Object(a.jsx)(zt,Object(j.a)({setUser:e.setUser},t))}}),Object(a.jsx)(qt.b,{exact:!0,path:"/signup",render:function(t){return e.state.user?Object(a.jsx)(qt.a,{to:"/"}):Object(a.jsx)(Gt,Object(j.a)({setUser:e.setUser},t))}}),Object(a.jsx)(Yt,{exact:!0,path:"/profile",user:this.state.user,setUser:this.setUser,component:Wt}),Object(a.jsx)(Yt,{exact:!0,path:"/create-instrument",user:this.state.user,setUser:this.setUser,component:an}),Object(a.jsx)(qt.b,{exact:!0,path:"/",render:function(e){return Object(a.jsx)(Ut,Object(j.a)({isAppIntroDisplayed:!0},e))}}),Object(a.jsx)(qt.b,{exact:!0,path:"/listen",render:function(e){return Object(a.jsx)(Ut,Object(j.a)({isAppIntroDisplayed:!1},e))}}),Object(a.jsx)(qt.b,{exact:!0,path:"/load-song",render:function(t){return e.state.user?Object(a.jsx)(Vt,Object(j.a)({user:e.state.user},t)):Object(a.jsx)(qt.a,{to:"/"})}}),Object(a.jsx)(qt.b,{exact:!0,path:"/mix",render:function(e){return Object(a.jsx)(kn,{children:Object(a.jsx)(hn,{})})}})]})]})]})}}]),n}(s.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Nn="SET_TEMPO",An="SET_TIMEOUT_TEMPO",En="SET_IS_NOTE_PLAYED_ON_CLICK",_n="SET_IS_ADD_INSTRUMENT_VISIBLE",Dn="SET_IS_SAVE_SONG_VISIBLE",Ln="SET_IS_PLAYING",Bn="SET_PARTITION",Mn="SET_INSTRUMENTS",Rn="SET_COPIED_PARTITION_BAR",Un="SET_ANIMATED_NOTES",Vn="SET_CURRENT_PAGE",Fn="SET_PAGES",Hn=function(e,t){var n=t.payload;switch(t.type){case Nn:return Object(j.a)(Object(j.a)({},e),{},{tempo:n});case An:return Object(j.a)(Object(j.a)({},e),{},{timeoutTempo:n});case _n:return Object(j.a)(Object(j.a)({},e),{},{isAddInstrumentVisible:n});case En:return Object(j.a)(Object(j.a)({},e),{},{isNotePlayedOnClick:n});case Dn:return Object(j.a)(Object(j.a)({},e),{},{isSaveSongVisible:n});case Ln:return Object(j.a)(Object(j.a)({},e),{},{isPlaying:n});case Mn:return Object(j.a)(Object(j.a)({},e),{},{instruments:n});case Bn:return Object(j.a)(Object(j.a)({},e),{},{partition:n});case Rn:return Object(j.a)(Object(j.a)({},e),{},{copiedPartitionBar:n});case Un:return Object(j.a)(Object(j.a)({},e),{},{animatedNotes:n});case Vn:return Object(j.a)(Object(j.a)({},e),{},{currentPage:n});case Fn:return Object(j.a)(Object(j.a)({},e),{},{pages:n});default:return e}},zn=function(e){var t={isPLaying:!1,instruments:[],partition:[],copiedPartitionBar:null,partitionLength:xt.START_PARTITION_LENGTH,maxPartitionLength:xt.MAX_PARTITION_LENGTH,tempo:xt.DEFAULT_TEMPO,timeoutTempo:xt.DEFAULT_TIMEOUT,isNotePlayedOnClick:!0,isAddInstrumentVisible:!1,isSaveSongVisible:!1,animatedNotes:[],currentPage:1,pages:[1]},n=Object(o.useReducer)(Hn,t),r=Object(f.a)(n,2),c=r[0],i=r[1],s=function(e){i({type:Mn,payload:e})},u=function(e){i({type:Bn,payload:e})};return Object(a.jsx)(nt.Provider,{value:{tempo:c.tempo,isPlaying:c.isPlaying,instruments:c.instruments,partition:c.partition,copiedPartitionBar:c.copiedPartitionBar,timeoutTempo:c.timeoutTempo,isNotePlayedOnClick:c.isNotePlayedOnClick,isAddInstrumentVisible:c.isAddInstrumentVisible,isSaveSongVisible:c.isSaveSongVisible,animatedNotes:c.animatedNotes,currentPage:c.currentPage,pages:c.pages,setTempo:function(e){i({type:Nn,payload:e})},setIsPlaying:function(e){i({type:Ln,payload:e})},setInstruments:s,setPartition:u,copyOneBar:function(e){var t=[],n=4*e,r=n+3;c.partition.forEach((function(e){for(var c=[],i=n;i<=r;i++)c.push(e[i]);t.push(c)})),i({type:Rn,payload:t})},pasteOneBar:function(e){var t=[],n=c.partition[0].length,r=4*e,a=r+3;c.partition.forEach((function(e,i){for(var o=[],s=0,u=0;u<n;u++)u>=r&&u<=a?(o.push(c.copiedPartitionBar[i][0+s]),s++):o.push(e[u]);t.push(o)})),i({type:Bn,payload:t})},setTimeoutTempo:function(e){i({type:An,payload:e})},setIsNotePlayedOnClick:function(e){i({type:En,payload:e})},toggleIsAddInstrumentVisible:function(){var e=!c.isAddInstrumentVisible;i({type:_n,payload:e})},setIsSaveSongVisible:function(e){i({type:Dn,payload:e})},deleteLine:function(e){var t=Object(p.a)(c.partition),n=Object(p.a)(c.instruments);t.splice(e,1),n.splice(e,1),u(t),s(n)},setAnimatedNotes:function(e){i({type:Un,payload:e})},setCurrentPage:function(e){i({type:Vn,payload:e})},setPages:function(e){i({type:Fn,payload:e})}},children:e.children})};(function(){var e=Object(i.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dt.a.get("/api/auth/loggedin");case 2:t=e.sent,n=t.data,l.a.render(Object(a.jsx)(ct.a,{children:Object(a.jsx)(zn,{children:Object(a.jsx)(In,{user:n})})}),document.getElementById("root"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()(),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[281,1,2]]]);
//# sourceMappingURL=main.eb27f721.chunk.js.map